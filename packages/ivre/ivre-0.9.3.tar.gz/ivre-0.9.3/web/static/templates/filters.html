<!--
  This file is part of IVRE.
  Copyright 2011 - 2014 Pierre LALET <pierre.lalet@cea.fr>

  IVRE is free software: you can redistribute it and/or modify it
  under the terms of the GNU General Public License as published by
  the Free Software Foundation, either version 3 of the License, or
  (at your option) any later version.

  IVRE is distributed in the hope that it will be useful, but WITHOUT
  ANY WARRANTY; without even the implied warranty of MERCHANTABILITY
  or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public
  License for more details.

  You should have received a copy of the GNU General Public License
  along with IVRE. If not, see <http://www.gnu.org/licenses/>.
-->

<li class="sidebox-header"><i class="glyphicon glyphicon-filter black"></i> Filter</li>
<form class="" onsubmit="ToolTip.remove_all(this); set_hash(Array.prototype.slice.call(this.getElementsByTagName('input')).filter(function(p){return p.getAttribute('type') === 'text' && p.value;}).map(function(p){return p.value}).join(' '));" id="filters">
  <li ng-repeat="filter in filters">
    <div class="input-group">
      <input class="form-control input-medium"
	     type="text"
	     id="{{'filter' + filter.id}}"
	     name="{{'filter' + filter.id}}"
	     data-trigger="manual"
	     data-html="true"
	     data-container="#navbar"
	     oninput="ToolTip.handle(this, HELP_FILTERS);"
	     onfocus="ToolTip.handle(this, HELP_FILTERS);"
	     onblur="ToolTip.remove(this);"
	     ng-model="filter.value"
	     placeholder="Add a criteria"/>
      <span class="input-group-addon clickable"
	    onclick="this.parentNode.getElementsByTagName('input')[0].value=''; this.parentNode.parentNode.parentNode.onsubmit();"
	    ><i class="glyphicon glyphicon-remove"></i></span>
    </div>
  </li>
  <li>
    <div class="input-group">
      <input class="form-control input-medium"
	     type="text"
	     id="filter-last"
	     name="filter-last"
	     data-trigger="manual"
	     data-html="true"
	     data-container="#navbar"
	     oninput="ToolTip.handle(this, HELP_FILTERS);"
	     onfocus="ToolTip.handle(this, HELP_FILTERS);"
	     onblur="ToolTip.remove(this);"
	     placeholder="Add a criteria"
	     ng-model="lastfiltervalue"/>
      <span class="input-group-addon clickable"
	    onclick="document.getElementById('filter-last').value=''; document.getElementById('filter-last').focus();"
	    ><i class="glyphicon glyphicon-remove"></i></span>
    </div>
    <input type="submit"
	   tabindex="-1"
	   style="position: absolute; left: -9999px; width: 1px; height: 1px;"/>
  </li>
</form>
