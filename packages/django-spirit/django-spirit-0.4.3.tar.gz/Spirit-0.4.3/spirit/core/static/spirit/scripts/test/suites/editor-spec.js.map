{"version":3,"sources":["editor-spec.coffee"],"names":[],"mappings":"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","file":"editor-spec.js","sourceRoot":"/source/","sourcesContent":["describe \"editor plugin tests\", ->\n  textarea = null\n  editor = null\n\n  beforeEach ->\n    fixtures = do jasmine.getFixtures\n    fixtures.fixturesPath = 'base/test/fixtures/'\n    loadFixtures 'editor.html'\n\n    textarea = $('#id_comment').editor {\n      boldedText: \"foo bolded text\",\n      italicisedText: \"foo italicised text\",\n      listItemText: \"foo list item\",\n      linkText: \"foo link text\",\n      linkUrlText: \"foo link url\",\n      imageText: \"foo image text\",\n      imageUrlText: \"foo image url\"\n    }\n    editor = textarea.data 'plugin_editor'\n\n  it \"doesnt break selector chaining\", ->\n    expect(textarea).toEqual $('#id_comment')\n    expect(textarea.length).toEqual 1\n\n  it \"adds bold\", ->\n    $('.js-box-bold').trigger 'click'\n    expect(textarea.val()).toEqual \"**foo bolded text**\"\n\n  it \"adds italic\", ->\n    $('.js-box-italic').trigger 'click'\n    expect(textarea.val()).toEqual \"*foo italicised text*\"\n\n  it \"adds list\", ->\n    $('.js-box-list').trigger 'click'\n    expect(textarea.val()).toEqual \"\\n* foo list item\"\n\n  it \"adds url\", ->\n    $('.js-box-url').trigger 'click'\n    expect(textarea.val()).toEqual \"[foo link text](foo link url)\"\n\n  it \"adds poll\", ->\n    $('.js-box-poll').trigger 'click'\n    expected = \"\\n\\n[poll name=1]\\n# Title\\n1. Description\\n2. Description\\n[/poll]\\n\"\n    expect(textarea.val()).toEqual expected\n\n    # Increase name\n    $('.js-box-poll').trigger 'click'\n    expect(textarea.val()).toEqual expected + \"\\n\\n[poll name=2]\\n# Title\\n1. Description\\n2. Description\\n[/poll]\\n\"\n\n  it \"adds image\", ->\n    $('.js-box-image').trigger 'click'\n    expect(textarea.val()).toEqual \"![foo image text](foo image url)\"\n\n  it \"adds all\", ->\n    $('.js-box-bold').trigger 'click'\n    $('.js-box-italic').trigger 'click'\n    $('.js-box-list').trigger 'click'\n    $('.js-box-url').trigger 'click'\n    $('.js-box-image').trigger 'click'\n    # expect(textarea.val()).toEqual \"![foo image text](foo image url)[foo link text](foo link url)\\n* foo list item*foo italicised text***foo bolded text**\"\n\n  it \"wraps the selected text, bold\", ->\n    textarea.val \"birfoobar\"\n    textarea.first()[0].selectionStart = 3\n    textarea.first()[0].selectionEnd = 6\n\n    $('.js-box-bold').trigger 'click'\n    expect(textarea.val()).toEqual \"bir**foo**bar\"\n\n  it \"wraps the selected text, italic\", ->\n    textarea.val \"birfoobar\"\n    textarea.first()[0].selectionStart = 3\n    textarea.first()[0].selectionEnd = 6\n\n    $('.js-box-italic').trigger 'click'\n    expect(textarea.val()).toEqual \"bir*foo*bar\"\n\n  it \"wraps the selected text, list\", ->\n    textarea.val \"birfoobar\"\n    textarea.first()[0].selectionStart = 3\n    textarea.first()[0].selectionEnd = 6\n\n    $('.js-box-list').trigger 'click'\n    expect(textarea.val()).toEqual \"bir\\n* foobar\"\n\n  it \"wraps the selected text, url\", ->\n    textarea.val \"birfoobar\"\n    textarea.first()[0].selectionStart = 3\n    textarea.first()[0].selectionEnd = 6\n\n    $('.js-box-url').trigger 'click'\n    expect(textarea.val()).toEqual \"bir[foo](foo link url)bar\"\n\n  it \"wraps the selected text, image\", ->\n    textarea.val \"birfoobar\"\n    textarea.first()[0].selectionStart = 3\n    textarea.first()[0].selectionEnd = 6\n\n    $('.js-box-image').trigger 'click'\n    expect(textarea.val()).toEqual \"bir![foo](foo image url)bar\"\n\n  it \"shows html preview\", ->\n    textarea.val \"*foo*\"\n    $('.js-box-preview').trigger 'click'\n    expect(textarea.is \":visible\").toEqual false\n    expect($(\".js-box-preview-content\").is \":visible\").toEqual true\n    expect($(\".js-box-preview-content\").html()).toEqual \"<p><em>foo</em></p>\\n\"\n\n    # clicking again should hide the preview and show the textarea\n    $('.js-box-preview').trigger 'click'\n    expect(textarea.is \":visible\").toEqual true\n    expect($(\".js-box-preview-content\").is \":visible\").toEqual false\n"]}