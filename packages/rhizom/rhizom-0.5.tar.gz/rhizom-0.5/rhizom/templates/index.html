{% extends "base.html" %}
{% import '_macros.html' as macros %}

{% block content %}

<div class="jumbotron">
    <h1>Rhizom <img src="{{ url_for("static", filename="logo-64.png") }}" alt="logo" /></h1>
    <p>
        {{ _("Visualize your relationship network.") }}
        <a href="https://gitlab.com/abompard/rhizom" class="btn btn-primary">
            {{ _("Learn more") }}
        </a>
    </p>
</div>

{% if graphs %}

<h2>{{ _("Available graphs:") }}</h2>

<ul class="lead graphlist">
    {% for graph in graphs %}
    <li>
        <a href="{{ url_for('view', graph_id=graph.id) }}">{{ graph.name }}</a>
        <span class="text-muted smaller">
            (<span class="glyphicon glyphicon-user"></span>
            {{ graph.persons|length }} / {{ graph.relationships|length }})
        </span>
    </li>
    {% endfor %}
</ul>

{% else %}

<p>{{ _("No graph available.") }}</p>

{% endif %}

{% if current_user.is_authenticated %}

<div class="newgraph">
<hr />

<h3>{{ _("New graph") }}</h3>

<form role="form" method="post" class="form-inline">
    {{ new_form.hidden_tag() }}
    <p>
        {{ _("Create an empty graph:") }} {{ macros.render_field(new_form.name, class="input-sm") }}
        <button type="submit" name="formname" value="new"
                class="btn btn-sm btn-primary">{{ _("Create") }}</button>
    </p>
</form>

{% if graphs %}
<form role="form" method="post" class="form-inline">
    {{ copy_form.hidden_tag() }}
    <p>
        {{ _("Or from an existing graph:") }}
        {{ macros.render_field(copy_form.existing, class="form-control input-sm") }}
        <button type="submit" name="formname" value="copy"
                class="btn btn-sm btn-default">{{ _("Copy") }}</button>
</form>
{% endif %}

</div>

{% else %}

<p class="text-info">{{ _("You need to login to see the graphs:") }}
    &nbsp; <img src="{{ url_for('static', filename='signin.png') }}"
                alt="Login" class="signin" />
</p>

{% endif %}

{% endblock %}
