\section{Module \module{canvas}}
\label{canvas}

\sectionauthor{J\"org Lehmann}{joergl@users.sourceforge.net} 

One of the central modules for the PostScript access in \PyX{} is
named \verb|canvas|. Besides providing the class \verb|canvas|, which
presents a collection of visual elements like paths, other canvases,
\TeX{} or \LaTeX{} elements, it contains the class
\texttt{canvas.clip} which allows clipping of the output.

A canvas may also be embedded in another one using its \texttt{insert}
method. This may be useful when you want to apply a transformation on
a whole set of operations..

\declaremodule{}{canvas}

\subsection{Class \class{canvas}}

This is the basic class of the canvas module, which serves to collect
various graphical and text elements you want to write eventually to an
(E)PS file.

\begin{classdesc}{canvas}{attrs=[], texrunner=None}
  Construct a new canvas, applying the given \var{attrs}, which can be
  instances of \class{trafo.trafo}, \class{canvas.clip},
  \class{style.strokestyle} or \class{style.fillstyle}.  The
  \var{texrunner} argument can be used to specify the texrunner
  instance used for the \method{text()} method of the canvas.  If not
  specified, it defaults to \var{text.defaulttexrunner}.
\end{classdesc}


Paths can be drawn on the canvas using one of the following methods:

\begin{methoddesc}{draw}{path, attrs}
  Draws \var{path} on the canvas applying the given \var{attrs}.
\end{methoddesc}

\begin{methoddesc}{fill}{path, attrs=[]}
  Fills the given \var{path} on the canvas applying the given
  \var{attrs}. 
\end{methoddesc}

\begin{methoddesc}{stroke}{path, attrs=[]}
  Strokes the given \var{path} on the canvas applying the given
  \var{attrs}.
\end{methoddesc}

Arbitrary allowed elements like other \class{canvas} instances can
be inserted in the canvas using

\begin{methoddesc}{insert}{item, attrs=[]}
  Inserts an instance of \class{base.canvasitem} into the canvas.  If
  \var{attrs} are present, \var{item} is inserted into a new
  \class{canvas}instance with \var{attrs} as arguments passed to its
  constructor is created. Then this \class{canvas} instance is
  inserted itself into the canvas. Returns \var{item}.
\end{methoddesc}

Text output on the canvas is possible using

\begin{methoddesc}{text}{x, y, text, attrs=[]}
  Inserts \var{text} at position (\var{x}, \var{y}) into the
  canvas applying \var{attrs}. This is a shortcut for
  \texttt{insert(texrunner.text(x, y, text, attrs))}).
\end{methoddesc}

The \class{canvas} class provides access to the total geometrical size
of its element:

\begin{methoddesc}{bbox}{}
  Returns the bounding box enclosing all elements of the canvas.
\end{methoddesc}

A canvas also allows one to set global options:

\begin{methoddesc}{set}{styles}
  Sets the given \var{styles} (instances of \class{style.fillstyle} or
  \class{style.strokestyle} or subclasses thereof).  for the rest of
  the canvas.
\end{methoddesc}

\begin{methoddesc}{settexrunner}{texrunner}
  Sets a new \var{texrunner} for the canvas.
\end{methoddesc}

The contents of the canvas can be written using the following two
convenience methods, which wrap the canvas into a single page
document.

\begin{methoddesc}{writeEPSfile}{filename, **kwargs}
  Writes the canvas to \var{filename} (the extension \texttt{.eps} is
  appended automatically, if it is not present). This method
  constructs a single page document, passing \var{kwargs} to the
  \class{document.page} constructor and the calls the
  \method{writeEPSfile} method of this \class{document.document}
  instance passing the \var{filename}

\end{methoddesc}

\begin{methoddesc}{writePDFfile}{filename, **kwargs}
  Writes the canvas to \var{filename} (the extension \texttt{.pdf} is
  appended automatically, if it is not present). This method
  constructs a single page document, passing \var{kwargs} to the
  \class{document.page} constructor and the calls the
  \method{writePDFfile} method of this \class{document.document}
  instance passing the \var{filename}
\end{methoddesc}

For more information about the possible arguments of the
\class{document.page} constructor, we refer to Sect.~\ref{document}.

%%% Local Variables:
%%% mode: latex
%%% TeX-master: "manual.tex"
%%% End:
