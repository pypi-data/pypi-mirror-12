{% extends "base.html" %}

{% block main %}
    <h1>Server Guardian Server Status Dashboard</h1>
    {% for server in object_list %}
        <h2>{{ server.name }}</h2>
        <p>URL: {{ server.url }}</p>
        <p>Last updated: {{ server.last_updated }}</p>
        <p>Status code: {{ server.status_code }}</p>
        <table style="width: 100%;">
        <thead>
        <tr>
            <th>Metric</th>
            <th>Status</th>
            <th colspan="4">Info</th>
        </tr>
        </thead>
        <tbody>
        {% for metric in server.get_parsed_response %}
            <tr>
                {# When there's no label, we assume, that there was no valid JSON response.#}
                <td>{{ metric.label|default:"No JSON" }}</td>
                <td class="server-guardian-status-{{ metric.status }}">{{ metric.status }}</td>
                <td colspan="4">{{ metric.info|default:"It looks as if there was no valid JSON response." }}</td>
            </tr>
        {% endfor %}
        </tbody>
        </table>
    {% endfor %}

{% endblock %}