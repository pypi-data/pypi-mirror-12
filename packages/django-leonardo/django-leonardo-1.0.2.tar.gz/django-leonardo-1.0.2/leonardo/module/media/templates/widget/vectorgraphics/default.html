{% extends widget.get_base_template %}

{% load i18n %}

{% block content %}
<object id="svg-{{ widget.fe_identifier }}" class='svg_preview' data="{{ widget.source.file.url }}" type="image/svg+xml" {% if width and height %}width="{{ width }}" height="{{ height }}"{% else %}width="640px" height="480px"{% endif %}>
    <embed id="embed-{{ widget.fe_identifier }}" src="{{ widget.source.file.url }}" type="image/svg+xml" width="100%"/>
</object>
<script type="text/javascript">
var parent_width = $('#svg-{{ widget.fe_identifier }}').closest('#{{ widget.fe_identifier }}').width();
var parent_height = $('#svg-{{ widget.fe_identifier }}').closest('#{{ widget.fe_identifier }}').height();
$('#svg-{{ widget.fe_identifier }}').width(parent_width);
$('#svg-{{ widget.fe_identifier }}').closest('svg').attr('viewBox', '0 0 ' + parent_width + ' ' + parent_height);

</script>
{% endblock %}
