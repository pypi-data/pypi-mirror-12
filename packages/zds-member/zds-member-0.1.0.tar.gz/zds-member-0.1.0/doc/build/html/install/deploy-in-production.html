

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Configuration des serveurs de production &mdash; Zds Member 1.0 documentation</title>
  

  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  

  

  
    <link rel="top" title="Zds Member 1.0 documentation" href="../index.html"/>
        <link rel="up" title="Installation" href="../install.html"/>
        <link rel="next" title="Installation du frontend" href="frontend-install.html"/>
        <link rel="prev" title="Installation du backend sous Windows" href="backend-windows-install.html"/> 

  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-nav-search">
        

        
          <a href="../index.html" class="icon icon-home"> Zds Member
        

        
        </a>

        
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

        
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
        
          
          
              <ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="../install.html">Installation</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="backend-linux-install.html">Installation du backend sous Linux</a><ul>
<li class="toctree-l3"><a class="reference internal" href="backend-linux-install.html#installation-et-configuration-de-virtualenv">Installation et configuration de <cite>virtualenv</cite></a></li>
<li class="toctree-l3"><a class="reference internal" href="backend-linux-install.html#installation-des-outils-front-end">Installation des outils front-end</a></li>
<li class="toctree-l3"><a class="reference internal" href="backend-linux-install.html#lancer-zds">Lancer ZdS</a></li>
<li class="toctree-l3"><a class="reference internal" href="backend-linux-install.html#aller-plus-loin">Aller plus loin</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="backend-os-x-install.html">Installation du backend sous OS X</a><ul>
<li class="toctree-l3"><a class="reference internal" href="backend-os-x-install.html#installation-de-virtualenv">Installation de virtualenv</a></li>
<li class="toctree-l3"><a class="reference internal" href="backend-os-x-install.html#creation-de-votre-environnement">Création de votre environnement</a></li>
<li class="toctree-l3"><a class="reference internal" href="backend-os-x-install.html#recuperation-de-la-librairie-lxml-pour-python-2-7-via-macports">Récupération de la librairie lxml pour python 2.7 via MacPorts</a></li>
<li class="toctree-l3"><a class="reference internal" href="backend-os-x-install.html#recuperation-de-cairo-svg">Récupération de cairo (svg)</a></li>
<li class="toctree-l3"><a class="reference internal" href="backend-os-x-install.html#ajout-de-flags-pour-compiler-avec-gcc-plutot-que-clang-lors-de-l-installation-de-lxml">Ajout de flags pour compiler avec gcc plutôt que clang lors de l&#8217;installation de lxml</a></li>
<li class="toctree-l3"><a class="reference internal" href="backend-os-x-install.html#installation-des-outils-front-end">Installation des outils front-end</a></li>
<li class="toctree-l3"><a class="reference internal" href="backend-os-x-install.html#installation-de-toutes-les-dependances">Installation de toutes les dépendances</a></li>
<li class="toctree-l3"><a class="reference internal" href="backend-os-x-install.html#lancer-zds">Lancer ZdS</a></li>
<li class="toctree-l3"><a class="reference internal" href="backend-os-x-install.html#aller-plus-loin">Aller plus loin</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="backend-windows-install.html">Installation du backend sous Windows</a><ul>
<li class="toctree-l3"><a class="reference internal" href="backend-windows-install.html#prerequis">Prérequis</a></li>
<li class="toctree-l3"><a class="reference internal" href="backend-windows-install.html#installation-des-outils-front-end">Installation des outils front-end</a></li>
<li class="toctree-l3"><a class="reference internal" href="backend-windows-install.html#suite-de-l-installation">Suite de l&#8217;installation</a></li>
</ul>
</li>
<li class="toctree-l2 current"><a class="current reference internal" href="">Configuration des serveurs de production</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#parametres">Paramètres</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#parametres-generaux">Paramètres généraux</a></li>
<li class="toctree-l4"><a class="reference internal" href="#parametres-specifiques">Paramètres spécifiques</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#premier-deploiement">Premier déploiement</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#utilisateur-local">Utilisateur local</a></li>
<li class="toctree-l4"><a class="reference internal" href="#installation-des-outils">Installation des outils</a></li>
<li class="toctree-l4"><a class="reference internal" href="#clone-du-repo-et-configuration-de-prod">Clone du repo et configuration de prod</a></li>
<li class="toctree-l4"><a class="reference internal" href="#installation-de-l-application-de-base">Installation de l&#8217;application de base</a></li>
<li class="toctree-l4"><a class="reference internal" href="#outils-specifiques-a-un-serveur-de-run">Outils spécifiques à un serveur de run</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#mise-a-jour-d-une-instance-existante">Mise à jour d&#8217;une instance existante</a></li>
<li class="toctree-l3"><a class="reference internal" href="#personnalisation-d-une-instance">Personnalisation d&#8217;une instance</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="frontend-install.html">Installation du frontend</a><ul>
<li class="toctree-l3"><a class="reference internal" href="frontend-install.html#installation-de-node-js-et-npm">Installation de Node.js et npm</a><ul>
<li class="toctree-l4"><a class="reference internal" href="frontend-install.html#windows">Windows</a></li>
<li class="toctree-l4"><a class="reference internal" href="frontend-install.html#mac-os-x">Mac OS X</a></li>
<li class="toctree-l4"><a class="reference internal" href="frontend-install.html#linux">Linux</a></li>
<li class="toctree-l4"><a class="reference internal" href="frontend-install.html#freebsd-openbsd">FreeBSD / OpenBSD</a></li>
<li class="toctree-l4"><a class="reference internal" href="frontend-install.html#mise-a-jour-de-node-js-et-npm">Mise à jour de Node.js et npm</a></li>
<li class="toctree-l4"><a class="reference internal" href="frontend-install.html#installation-des-dependances-npm">Installation des dépendances npm</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="frontend-install.html#utilisation-des-outils">Utilisation des outils</a><ul>
<li class="toctree-l4"><a class="reference internal" href="frontend-install.html#presentation-de-gulp">Présentation de Gulp</a></li>
<li class="toctree-l4"><a class="reference internal" href="frontend-install.html#utilisation-de-gulp">Utilisation de Gulp</a></li>
<li class="toctree-l4"><a class="reference internal" href="frontend-install.html#quelques-informations-supplementaires">Quelques informations supplémentaires</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="frontend-install.html#nettoyage-des-outils">Nettoyage des outils</a><ul>
<li class="toctree-l4"><a class="reference internal" href="frontend-install.html#desinstaller-les-dependances">Désinstaller les dépendances</a></li>
<li class="toctree-l4"><a class="reference internal" href="frontend-install.html#desinstaller-les-dependances-inutilisees">Désinstaller les dépendances inutilisées</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="install-solr.html">Installation de Solr (pour la recherche)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="install-solr.html#prerequis-sur-linux">Prérequis sur linux</a></li>
<li class="toctree-l3"><a class="reference internal" href="install-solr.html#prerequis-sur-windows">Prérequis sur windows</a></li>
<li class="toctree-l3"><a class="reference internal" href="install-solr.html#procedure-commune">Procédure commune</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../back-end.html">Le <em>back-end</em></a><ul>
<li class="toctree-l2"><a class="reference internal" href="../back-end/contents.html">Les tutoriels et articles v2.0 (ZEP 12)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../back-end/contents.html#vocabulaire-et-definitions">Vocabulaire et définitions</a></li>
<li class="toctree-l3"><a class="reference internal" href="../back-end/contents.html#de-la-structure-generale-d-un-contenu">De la structure générale d&#8217;un contenu</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../back-end/contents.html#des-extraits">Des extraits</a></li>
<li class="toctree-l4"><a class="reference internal" href="../back-end/contents.html#des-conteneurs">Des conteneurs</a></li>
<li class="toctree-l4"><a class="reference internal" href="../back-end/contents.html#un-contenu">Un contenu</a></li>
<li class="toctree-l4"><a class="reference internal" href="../back-end/contents.html#des-objets-en-general">Des objets en général</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../back-end/contents.html#cycle-de-vie-des-contenus">Cycle de vie des contenus</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../back-end/contents.html#le-brouillon">Le brouillon</a></li>
<li class="toctree-l4"><a class="reference internal" href="../back-end/contents.html#la-beta">La bêta</a></li>
<li class="toctree-l4"><a class="reference internal" href="../back-end/contents.html#la-validation">La validation</a></li>
<li class="toctree-l4"><a class="reference internal" href="../back-end/contents.html#la-publication">La publication</a></li>
<li class="toctree-l4"><a class="reference internal" href="../back-end/contents.html#l-entraide">L&#8217;entraide</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../back-end/contents.html#import-de-contenus">Import de contenus</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../back-end/contents.html#import-d-image">Import d&#8217;image</a></li>
<li class="toctree-l4"><a class="reference internal" href="../back-end/contents.html#regles">Règles</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../back-end/contents.html#aspects-techniques-et-fonctionnels">Aspects techniques et fonctionnels</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../back-end/contents.html#les-metadonnees">Les métadonnées</a></li>
<li class="toctree-l4"><a class="reference internal" href="../back-end/contents.html#le-stockage-en-base-de-donnees">Le stockage en base de données</a></li>
<li class="toctree-l4"><a class="reference internal" href="../back-end/contents.html#le-stockage-via-des-dossiers">Le stockage <em>via</em> des dossiers</a></li>
<li class="toctree-l4"><a class="reference internal" href="../back-end/contents.html#les-permissions">Les permissions</a></li>
<li class="toctree-l4"><a class="reference internal" href="../back-end/contents.html#processus-de-publication">Processus de publication</a></li>
<li class="toctree-l4"><a class="reference internal" href="../back-end/contents.html#consultation-d-un-contenu-publie">Consultation d&#8217;un contenu publié</a></li>
<li class="toctree-l4"><a class="reference internal" href="../back-end/contents.html#qu-en-est-il-des-images">Qu&#8217;en est-il des images ?</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../back-end/contents.html#passage-des-tutos-v1-aux-tutos-v2">Passage des tutos v1 aux tutos v2</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../back-end/contents.html#migrer-une-archive-v1-vers-une-archive-v2">Migrer une archive v1 vers une archive v2</a></li>
<li class="toctree-l4"><a class="reference internal" href="../back-end/contents.html#migrer-la-base-de-donnees">Migrer la base de données</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../back-end/contents_manifest.html">Les fichiers de manifeste</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../back-end/contents_manifest.html#les-versions-du-manifeste">Les versions du manifeste</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../back-end/contents_manifest.html#nomenclature">Nomenclature</a></li>
<li class="toctree-l4"><a class="reference internal" href="../back-end/contents_manifest.html#version-1-0">Version 1.0</a></li>
<li class="toctree-l4"><a class="reference internal" href="../back-end/contents_manifest.html#version-2-0">Version 2.0</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../back-end/forum.html">Les forums</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../back-end/forum.html#le-decoupage-des-forums">Le découpage des forums</a></li>
<li class="toctree-l3"><a class="reference internal" href="../back-end/forum.html#la-moderation-des-forums">La modération des forums</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../back-end/forum.html#la-moderation-des-sujets">La modération des sujets</a></li>
<li class="toctree-l4"><a class="reference internal" href="../back-end/forum.html#la-moderation-des-messages">La modération des messages</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../back-end/forum.html#les-filtres-sur-les-sujets">Les filtres sur les sujets</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../back-end/forum.html#dans-un-forum">Dans un forum</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../back-end/forum.html#suivre-un-sujet">Suivre un sujet</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../back-end/forum.html#etre-notifie-sur-le-site-lui-meme">Être notifié sur le site lui même</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../back-end/gallery.html">Les galeries</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../back-end/gallery.html#generalites">Généralités</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../back-end/gallery.html#creation-et-remplissage">Création et remplissage</a></li>
<li class="toctree-l4"><a class="reference internal" href="../back-end/gallery.html#les-utilisateurs-et-leurs-droits">Les utilisateurs et leurs droits</a></li>
<li class="toctree-l4"><a class="reference internal" href="../back-end/gallery.html#la-suppression">La suppression</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../back-end/gallery.html#lien-galerie-tutoriel">Lien galerie &lt;-&gt; Tutoriel</a></li>
<li class="toctree-l3"><a class="reference internal" href="../back-end/gallery.html#aspects-techniques">Aspects techniques</a></li>
<li class="toctree-l3"><a class="reference internal" href="../back-end/gallery.html#outils-logiciels-utilises">Outils logiciels utilisés</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../back-end/member.html">Les membres</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../back-end/member.html#inscription">Inscription</a></li>
<li class="toctree-l3"><a class="reference internal" href="../back-end/member.html#desinscription">Désinscription</a></li>
<li class="toctree-l3"><a class="reference internal" href="../back-end/member.html#les-membres-dans-les-environnement-de-test-et-de-developpement">Les membres dans les environnement de test et de développement</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../back-end/member.html#l-interface-de-promotion">L&#8217;interface de promotion</a></li>
<li class="toctree-l4"><a class="reference internal" href="../back-end/member.html#l-interface-de-karma">L&#8217;interface de karma</a></li>
<li class="toctree-l4"><a class="reference internal" href="../back-end/member.html#l-interface-de-reinitialisation-de-mot-de-passe">L&#8217;interface de réinitialisation de mot de passe</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../back-end/private-message.html">Les messages privés</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../back-end/private-message.html#envoi-et-participation">Envoi et participation</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../back-end/search.html">La recherche</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../back-end/search.html#l-indexation-des-donnees">L&#8217;indexation des données</a></li>
<li class="toctree-l3"><a class="reference internal" href="../back-end/search.html#id1">La recherche</a></li>
<li class="toctree-l3"><a class="reference internal" href="../back-end/search.html#dans-le-code">Dans le code ?</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../back-end/search.html#pourquoi-avoir-utilise-haystack-ne-peut-t-on-pas-appeller-solr-directement">Pourquoi avoir utilisé Haystack, ne peut t-on pas appeller Solr directement ?</a></li>
<li class="toctree-l4"><a class="reference internal" href="../back-end/search.html#pourquoi-solr-et-pas-un-autre-moteur-de-recherche">Pourquoi Solr et pas un autre moteur de recherche ?</a></li>
<li class="toctree-l4"><a class="reference internal" href="../back-end/search.html#comment-fonctionne-le-code-de-l-indexation">Comment fonctionne le code de l&#8217;indexation ?</a></li>
<li class="toctree-l4"><a class="reference internal" href="../back-end/search.html#le-cas-particulier-de-l-indexation-des-tutoriels-et-articles">Le cas particulier de l&#8217;indexation des tutoriels et articles</a></li>
<li class="toctree-l4"><a class="reference internal" href="../back-end/search.html#comment-lancer-l-indexation-et-ou-comment-verifier-les-donnees-indexees">Comment lancer l&#8217;indexation et/ou comment vérifier les données indexées ?</a></li>
<li class="toctree-l4"><a class="reference internal" href="../back-end/search.html#comment-fonctionne-le-code-de-la-recherche">Comment fonctionne le code de la recherche ?</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../back-end/search.html#quels-sont-les-fichiers-de-configuration-importants">Quels sont les fichiers de configuration importants ?</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../back-end/search.html#utilisation-de-la-commande-index-content">Utilisation de la commande <code class="docutils literal"><span class="pre">index_content</span></code></a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../back-end-code.html">Documentation technique du <em>back-end</em></a><ul>
<li class="toctree-l2"><a class="reference internal" href="../back-end-code/arborescence-back.html">Arborescence du <em>back-end</em></a><ul>
<li class="toctree-l3"><a class="reference internal" href="../back-end-code/arborescence-back.html#arborescence-generale-de-zds">Arborescence générale de <code class="docutils literal"><span class="pre">zds/</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../back-end-code/arborescence-back.html#contenu-d-un-module">Contenu d&#8217;un module</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../back-end-code/arborescence-back.html#fichiers-principaux">Fichiers principaux</a></li>
<li class="toctree-l4"><a class="reference internal" href="../back-end-code/arborescence-back.html#tests-unitaires">Tests unitaires</a></li>
<li class="toctree-l4"><a class="reference internal" href="../back-end-code/arborescence-back.html#gestion-de-la-base-de-donnees">Gestion de la base de données</a></li>
<li class="toctree-l4"><a class="reference internal" href="../back-end-code/arborescence-back.html#api">API</a></li>
<li class="toctree-l4"><a class="reference internal" href="../back-end-code/arborescence-back.html#autres">Autres</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../back-end-code/article.html">Les articles (<code class="docutils literal"><span class="pre">article/</span></code>)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../back-end-code/article.html#modeles-models-py">Modèles (<code class="docutils literal"><span class="pre">models.py</span></code>)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../back-end-code/article.html#vues-views-py">Vues (<code class="docutils literal"><span class="pre">views.py</span></code>)</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../back-end-code/forum.html">Les forums (<code class="docutils literal"><span class="pre">forum/</span></code>)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../back-end-code/forum.html#modeles-models-py">Modèles (<code class="docutils literal"><span class="pre">models.py</span></code>)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../back-end-code/forum.html#vues-views-py">Vues (<code class="docutils literal"><span class="pre">views.py</span></code>)</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../back-end-code/gallery.html">Les galleries (<code class="docutils literal"><span class="pre">gallery/</span></code>)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../back-end-code/gallery.html#modeles-models-py">Modèles (<code class="docutils literal"><span class="pre">models.py</span></code>)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../back-end-code/gallery.html#vues-views-py">Vues (<code class="docutils literal"><span class="pre">views.py</span></code>)</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../back-end-code/member.html">Les membres (<code class="docutils literal"><span class="pre">member/</span></code>)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../back-end-code/member.html#modeles-models-py">Modèles (<code class="docutils literal"><span class="pre">models.py</span></code>)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../back-end-code/member.html#vues-views-py">Vues (<code class="docutils literal"><span class="pre">views.py</span></code>)</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../back-end-code/pages.html">Les pages (<code class="docutils literal"><span class="pre">pages/</span></code>)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../back-end-code/pages.html#vues-views-py">Vues (<code class="docutils literal"><span class="pre">views.py</span></code>)</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../back-end-code/private-message.html">Les messages privés (<code class="docutils literal"><span class="pre">mp/</span></code>)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../back-end-code/private-message.html#modeles-models-py">Modèles (<code class="docutils literal"><span class="pre">models.py</span></code>)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../back-end-code/private-message.html#vues-views-py">Vues (<code class="docutils literal"><span class="pre">views.py</span></code>)</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../back-end-code/search.html">La recherche (<code class="docutils literal"><span class="pre">search/</span></code>)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../back-end-code/search.html#modeles-models-py">Modèles (<code class="docutils literal"><span class="pre">models.py</span></code>)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../back-end-code/search.html#vues-views-py">Vues (<code class="docutils literal"><span class="pre">views.py</span></code>)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../back-end-code/search.html#les-utilitaires-utils-py">Les utilitaires (<code class="docutils literal"><span class="pre">utils.py</span></code>)</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../back-end-code/tutorial.html">Les tutoriels (<code class="docutils literal"><span class="pre">tutorial/</span></code>)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../back-end-code/tutorial.html#modeles-models-py">Modèles (<code class="docutils literal"><span class="pre">models.py</span></code>)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../back-end-code/tutorial.html#vues-views-py">Vues (<code class="docutils literal"><span class="pre">views.py</span></code>)</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../back-end-code/tutorialv2.html">Les tutoriels v2 (ZEP12) (<code class="docutils literal"><span class="pre">tutorialv2/</span></code>)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../back-end-code/tutorialv2.html#modeles-models">Modèles (<code class="docutils literal"><span class="pre">models/</span></code>)</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../back-end-code/tutorialv2.html#modeles-de-la-base-de-donnee-models-database-py">Modèles de la base de donnée (<code class="docutils literal"><span class="pre">models_database.py</span></code>)</a></li>
<li class="toctree-l4"><a class="reference internal" href="../back-end-code/tutorialv2.html#modeles-versionnes-models-versioned-py">Modèles &#8220;versionnés&#8221; (<code class="docutils literal"><span class="pre">models_versioned.py</span></code>)</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../back-end-code/tutorialv2.html#vues-views">Vues (<code class="docutils literal"><span class="pre">views/</span></code>)</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../back-end-code/tutorialv2.html#contenus-views-views-contents-py">Contenus (<code class="docutils literal"><span class="pre">views/views_contents.py</span></code>)</a></li>
<li class="toctree-l4"><a class="reference internal" href="../back-end-code/tutorialv2.html#validations-views-views-validations-py">Validations (<code class="docutils literal"><span class="pre">views/views_validations.py</span></code>)</a></li>
<li class="toctree-l4"><a class="reference internal" href="../back-end-code/tutorialv2.html#contenus-publies-views-views-published-py">Contenus publiés (<code class="docutils literal"><span class="pre">views/views_published.py</span></code>)</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../back-end-code/tutorialv2.html#mixins-mixins-py">Mixins (<code class="docutils literal"><span class="pre">mixins.py</span></code>)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../back-end-code/tutorialv2.html#les-forumulaires-forms-py">Les forumulaires (<code class="docutils literal"><span class="pre">forms.py</span></code>)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../back-end-code/tutorialv2.html#les-utilitaires-utils-py">Les utilitaires (<code class="docutils literal"><span class="pre">utils.py</span></code>)</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../back-end-code/utils.html">Les utilitaires (<code class="docutils literal"><span class="pre">utils/</span></code>)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../back-end-code/utils.html#modeles-models-py">Modèles (<code class="docutils literal"><span class="pre">models.py</span></code>)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../back-end-code/utils.html#articles-articles-py">Articles (<code class="docutils literal"><span class="pre">articles.py</span></code>)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../back-end-code/utils.html#forums-forums-py">Forums (<code class="docutils literal"><span class="pre">forums.py</span></code>)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../back-end-code/utils.html#messages-prives-mps-py">Messages privés (<code class="docutils literal"><span class="pre">mps.py</span></code>)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../back-end-code/utils.html#tutoriels-tutorials-py">Tutoriels (<code class="docutils literal"><span class="pre">tutorials.py</span></code>)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../back-end-code/utils.html#les-processeurs-de-contexte-context-processor-py">Les processeurs de contexte (<code class="docutils literal"><span class="pre">context_processor.py</span></code>)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../back-end-code/utils.html#autres-misc-py">Autres (<code class="docutils literal"><span class="pre">misc.py</span></code>)</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../api.html">API</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../api.html#informations-generales">Informations générales</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../api.html#version-courante">Version courante</a></li>
<li class="toctree-l3"><a class="reference internal" href="../api.html#schema">Schéma</a></li>
<li class="toctree-l3"><a class="reference internal" href="../api.html#les-verbes-http">Les verbes HTTP</a></li>
<li class="toctree-l3"><a class="reference internal" href="../api.html#les-formats-d-entrees-sorties">Les formats d&#8217;entrées/sorties</a></li>
<li class="toctree-l3"><a class="reference internal" href="../api.html#cache">Cache</a></li>
<li class="toctree-l3"><a class="reference internal" href="../api.html#etag">ETag</a></li>
<li class="toctree-l3"><a class="reference internal" href="../api.html#throttling">Throttling</a></li>
<li class="toctree-l3"><a class="reference internal" href="../api.html#pagination">Pagination</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../api.html#authentification">Authentification</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../api.html#bibliotheque-tierce-choisie">Bibliothèque tierce choisie</a></li>
<li class="toctree-l3"><a class="reference internal" href="../api.html#utilisation">Utilisation</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../api.html#creer-un-client">Créer un client</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api.html#recuperer-les-tokens-d-authentification">Récupérer les tokens d&#8217;authentification</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api.html#utiliser-un-access-token">Utiliser un access_token</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api.html#utiliser-un-refresh-token">Utiliser un refresh_token</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../api.html#django-rest-swagger">Django REST Swagger</a></li>
</ul>
</li>
</ul>

          
        
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../index.html">Zds Member</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../index.html">Docs</a> &raquo;</li>
      
          <li><a href="../install.html">Installation</a> &raquo;</li>
      
    <li>Configuration des serveurs de production</li>
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="../_sources/install/deploy-in-production.txt" rel="nofollow"> View page source</a>
          
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document">
            
  <div class="section" id="configuration-des-serveurs-de-production">
<h1>Configuration des serveurs de production<a class="headerlink" href="#configuration-des-serveurs-de-production" title="Permalink to this headline">¶</a></h1>
<p>Zeste de Savoir est installé en 1 tiers (sur un seul serveur donc).</p>
<div class="section" id="parametres">
<h2>Paramètres<a class="headerlink" href="#parametres" title="Permalink to this headline">¶</a></h2>
<div class="section" id="parametres-generaux">
<h3>Paramètres généraux<a class="headerlink" href="#parametres-generaux" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<colgroup>
<col width="46%" />
<col width="54%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Paramètre</th>
<th class="head">Valeur</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>OS</td>
<td>Linux, Debian 8 &#8220;Jessie&#8221;</td>
</tr>
<tr class="row-odd"><td>Serveurs web</td>
<td>Nginx</td>
</tr>
<tr class="row-even"><td>Moteur WSGI</td>
<td>Gunicorn</td>
</tr>
<tr class="row-odd"><td>SGBD</td>
<td>MySQL</td>
</tr>
<tr class="row-even"><td>Contrôle des process</td>
<td>systemd</td>
</tr>
<tr class="row-odd"><td>Surveillance</td>
<td>Munin</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="parametres-specifiques">
<h3>Paramètres spécifiques<a class="headerlink" href="#parametres-specifiques" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<colgroup>
<col width="22%" />
<col width="39%" />
<col width="39%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">&nbsp;</th>
<th class="head">Préproduction</th>
<th class="head">Production</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>Nom</td>
<td>beta.zestedesavoir.com</td>
<td>zestedesavoir.com</td>
</tr>
<tr class="row-odd"><td>IPv4</td>
<td><code class="docutils literal"><span class="pre">46.105.246.77</span></code></td>
<td><code class="docutils literal"><span class="pre">149.202.54.142</span></code></td>
</tr>
<tr class="row-even"><td>IPv6</td>
<td>x</td>
<td>Pas encore disponible…</td>
</tr>
<tr class="row-odd"><td>Identifiant</td>
<td><em>Demande privée</em></td>
<td><em>Demande privée</em></td>
</tr>
<tr class="row-even"><td>Mot de passe</td>
<td><em>Demande privée</em></td>
<td><em>Demande privée</em></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="section" id="premier-deploiement">
<h2>Premier déploiement<a class="headerlink" href="#premier-deploiement" title="Permalink to this headline">¶</a></h2>
<p>Toute la procédure suppose un déploiement dans <code class="docutils literal"><span class="pre">/opt/zdsenv</span></code>.</p>
<div class="section" id="utilisateur-local">
<h3>Utilisateur local<a class="headerlink" href="#utilisateur-local" title="Permalink to this headline">¶</a></h3>
<p>Zeste de Savoir tourne sous l&#8217;utilisateur <strong>zds</strong> et le groupe <strong>root</strong>.</p>
</div>
<div class="section" id="installation-des-outils">
<h3>Installation des outils<a class="headerlink" href="#installation-des-outils" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>python,</li>
<li>virtualenv (dans /opt/zdsenv/),</li>
<li>git</li>
</ul>
</div>
<div class="section" id="clone-du-repo-et-configuration-de-prod">
<h3>Clone du repo et configuration de prod<a class="headerlink" href="#clone-du-repo-et-configuration-de-prod" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">git</span> <span class="pre">clone</span> <span class="pre">https://github.com/zestedesavoir/zds-site.git</span></code></li>
<li><code class="docutils literal"><span class="pre">mkdir</span> <span class="pre">tutoriels-private</span></code></li>
<li><code class="docutils literal"><span class="pre">mkdir</span> <span class="pre">tutoriels-public</span></code></li>
<li><code class="docutils literal"><span class="pre">mkdir</span> <span class="pre">articles-data</span></code></li>
<li><code class="docutils literal"><span class="pre">vim</span> <span class="pre">zds/settings_prod.py</span></code></li>
</ul>
<p>On édite le fichier de manière à rajouter les infos spécifiques au serveur courant. Par exemple :</p>
<div class="code python highlight-python"><div class="highlight"><pre><span class="n">DEBUG</span> <span class="o">=</span> <span class="bp">False</span>

<span class="n">DATABASES</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s">&#39;default&#39;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s">&#39;ENGINE&#39;</span><span class="p">:</span> <span class="s">&#39;django.db.backends.mysql&#39;</span><span class="p">,</span>
        <span class="s">&#39;NAME&#39;</span><span class="p">:</span> <span class="s">&#39;zdsdb&#39;</span><span class="p">,</span>
        <span class="s">&#39;USER&#39;</span><span class="p">:</span> <span class="s">&#39;zds&#39;</span><span class="p">,</span>
        <span class="s">&#39;PASSWORD&#39;</span><span class="p">:</span> <span class="s">&#39;mot_de_passe&#39;</span><span class="p">,</span>
        <span class="s">&#39;HOST&#39;</span><span class="p">:</span> <span class="s">&#39;localhost&#39;</span><span class="p">,</span>
        <span class="s">&#39;PORT&#39;</span><span class="p">:</span> <span class="s">&#39;&#39;</span><span class="p">,</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="n">EMAIL_HOST</span> <span class="o">=</span> <span class="s">&#39;mail.geoffreycreation.com&#39;</span>
<span class="n">EMAIL_HOST_USER</span> <span class="o">=</span> <span class="s">&#39;zds@geoffreycreation.com&#39;</span>
<span class="n">EMAIL_HOST_PASSWORD</span> <span class="o">=</span> <span class="s">&#39;mot_de_passe&#39;</span>
<span class="n">EMAIL_PORT</span> <span class="o">=</span> <span class="mi">25</span>
</pre></div>
</div>
</div>
<div class="section" id="installation-de-l-application-de-base">
<h3>Installation de l&#8217;application de base<a class="headerlink" href="#installation-de-l-application-de-base" title="Permalink to this headline">¶</a></h3>
<p>Suivre <a class="reference external" href="backend-linux-install.html">l&#8217;installation complète sous Linux</a> en tenant compte des subtilités suivantes :</p>
<ul class="simple">
<li>Installer <a class="reference external" href="frontend-install.md">les outils front</a></li>
<li>Ne pas lancer le serveur à la fin de l&#8217;étape <em>&#8220;Lancer ZdS&#8221;</em></li>
<li>Installer toutes les dépendances requises à l&#8217;étape <em>&#8220;Aller plus loin&#8221;</em></li>
</ul>
</div>
<div class="section" id="outils-specifiques-a-un-serveur-de-run">
<h3>Outils spécifiques à un serveur de run<a class="headerlink" href="#outils-specifiques-a-un-serveur-de-run" title="Permalink to this headline">¶</a></h3>
<div class="section" id="gunicorn">
<h4>Gunicorn<a class="headerlink" href="#gunicorn" title="Permalink to this headline">¶</a></h4>
<p>Installer Gunicorn dans le virtualenv.</p>
<p>Dans <code class="docutils literal"><span class="pre">/opt/zdsenv/gunicorn_config.py</span></code> :</p>
<div class="code python highlight-python"><div class="highlight"><pre><span class="n">command</span> <span class="o">=</span> <span class="s">&#39;/opt/zdsenv/bin/gunicorn&#39;</span>
<span class="n">pythonpath</span> <span class="o">=</span> <span class="s">&#39;/opt/zdsenv/ZesteDeSavoir&#39;</span>
<span class="n">bind</span> <span class="o">=</span> <span class="s">&#39;unix:/opt/zdsenv/bin/gunicorn.sock&#39;</span>
<span class="n">workers</span> <span class="o">=</span> <span class="mi">7</span>
<span class="n">user</span> <span class="o">=</span> <span class="s">&#39;zds&#39;</span>
<span class="n">group</span> <span class="o">=</span> <span class="s">&#39;zds&#39;</span>
<span class="n">errorlog</span> <span class="o">=</span> <span class="s">&#39;/opt/zdsenv/logs/gunicorn_error.log&#39;</span>
<span class="n">loglevel</span> <span class="o">=</span> <span class="s">&#39;info&#39;</span>
<span class="n">pid</span> <span class="o">=</span> <span class="s">&#39;/opt/zdsenv/gunicorn.pid&#39;</span>
</pre></div>
</div>
</div>
<div class="section" id="nginx">
<h4>Nginx<a class="headerlink" href="#nginx" title="Permalink to this headline">¶</a></h4>
<p>Installer nginx. Sous Debian, la configuration est splittée par site. Pour Zeste de Savoir, elle se fait dans <code class="docutils literal"><span class="pre">/etc/nginx/sites-available/zestedesavoir</span></code> :</p>
<div class="code text highlight-python"><div class="highlight"><pre>upstream zdsappserver {
     server unix:/opt/zdsenv/bin/gunicorn.sock fail_timeout=0;
}
server {
    listen [::]:80;
    listen [::]:443;
    listen 80;
    listen 443 ssl;
    ssl_certificate /etc/ssl/certs/zds/ssl_2015_unified.crt;
    ssl_certificate_key /etc/ssl/certs/zds/ssl_2015.key;
#    ssl_certificate /etc/ssl/certs/zds/selfgenerated.pem;
#    ssl_certificate_key /etc/ssl/certs/zds/selfgenerated.key;
    ssl_session_timeout 1d;
    ssl_protocols TLSv1 TLSv1.1 TLSv1.2;
    ssl_ciphers &#39;ECDHE-RSA-AES128-GCM-SHA256:ECDHE-ECDSA-AES128-GCM-SHA256:ECDHE-RSA-AES256-GCM-SHA384:ECDHE-ECDSA-AES256-GCM-SHA384:DHE-RSA-AES128-GCM-SHA256:DHE-DSS-AES128-GCM-SHA256:kEDH+AESGCM:ECDHE-RSA-AES128-SHA256:ECDHE-ECDSA-AES128-SHA256:ECDHE-RSA-AES128-SHA:ECDHE-ECDSA-AES128-SHA:ECDHE-RSA-AES256-SHA384:ECDHE-ECDSA-AES256-SHA384:ECDHE-RSA-AES256-SHA:ECDHE-ECDSA-AES256-SHA:DHE-RSA-AES128-SHA256:DHE-RSA-AES128-SHA:DHE-DSS-AES128-SHA256:DHE-RSA-AES256-SHA256:DHE-DSS-AES256-SHA:DHE-RSA-AES256-SHA:!aNULL:!eNULL:!EXPORT:!DES:!RC4:!3DES:!MD5:!PSK&#39;;
    ssl_prefer_server_ciphers on;
    ssl_session_cache shared:SSL:50m;
    ssl_dhparam /etc/nginx/dhparam.pem;

    server_name www.zestedesavoir.com;
    rewrite ^(.*) $scheme://zestedesavoir.com$1 permanent;
}
server {
    listen [::]:80 ipv6only=on;
    listen [::]:443 ssl ipv6only=on;
    listen 80;
    listen 443 ssl;
    ssl_certificate /etc/ssl/certs/zds/ssl_2015_unified.crt;
    ssl_certificate_key /etc/ssl/certs/zds/ssl_2015.key;
#    ssl_certificate /etc/ssl/certs/zds/selfgenerated.pem;
#    ssl_certificate_key /etc/ssl/certs/zds/selfgenerated.key;
    ssl_session_timeout 1d;
    ssl_protocols TLSv1 TLSv1.1 TLSv1.2;
    ssl_ciphers &#39;ECDHE-RSA-AES128-GCM-SHA256:ECDHE-ECDSA-AES128-GCM-SHA256:ECDHE-RSA-AES256-GCM-SHA384:ECDHE-ECDSA-AES256-GCM-SHA384:DHE-RSA-AES128-GCM-SHA256:DHE-DSS-AES128-GCM-SHA256:kEDH+AESGCM:ECDHE-RSA-AES128-SHA256:ECDHE-ECDSA-AES128-SHA256:ECDHE-RSA-AES128-SHA:ECDHE-ECDSA-AES128-SHA:ECDHE-RSA-AES256-SHA384:ECDHE-ECDSA-AES256-SHA384:ECDHE-RSA-AES256-SHA:ECDHE-ECDSA-AES256-SHA:DHE-RSA-AES128-SHA256:DHE-RSA-AES128-SHA:DHE-DSS-AES128-SHA256:DHE-RSA-AES256-SHA256:DHE-DSS-AES256-SHA:DHE-RSA-AES256-SHA:!aNULL:!eNULL:!EXPORT:!DES:!RC4:!3DES:!MD5:!PSK&#39;;
    ssl_prefer_server_ciphers on;
    ssl_session_cache shared:SSL:50m;
    ssl_dhparam /etc/nginx/dhparam.pem;

    server_name zestedesavoir.com;
    gzip_types text/plain text/css application/json application/x-javascript text/xml application/xml application/xml+rss text/javascript;
    server_tokens off;
    access_log /opt/zdsenv/logs/nginx-access.log;
    error_log /opt/zdsenv/logs/nginx-error.log;

    location /author-files/ {
        index index.html index.php;
        alias /home/zds/tutos_sdzv3/script/;
        #include php.fast.conf;
    }

    location = /robots.txt {
        alias /opt/zdsenv/ZesteDeSavoir/robots.txt;
    }
    # Gandi
    location = /D6BA7D30872A8A72ED225D5601248024.txt {
        alias /opt/zdsenv/ZesteDeSavoir/D6BA7D30872A8A72ED225D5601248024.txt;
    }

    location /static/ {
        alias /opt/zdsenv/ZesteDeSavoir/static/;
        expires 1y;
        add_header Pragma public;
        add_header Cache-Control &quot;public, must-revalidate, proxy-revalidate&quot;;
    }

    location /media/ {
        alias /opt/zdsenv/ZesteDeSavoir/media/;
        expires 1y;
        add_header Pragma public;
        add_header Cache-Control &quot;public, must-revalidate, proxy-revalidate&quot;;
    }

    location / {
            if ($uri !~ \. ){
                rewrite ^(.*[^/])$ $1/ permanent;
            }
            rewrite ^/teasing/$ / permanent;
            client_max_body_size 100M;
            sendfile        on;
            keepalive_timeout  0;
            proxy_read_timeout 1000s;
            proxy_connect_timeout 1000s;
            proxy_redirect     off;
            proxy_set_header   Host              $host;
            proxy_set_header   X-Real-IP         $remote_addr;
            proxy_set_header   X-Forwarded-For   $proxy_add_x_forwarded_for;
            proxy_set_header   X-Forwarded-Proto $scheme;

            add_header P3P &#39;CP=&quot;ALL DSP COR PSAa PSDa OUR NOR ONL UNI COM NAV&quot;&#39;;
            add_header Strict-Transport-Security max-age=15768000;
            add_header Access-Control-Allow-Origin *;
            add_header X-Clacks-Overhead &quot;GNU Terry Pratchett&quot;;

            if (!-f $request_filename) {
                proxy_pass http://zdsappserver;
                break;
            }

      }
    # Error pages
    error_page 500 502 503 504 /errors/500.html;
    #location = /500.html {
    #    root /opt/zdsenv/ZesteDeSavoir/templates/;
    #}
    location /errors/ {
        alias /opt/zdsenv/ZesteDeSavoir/errors/;
    }


    # Conf anti-exploit, source : https://www.howtoforge.com/nginx-how-to-block-exploits-sql-injections-file-injections-spam-user-agents-etc
    ## Block SQL injections
    set $block_sql_injections 0;
    if ($query_string ~ &quot;union.*select.*\(&quot;) {
        set $block_sql_injections 1;
    }
    if ($query_string ~ &quot;union.*all.*select.*&quot;) {
        set $block_sql_injections 1;
    }
    if ($query_string ~ &quot;concat.*\(&quot;) {
        set $block_sql_injections 1;
    }
    if ($block_sql_injections = 1) {
        return 403;
    }

    ## Block file injections
    set $block_file_injections 0;
    if ($query_string ~ &quot;[a-zA-Z0-9_]=http://&quot;) {
        set $block_file_injections 1;
    }
    if ($query_string ~ &quot;[a-zA-Z0-9_]=(\.\.//?)+&quot;) {
        set $block_file_injections 1;
    }
    if ($query_string ~ &quot;[a-zA-Z0-9_]=/([a-z0-9_.]//?)+&quot;) {
        set $block_file_injections 1;
    }
    if ($block_file_injections = 1) {
        return 403;
    }

    ## Block common exploits
    set $block_common_exploits 0;
    if ($query_string ~ &quot;(&lt;|%3C).*script.*(&gt;|%3E)&quot;) {
        set $block_common_exploits 1;
    }
    if ($query_string ~ &quot;GLOBALS(=|\[|\%[0-9A-Z]{0,2})&quot;) {
        set $block_common_exploits 1;
    }
    if ($query_string ~ &quot;_REQUEST(=|\[|\%[0-9A-Z]{0,2})&quot;) {
        set $block_common_exploits 1;
    }
    if ($query_string ~ &quot;proc/self/environ&quot;) {
        set $block_common_exploits 1;
    }
    if ($query_string ~ &quot;mosConfig_[a-zA-Z_]{1,21}(=|\%3D)&quot;) {
        set $block_common_exploits 1;
    }
    if ($query_string ~ &quot;base64_(en|de)code\(.*\)&quot;) {
        set $block_common_exploits 1;
    }
    if ($block_common_exploits = 1) {
        return 403;
    }

    ## Block spam
    set $block_spam 0;
    if ($query_string ~ &quot;\b(ultram|unicauca|valium|viagra|vicodin|xanax|ypxaieo)\b&quot;) {
        set $block_spam 1;
    }
    if ($query_string ~ &quot;\b(erections|hoodia|huronriveracres|impotence|levitra|libido)\b&quot;) {
        set $block_spam 1;
    }
    if ($query_string ~ &quot;\b(ambien|blue\spill|cialis|cocaine|ejaculation|erectile)\b&quot;) {
        set $block_spam 1;
    }
    if ($query_string ~ &quot;\b(lipitor|phentermin|pro[sz]ac|sandyauer|tramadol|troyhamby)\b&quot;) {
        set $block_spam 1;
    }
    if ($block_spam = 1) {
        return 403;
    }

    ## Block user agents
    set $block_user_agents 0;

    # Don&#39;t disable wget if you need it to run cron jobs!
    #if ($http_user_agent ~ &quot;Wget&quot;) {
    #    set $block_user_agents 1;
    #}

    # Disable Akeeba Remote Control 2.5 and earlier
    if ($http_user_agent ~ &quot;Indy Library&quot;) {
        set $block_user_agents 1;
    }

    # Common bandwidth hoggers and hacking tools.
    if ($http_user_agent ~ &quot;libwww-perl&quot;) {
        set $block_user_agents 1;
    }
    if ($http_user_agent ~ &quot;GetRight&quot;) {
        set $block_user_agents 1;
    }
    if ($http_user_agent ~ &quot;GetWeb!&quot;) {
        set $block_user_agents 1;
    }
    if ($http_user_agent ~ &quot;Go!Zilla&quot;) {
        set $block_user_agents 1;
    }
    if ($http_user_agent ~ &quot;Download Demon&quot;) {
        set $block_user_agents 1;
    }
    if ($http_user_agent ~ &quot;Go-Ahead-Got-It&quot;) {
        set $block_user_agents 1;
    }
    if ($http_user_agent ~ &quot;TurnitinBot&quot;) {
        set $block_user_agents 1;
    }
    if ($http_user_agent ~ &quot;GrabNet&quot;) {
        set $block_user_agents 1;
    }
    # SpaceFox: adds HTTrack
    if ($http_user_agent ~ &quot;HTTrack&quot;) {
        set $block_user_agents 1;
    }


    if ($block_user_agents = 1) {
        return 403;
    }

}

server{
    server_name uploads.zestedesavoir.com;
    root /home/zds/tutos_sdzv3/images_distantes;
    index index.html index.htm;
}
</pre></div>
</div>
<p>La configuration de la page de maintenance, quant à elle, se fait dans <code class="docutils literal"><span class="pre">/etc/nginx/sites-available/zds-maintenance</span></code> :</p>
<div class="code text highlight-python"><div class="highlight"><pre>server {
    listen [::]:80 ipv6only=on;
    listen [::]:443 ssl ipv6only=on;
    listen 80;
    listen 443 ssl;
    ssl_certificate /etc/ssl/certs/zds/ssl_2015_unified.crt;
    ssl_certificate_key /etc/ssl/certs/zds/ssl_2015.key;
    ssl_protocols TLSv1 TLSv1.1 TLSv1.2;
    ssl_ciphers HIGH:!aNULL:!MD5;

        server_name zestedesavoir.com www.zestedesavoir.com;
        gzip_types text/plain text/css application/json application/x-javascript text/xml application/xml application/xml+rss text/javascript;
        access_log off;
        access_log /opt/zdsenv/logs/nginx-access.log;
        error_log /opt/zdsenv/logs/nginx-error.log;
        root /opt/zdsenv/ZesteDeSavoir;

        location /errors/css {
        }

        location /errors/images {
        }

        location / {
                return 503;
        }

        error_page 503 @maintenance;
        location @maintenance  {
                rewrite ^.*$ /errors/maintenance.html break;
        }
}
</pre></div>
</div>
</div>
<div class="section" id="solr">
<h4>Solr<a class="headerlink" href="#solr" title="Permalink to this headline">¶</a></h4>
<p><cite>Voir la documentation de Solr &lt;install-solr.html&gt;</cite>.</p>
</div>
<div class="section" id="supervisor">
<h4>Supervisor<a class="headerlink" href="#supervisor" title="Permalink to this headline">¶</a></h4>
<p>Installer supervisor.</p>
<p>Créer deux configurations :</p>
<div class="section" id="configuration-zds">
<h5>Configuration ZdS<a class="headerlink" href="#configuration-zds" title="Permalink to this headline">¶</a></h5>
<p>Les confs dans <code class="docutils literal"><span class="pre">/etc/systemd/system/zds.service</span></code> et <code class="docutils literal"><span class="pre">/etc/systemd/system/zds.socket</span></code> permet de lancer le serveur applicatif de Zeste de Savoir (Gunicorn) à l&#8217;aide de <code class="docutils literal"><span class="pre">systemctl</span> <span class="pre">start</span> <span class="pre">zds.{service,socket}</span></code> et l&#8217;arrêter avec <code class="docutils literal"><span class="pre">systemctl</span> <span class="pre">stop</span> <span class="pre">zds.{service,socket}</span></code>.</p>
<div class="code text highlight-python"><div class="highlight"><pre>[Unit]
Description=Zeste de Savoir
Requires=zds.socket
After=network.target

[Service]
PIDFile=/run/gunicorn/pid
User=zds
Group=zds
WorkingDirectory=/opt/zdsenv
# ExecStart=/opt/zdsenv/bin/gunicorn --pid /run/gunicorn/pid -c /opt/zdsenv/gunicorn_config.py zds.wsgi
ExecStart=/opt/zdsenv/bin/gunicorn -c /opt/zdsenv/gunicorn_config.py zds.wsgi
ExecReload=/bin/kill -s HUP $MAINPID
ExecStop=/bin/kill -s TERM $MAINPID
PrivateTmp=true

[Install]
WantedBy=multi-user.target
</pre></div>
</div>
<div class="code text highlight-python"><div class="highlight"><pre>[Unit]
Description=ZdS Gunicorn socket

[Socket]
#ListenStream=/run/gunicorn/socket
ListenStream=/opt/zdsenv/bin/gunicorn.sock
ListenStream=0.0.0.0:9000
ListenStream=[::]:8000

[Install]
WantedBy=sockets.target
</pre></div>
</div>
</div>
<div class="section" id="configuration-solr">
<h5>Configuration Solr<a class="headerlink" href="#configuration-solr" title="Permalink to this headline">¶</a></h5>
<p>La conf dans <code class="docutils literal"><span class="pre">/etc/systemd/system/solr.service</span></code> permet de lancer Solr à l&#8217;aide de <code class="docutils literal"><span class="pre">systemctl</span> <span class="pre">start</span> <span class="pre">solr</span></code> et l&#8217;arrêter avec <code class="docutils literal"><span class="pre">systemctl</span> <span class="pre">stop</span> <span class="pre">solr</span></code>.</p>
<div class="code text highlight-python"><div class="highlight"><pre>[Unit]
Description=SolR ZdS
After=syslog.target network.target remote-fs.target nss-lookup.target

[Service]
PIDFile=/run/solrzds/pid
WorkingDirectory=/opt/zdsenv/apache-solr/example/
ExecStart=/usr/bin/java -jar start.jar
User=zds
Group=zds
ExecReload=/bin/kill -s HUP $MAINPID
ExecStop=/bin/kill -s QUIT $MAINPID
PrivateTmp=true

[Install]
WantedBy=multi-user.target
</pre></div>
</div>
</div>
</div>
<div class="section" id="munin">
<h4>Munin<a class="headerlink" href="#munin" title="Permalink to this headline">¶</a></h4>
<div class="section" id="configuration-generale">
<h5>Configuration générale<a class="headerlink" href="#configuration-generale" title="Permalink to this headline">¶</a></h5>
<p>Installer le noeud Munin : <code class="docutils literal"><span class="pre">apt-get</span> <span class="pre">install</span> <span class="pre">munin-node</span></code>.</p>
<p>On obtient les suggestions de plugins à installer avec <code class="docutils literal"><span class="pre">munin-node-configure</span> <span class="pre">--suggest</span></code> et les commandes à lancer pour les activer via <code class="docutils literal"><span class="pre">munin-node-configure</span> <span class="pre">--shell</span></code>.</p>
<p>Pour l&#8217;instant le serveur de graphe est fourni par SpaceFox et <a class="reference external" href="http://munin.kisai.info">est visible ici</a>. Seul SpaceFox peut mettre à jour cette configuration. Le serveur de graphe accède au serveur en SSH avec cette clé publique :</p>
<div class="code text highlight-python"><div class="highlight"><pre>ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQDBsfYaz5d4wtyTM0Xx1TjpJt0LuZ2Il9JZD2+s4hNQToNBaqT3aafG1SuHuQkqjvIQrI28NEkjALQIp4zD7BOeeW9QlAwE7uiebi3FcwLfaPFwq5qvnpyOSmbktCjHX24a14ozgDPY5diPkOsyMdEYz/KTybSvFvgUjzUSCLBQ2EWj0CBktY6cFC45pvVCsdd/ToDsEVbhixyNmlOMc+FB/oT8CC6ZoDezSXQGaO51/zLS8l4ieBIcB4tK3JdJI+fFv5FJsfgMK+DbNV4pikw9qEZJlASQCU69L+YR7MxTXNCqRyQ1Z4qxH4ZdPELmNOoMB8dHxxBX7TGP+Hvpm3AH munin@Yog-Sothoth
</pre></div>
</div>
</div>
<div class="section" id="configuration-specifique-a-zds">
<h5>Configuration spécifique à ZdS<a class="headerlink" href="#configuration-specifique-a-zds" title="Permalink to this headline">¶</a></h5>
<p>Créer les liens vers le plugin Django-Munin :</p>
<div class="code bash highlight-python"><div class="highlight"><pre><span class="n">ln</span> <span class="o">-</span><span class="n">s</span> <span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="n">share</span><span class="o">/</span><span class="n">munin</span><span class="o">/</span><span class="n">plugins</span><span class="o">/</span><span class="n">django</span><span class="o">.</span><span class="n">py</span> <span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">munin</span><span class="o">/</span><span class="n">plugins</span><span class="o">/</span><span class="n">zds_active_sessions</span>
<span class="n">ln</span> <span class="o">-</span><span class="n">s</span> <span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="n">share</span><span class="o">/</span><span class="n">munin</span><span class="o">/</span><span class="n">plugins</span><span class="o">/</span><span class="n">django</span><span class="o">.</span><span class="n">py</span> <span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">munin</span><span class="o">/</span><span class="n">plugins</span><span class="o">/</span><span class="n">zds_active_users</span>
<span class="n">ln</span> <span class="o">-</span><span class="n">s</span> <span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="n">share</span><span class="o">/</span><span class="n">munin</span><span class="o">/</span><span class="n">plugins</span><span class="o">/</span><span class="n">django</span><span class="o">.</span><span class="n">py</span> <span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">munin</span><span class="o">/</span><span class="n">plugins</span><span class="o">/</span><span class="n">zds_db_performance</span>
<span class="n">ln</span> <span class="o">-</span><span class="n">s</span> <span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="n">share</span><span class="o">/</span><span class="n">munin</span><span class="o">/</span><span class="n">plugins</span><span class="o">/</span><span class="n">django</span><span class="o">.</span><span class="n">py</span> <span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">munin</span><span class="o">/</span><span class="n">plugins</span><span class="o">/</span><span class="n">zds_total_articles</span>
<span class="n">ln</span> <span class="o">-</span><span class="n">s</span> <span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="n">share</span><span class="o">/</span><span class="n">munin</span><span class="o">/</span><span class="n">plugins</span><span class="o">/</span><span class="n">django</span><span class="o">.</span><span class="n">py</span> <span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">munin</span><span class="o">/</span><span class="n">plugins</span><span class="o">/</span><span class="n">zds_total_mps</span>
<span class="n">ln</span> <span class="o">-</span><span class="n">s</span> <span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="n">share</span><span class="o">/</span><span class="n">munin</span><span class="o">/</span><span class="n">plugins</span><span class="o">/</span><span class="n">django</span><span class="o">.</span><span class="n">py</span> <span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">munin</span><span class="o">/</span><span class="n">plugins</span><span class="o">/</span><span class="n">zds_total_posts</span>
<span class="n">ln</span> <span class="o">-</span><span class="n">s</span> <span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="n">share</span><span class="o">/</span><span class="n">munin</span><span class="o">/</span><span class="n">plugins</span><span class="o">/</span><span class="n">django</span><span class="o">.</span><span class="n">py</span> <span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">munin</span><span class="o">/</span><span class="n">plugins</span><span class="o">/</span><span class="n">zds_total_sessions</span>
<span class="n">ln</span> <span class="o">-</span><span class="n">s</span> <span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="n">share</span><span class="o">/</span><span class="n">munin</span><span class="o">/</span><span class="n">plugins</span><span class="o">/</span><span class="n">django</span><span class="o">.</span><span class="n">py</span> <span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">munin</span><span class="o">/</span><span class="n">plugins</span><span class="o">/</span><span class="n">zds_total_topics</span>
<span class="n">ln</span> <span class="o">-</span><span class="n">s</span> <span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="n">share</span><span class="o">/</span><span class="n">munin</span><span class="o">/</span><span class="n">plugins</span><span class="o">/</span><span class="n">django</span><span class="o">.</span><span class="n">py</span> <span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">munin</span><span class="o">/</span><span class="n">plugins</span><span class="o">/</span><span class="n">zds_total_tutorials</span>
<span class="n">ln</span> <span class="o">-</span><span class="n">s</span> <span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="n">share</span><span class="o">/</span><span class="n">munin</span><span class="o">/</span><span class="n">plugins</span><span class="o">/</span><span class="n">django</span><span class="o">.</span><span class="n">py</span> <span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">munin</span><span class="o">/</span><span class="n">plugins</span><span class="o">/</span><span class="n">zds_total_users</span>
</pre></div>
</div>
<p>Ajouter les métriques suivantes au fichier <code class="docutils literal"><span class="pre">/etc/munin/plugin-conf.d/munin-node</span></code> :</p>
<div class="code text highlight-python"><div class="highlight"><pre>[zds_db_performance]
env.url http://zestedesavoir.com/munin/db_performance/
env.graph_category zds

[zds_total_users]
env.url http://zestedesavoir.com/munin/total_users/
env.graph_category zds

[zds_active_users]
env.url http://zestedesavoir.com/munin/active_users/
env.graph_category zds

[zds_total_sessions]
env.url http://zestedesavoir.com/munin/total_sessions/
env.graph_category zds

[zds_active_sessions]
env.url http://zestedesavoir.com/munin/active_sessions/
env.graph_category zds

[zds_total_topics]
env.url http://www.zestedesavoir.com/munin/total_topics/
env.graph_category zds

[zds_total_posts]
env.url http://www.zestedesavoir.com/munin/total_posts/
env.graph_category zds

[zds_total_mps]
env.url http://www.zestedesavoir.com/munin/total_mps/
env.graph_category zds

[zds_total_tutorials]
env.url http://www.zestedesavoir.com/munin/total_tutorials/
env.graph_category zds

[zds_total_articles]
env.url http://www.zestedesavoir.com/munin/total_articles/
env.graph_category zds
</pre></div>
</div>
</div>
</div>
</div>
</div>
<div class="section" id="mise-a-jour-d-une-instance-existante">
<h2>Mise à jour d&#8217;une instance existante<a class="headerlink" href="#mise-a-jour-d-une-instance-existante" title="Permalink to this headline">¶</a></h2>
<p><cite>Allez jeter un coup d&#8217;oeil à notre script de déploiement &lt;https://github.com/zestedesavoir/zds-site/blob/dev/scripts/update_and_deploy.sh&gt;</cite> ! ;) (lequel appelle <cite>le véritable script de déploiement &lt;https://github.com/zestedesavoir/zds-site/blob/dev/scripts/deploy.sh&gt;</cite>).</p>
</div>
<div class="section" id="personnalisation-d-une-instance">
<h2>Personnalisation d&#8217;une instance<a class="headerlink" href="#personnalisation-d-une-instance" title="Permalink to this headline">¶</a></h2>
<p>Il est possible de personnaliser ZdS pour n&#8217;importe quel site communautaire de partage. Un ensemble de paramètres est disponible dans le fichier <code class="docutils literal"><span class="pre">settings.py</span></code> via un dictionnaire. Vous pourrez donc écraser ces variables par défaut dans votre fichier <code class="docutils literal"><span class="pre">settings_prod.py</span></code>. Le dictionnaire de variables relatives au site est donc le suivant :</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">ZDS_APP</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s">&#39;site&#39;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s">&#39;name&#39;</span><span class="p">:</span> <span class="s">u&quot;ZesteDeSavoir&quot;</span><span class="p">,</span>
        <span class="s">&#39;litteral_name&#39;</span><span class="p">:</span> <span class="s">u&quot;Zeste de Savoir&quot;</span><span class="p">,</span>
        <span class="s">&#39;slogan&#39;</span><span class="p">:</span> <span class="s">u&quot;Zeste de Savoir, la connaissance pour tous et sans pépins&quot;</span><span class="p">,</span>
        <span class="s">&#39;abbr&#39;</span><span class="p">:</span> <span class="s">u&quot;zds&quot;</span><span class="p">,</span>
        <span class="s">&#39;url&#39;</span><span class="p">:</span> <span class="s">u&quot;http://127.0.0.1:8000&quot;</span><span class="p">,</span>
        <span class="s">&#39;dns&#39;</span><span class="p">:</span> <span class="s">u&quot;zestedesavoir.com&quot;</span><span class="p">,</span>
        <span class="s">&#39;email_contact&#39;</span><span class="p">:</span> <span class="s">u&quot;communication@zestedesavoir.com&quot;</span><span class="p">,</span>
        <span class="s">&#39;email_noreply&#39;</span><span class="p">:</span> <span class="s">u&quot;noreply@zestedesavoir.com&quot;</span><span class="p">,</span>
        <span class="s">&#39;repository&#39;</span><span class="p">:</span> <span class="s">u&quot;https://github.com/zestedesavoir/zds-site&quot;</span><span class="p">,</span>
        <span class="s">&#39;bugtracker&#39;</span><span class="p">:</span> <span class="s">u&quot;https://github.com/zestedesavoir/zds-site/issues&quot;</span><span class="p">,</span>
        <span class="s">&#39;forum_feedback_users&#39;</span><span class="p">:</span> <span class="s">u&quot;/forums/communaute/bug-suggestions/&quot;</span><span class="p">,</span>
        <span class="s">&#39;contribute_link&#39;</span><span class="p">:</span> <span class="s">u&quot;https://github.com/zestedesavoir/zds-site/blob/dev/CONTRIBUTING.md&quot;</span><span class="p">,</span>
        <span class="s">&#39;short_description&#39;</span><span class="p">:</span> <span class="s">u&quot;&quot;</span><span class="p">,</span>
        <span class="s">&#39;long_description&#39;</span><span class="p">:</span> <span class="s">u&quot;Zeste de Savoir est un site de partage de connaissances &quot;</span>
                            <span class="s">u&quot;sur lequel vous trouverez des tutoriels de tous niveaux, &quot;</span>
                            <span class="s">u&quot;des articles et des forums d&#39;entraide animés par et pour &quot;</span>
                            <span class="s">u&quot;la communauté.&quot;</span><span class="p">,</span>
        <span class="s">&#39;association&#39;</span><span class="p">:</span> <span class="p">{</span>
            <span class="s">&#39;name&#39;</span><span class="p">:</span> <span class="s">u&quot;Zeste de Savoir&quot;</span><span class="p">,</span>
            <span class="s">&#39;fee&#39;</span><span class="p">:</span> <span class="s">u&quot;20 €&quot;</span><span class="p">,</span>
            <span class="s">&#39;email&#39;</span><span class="p">:</span> <span class="s">u&quot;association@zestedesavoir.com&quot;</span><span class="p">,</span>
            <span class="s">&#39;email_ca&#39;</span><span class="p">:</span> <span class="s">u&quot;ca-zeste-de-savoir@googlegroups.com&quot;</span>
        <span class="p">},</span>
        <span class="s">&#39;licenses&#39;</span><span class="p">:</span> <span class="p">{</span>
            <span class="s">&#39;logo&#39;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s">&#39;code&#39;</span><span class="p">:</span> <span class="s">u&quot;CC-BY&quot;</span><span class="p">,</span>
                <span class="s">&#39;title&#39;</span><span class="p">:</span> <span class="s">u&quot;Creative Commons License&quot;</span><span class="p">,</span>
                <span class="s">&#39;description&#39;</span><span class="p">:</span> <span class="s">u&quot;Licence Creative Commons Attribution - Pas d’Utilisation Commerciale - &quot;</span>
                               <span class="s">u&quot;Partage dans les Mêmes Conditions 4.0 International.&quot;</span><span class="p">,</span>
                <span class="s">&#39;url_image&#39;</span><span class="p">:</span> <span class="s">u&quot;http://i.creativecommons.org/l/by-nc-sa/4.0/80x15.png&quot;</span><span class="p">,</span>
                <span class="s">&#39;url_license&#39;</span><span class="p">:</span> <span class="s">u&quot;http://creativecommons.org/licenses/by-nc-sa/4.0/&quot;</span><span class="p">,</span>
                <span class="s">&#39;author&#39;</span><span class="p">:</span> <span class="s">u&quot;MaxRoyo&quot;</span>
            <span class="p">},</span>
            <span class="s">&#39;cookies&#39;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s">&#39;code&#39;</span><span class="p">:</span> <span class="s">u&quot;CC-BY&quot;</span><span class="p">,</span>
                <span class="s">&#39;title&#39;</span><span class="p">:</span> <span class="s">u&quot;Licence Creative Commons&quot;</span><span class="p">,</span>
                <span class="s">&#39;description&#39;</span><span class="p">:</span> <span class="s">u&quot;licence Creative Commons Attribution 4.0 International&quot;</span><span class="p">,</span>
                <span class="s">&#39;url_image&#39;</span><span class="p">:</span> <span class="s">u&quot;http://i.creativecommons.org/l/by-nc-sa/4.0/80x15.png&quot;</span><span class="p">,</span>
                <span class="s">&#39;url_license&#39;</span><span class="p">:</span> <span class="s">u&quot;http://creativecommons.org/licenses/by-nc-sa/4.0/&quot;</span>
            <span class="p">},</span>
            <span class="s">&#39;source&#39;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s">&#39;code&#39;</span><span class="p">:</span> <span class="s">u&quot;GPL v3&quot;</span><span class="p">,</span>
                <span class="s">&#39;url_license&#39;</span><span class="p">:</span> <span class="s">u&quot;http://www.gnu.org/licenses/gpl-3.0.html&quot;</span><span class="p">,</span>
                <span class="s">&#39;provider_name&#39;</span><span class="p">:</span> <span class="s">u&quot;Progdupeupl&quot;</span><span class="p">,</span>
                <span class="s">&#39;provider_url&#39;</span><span class="p">:</span> <span class="s">u&quot;http://pdp.microjoe.org&quot;</span><span class="p">,</span>
            <span class="p">},</span>
            <span class="s">&#39;licence_info_title&#39;</span><span class="p">:</span> <span class="s">u&#39;http://zestedesavoir.com/tutoriels/281/le-droit-dauteur-creative-commons-et-les-lic&#39;</span>
                                  <span class="s">u&#39;ences-sur-zeste-de-savoir/&#39;</span><span class="p">,</span>
            <span class="s">&#39;licence_info_link&#39;</span><span class="p">:</span> <span class="s">u&#39;Le droit d</span><span class="se">\&#39;</span><span class="s">auteur, Creative Commons et les licences sur Zeste de Savoir&#39;</span>
        <span class="p">},</span>
        <span class="s">&#39;hosting&#39;</span><span class="p">:</span> <span class="p">{</span>
            <span class="s">&#39;name&#39;</span><span class="p">:</span> <span class="s">u&quot;OVH&quot;</span><span class="p">,</span>
            <span class="s">&#39;address&#39;</span><span class="p">:</span> <span class="s">u&quot;2 rue Kellermann - 59100 Roubaix - France&quot;</span>
        <span class="p">},</span>
        <span class="s">&#39;social&#39;</span><span class="p">:</span> <span class="p">{</span>
            <span class="s">&#39;facebook&#39;</span><span class="p">:</span> <span class="s">u&#39;https://www.facebook.com/ZesteDeSavoir&#39;</span><span class="p">,</span>
            <span class="s">&#39;twitter&#39;</span><span class="p">:</span> <span class="s">u&#39;https://twitter.com/ZesteDeSavoir&#39;</span><span class="p">,</span>
            <span class="s">&#39;googleplus&#39;</span><span class="p">:</span> <span class="s">u&#39;https://plus.google.com/u/0/107033688356682807298&#39;</span>
        <span class="p">},</span>
        <span class="s">&#39;cnil&#39;</span><span class="p">:</span> <span class="s">u&quot;1771020&quot;</span><span class="p">,</span>
    <span class="p">},</span>
    <span class="s">&#39;member&#39;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s">&#39;bot_account&#39;</span><span class="p">:</span> <span class="s">u&quot;admin&quot;</span><span class="p">,</span>
        <span class="s">&#39;anonymous_account&#39;</span><span class="p">:</span> <span class="s">u&quot;anonymous&quot;</span><span class="p">,</span>
        <span class="s">&#39;external_account&#39;</span><span class="p">:</span> <span class="s">u&quot;external&quot;</span><span class="p">,</span>
        <span class="s">&#39;bot_group&#39;</span><span class="p">:</span> <span class="s">u&#39;bot&#39;</span><span class="p">,</span>
        <span class="s">&#39;members_per_page&#39;</span><span class="p">:</span> <span class="mi">100</span><span class="p">,</span>
    <span class="p">},</span>
    <span class="s">&#39;gallery&#39;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s">&#39;image_max_size&#39;</span><span class="p">:</span> <span class="mi">1024</span> <span class="o">*</span> <span class="mi">1024</span><span class="p">,</span>
    <span class="p">},</span>
    <span class="s">&#39;article&#39;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s">&#39;home_number&#39;</span><span class="p">:</span> <span class="mi">4</span><span class="p">,</span>
        <span class="s">&#39;repo_path&#39;</span><span class="p">:</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">BASE_DIR</span><span class="p">,</span> <span class="s">&#39;articles-data&#39;</span><span class="p">)</span>
    <span class="p">},</span>
    <span class="s">&#39;tutorial&#39;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s">&#39;repo_path&#39;</span><span class="p">:</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">BASE_DIR</span><span class="p">,</span> <span class="s">&#39;tutoriels-private&#39;</span><span class="p">),</span>
        <span class="s">&#39;repo_public_path&#39;</span><span class="p">:</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">BASE_DIR</span><span class="p">,</span> <span class="s">&#39;tutoriels-public&#39;</span><span class="p">),</span>
        <span class="s">&#39;default_license_pk&#39;</span><span class="p">:</span> <span class="mi">7</span><span class="p">,</span>
        <span class="s">&#39;home_number&#39;</span><span class="p">:</span> <span class="mi">5</span><span class="p">,</span>
        <span class="s">&#39;helps_per_page&#39;</span><span class="p">:</span> <span class="mi">20</span><span class="p">,</span>
        <span class="s">&#39;content_per_page&#39;</span><span class="p">:</span> <span class="mi">50</span><span class="p">,</span>
        <span class="s">&#39;feed_length&#39;</span><span class="p">:</span> <span class="mi">5</span>
    <span class="p">},</span>
    <span class="s">&#39;content&#39;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s">&#39;repo_private_path&#39;</span><span class="p">:</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">BASE_DIR</span><span class="p">,</span> <span class="s">&#39;contents-private&#39;</span><span class="p">),</span>
        <span class="s">&#39;repo_public_path&#39;</span><span class="p">:</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">BASE_DIR</span><span class="p">,</span> <span class="s">&#39;contents-public&#39;</span><span class="p">),</span>
        <span class="s">&#39;extra_contents_dirname&#39;</span><span class="p">:</span> <span class="s">&#39;extra_contents&#39;</span><span class="p">,</span>
        <span class="s">&#39;max_tree_depth&#39;</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span>
        <span class="s">&#39;default_license_pk&#39;</span><span class="p">:</span> <span class="mi">7</span><span class="p">,</span>
        <span class="s">&#39;content_per_page&#39;</span><span class="p">:</span> <span class="mi">50</span><span class="p">,</span>
        <span class="s">&#39;notes_per_page&#39;</span><span class="p">:</span> <span class="mi">25</span><span class="p">,</span>
        <span class="s">&#39;helps_per_page&#39;</span><span class="p">:</span> <span class="mi">20</span><span class="p">,</span>
        <span class="s">&#39;feed_length&#39;</span><span class="p">:</span> <span class="mi">5</span><span class="p">,</span>
        <span class="s">&#39;user_page_number&#39;</span><span class="p">:</span> <span class="mi">5</span><span class="p">,</span>
        <span class="s">&#39;default_image&#39;</span><span class="p">:</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">BASE_DIR</span><span class="p">,</span> <span class="s">&quot;fixtures&quot;</span><span class="p">,</span> <span class="s">&quot;noir_black.png&quot;</span><span class="p">),</span>
        <span class="s">&#39;import_image_prefix&#39;</span><span class="p">:</span> <span class="s">&#39;archive&#39;</span><span class="p">,</span>
        <span class="s">&#39;build_pdf_when_published&#39;</span><span class="p">:</span> <span class="bp">True</span>
    <span class="p">},</span>
    <span class="s">&#39;forum&#39;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s">&#39;posts_per_page&#39;</span><span class="p">:</span> <span class="mi">21</span><span class="p">,</span>
        <span class="s">&#39;topics_per_page&#39;</span><span class="p">:</span> <span class="mi">21</span><span class="p">,</span>
        <span class="s">&#39;spam_limit_seconds&#39;</span><span class="p">:</span> <span class="mi">60</span> <span class="o">*</span> <span class="mi">15</span><span class="p">,</span>
        <span class="s">&#39;spam_limit_participant&#39;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span>
        <span class="s">&#39;followed_topics_per_page&#39;</span><span class="p">:</span> <span class="mi">21</span><span class="p">,</span>
        <span class="s">&#39;beta_forum_id&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
        <span class="s">&#39;max_post_length&#39;</span><span class="p">:</span> <span class="mi">1000000</span><span class="p">,</span>
        <span class="s">&#39;top_tag_max&#39;</span><span class="p">:</span> <span class="mi">5</span><span class="p">,</span>
        <span class="s">&#39;home_number&#39;</span><span class="p">:</span> <span class="mi">5</span><span class="p">,</span>
        <span class="s">&#39;old_post_limit_days&#39;</span><span class="p">:</span> <span class="mi">90</span>
    <span class="p">},</span>
    <span class="s">&#39;topic&#39;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s">&#39;home_number&#39;</span><span class="p">:</span> <span class="mi">6</span><span class="p">,</span>
    <span class="p">},</span>
    <span class="s">&#39;featured_resource&#39;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s">&#39;featured_per_page&#39;</span><span class="p">:</span> <span class="mi">100</span><span class="p">,</span>
        <span class="s">&#39;home_number&#39;</span><span class="p">:</span> <span class="mi">5</span><span class="p">,</span>
    <span class="p">},</span>
    <span class="s">&#39;paginator&#39;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s">&#39;folding_limit&#39;</span><span class="p">:</span> <span class="mi">4</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</div>


          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="frontend-install.html" class="btn btn-neutral float-right" title="Installation du frontend" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="backend-windows-install.html" class="btn btn-neutral" title="Installation du backend sous Windows" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2015, zds-member.
    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'1.0',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>
      <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  
  
    <script type="text/javascript" src="../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>