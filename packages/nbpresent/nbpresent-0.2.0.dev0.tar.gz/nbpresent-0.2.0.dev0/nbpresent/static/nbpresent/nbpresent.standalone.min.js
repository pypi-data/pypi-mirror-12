(function(f){if(typeof exports==="object"&&typeof module!=="undefined"){module.exports=f()}else if(typeof define==="function"&&define.amd){define([],f)}else{var g;if(typeof window!=="undefined"){g=window}else if(typeof global!=="undefined"){g=global}else if(typeof self!=="undefined"){g=self}else{g=this}g.nbpresentStandalone = f()}})(function(){var define,module,exports;return (function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),_nbpresentDeps=require("nbpresent-deps"),_parts=require("../parts");window.html2canvas=_nbpresentDeps.html2canvas;var _thumbs=new Map,CellManager=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"getCells",value:function(){var e={};return _nbpresentDeps.d3.selectAll(".cell").each(function(){var t=_nbpresentDeps.d3.select(this),n=t.attr("data-nbpresent-id");n&&(e[n]={element:[t.node()]})}),e}},{key:"getPart",value:function(e){var t=this.getCells()[e.cell];if(!t)return null;var n=_nbpresentDeps.d3.select(t.element[0]),r=n.select(_parts.PART_SELECT[e.part]);return r}},{key:"thumbnail",value:function(e){if(!_thumbs.get(e)){var t=this.getPart(e);if(t=t?t.node():null,!t)return Promise.reject(e);_thumbs.set(e,(0,_nbpresentDeps.html2canvas)(t).then(function(e){return{canvas:e,uri:e.toDataURL("image/png"),width:e.width,height:e.height}},function(e){console.log(e)}))}return _thumbs.get(e)}}]),e}();exports.CellManager=CellManager;

},{"../parts":4,"nbpresent-deps":"nbpresent-deps"}],2:[function(require,module,exports){
"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),Mode=function(){function e(t){_classCallCheck(this,e),this.root=t,this.initStylesheet(),this.init()}return _createClass(e,[{key:"initStylesheet",value:function(){var e=d3.select("head").selectAll("link#nbpresent-css").data([1]);return e.node()?void console.warn("nbpresent extension already loaded!"):void e.enter().append("link").attr({id:"nbpresent-css"}).attr({rel:"stylesheet",href:this.root+"/nbpresent.min.css"})}}]),e}();exports.Mode=Mode;

},{}],3:[function(require,module,exports){
"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),_get=function(e,t,r){for(var n=!0;n;){var o=e,a=t,s=r;i=u=l=void 0,n=!1,null===o&&(o=Function.prototype);var i=Object.getOwnPropertyDescriptor(o,a);if(void 0!==i){if("value"in i)return i.value;var l=i.get;return void 0===l?void 0:l.call(s)}var u=Object.getPrototypeOf(o);if(null===u)return void 0;e=u,t=a,r=s,n=!0}},_nbpresentDeps=require("nbpresent-deps"),_tree=require("../tree"),_presenterStandalone=require("../presenter/standalone"),_base=require("./base"),StandaloneMode=function(e){function t(){_classCallCheck(this,t),_get(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,arguments)}return _inherits(t,e),_createClass(t,[{key:"init",value:function(){var e=JSON.parse(_nbpresentDeps.d3.select("#nbpresent_tree").text()),t=new _tree.Tree({slides:e.slides,root:this.root}),r=new _presenterStandalone.StandalonePresenter(t.tree);r.presenting.set(!0)}}]),t}(_base.Mode);exports["default"]=StandaloneMode,module.exports=exports["default"];

},{"../presenter/standalone":6,"../tree":8,"./base":2,"nbpresent-deps":"nbpresent-deps"}],4:[function(require,module,exports){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var PART={source:"source",outputs:"outputs",widgets:"widgets"},PART_SELECT={source:".inner_cell",outputs:".output_wrapper",widgets:".widget-area .widget-subarea"};exports.PART=PART,exports.PART_SELECT=PART_SELECT;

},{}],5:[function(require,module,exports){
"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),_nbpresentDeps=require("nbpresent-deps"),_toolbar=require("../toolbar"),_parts=require("../parts"),PREFIX=["-webkit-","-moz-","-ms-","-o-",""],Presenter=function(){function e(t){var n=this;_classCallCheck(this,e),this.tree=t,this.cellManager=this.makeCellManager(),this.initUI(),this.x=_nbpresentDeps.d3.scale.linear(),this.y=_nbpresentDeps.d3.scale.linear(),this.presenting=this.tree.select(["presenter","presenting"]),this.current=this.tree.select(["presenter","current"]),this.presenting.on("update",function(){return n.present()}),this.current.on("update",function(){return n.update()})}return _createClass(e,[{key:"makeCellManager",value:function(){throw new Error("Not implemented")}},{key:"initUI",value:function(){this.$ui=_nbpresentDeps.d3.select("body").append("div").classed({nbpresent_presenter:1}).style({display:"none"}),this.initToolbar()}},{key:"toolbarIcons",value:function(){var e=this;return[[{icon:"fast-backward",click:function(){return e.current.set(0)},tip:"Back to Start"}],[{icon:"step-backward",click:function(){return e.current.set(e.current.get()-1)},tip:"Previous Slide"}],[{icon:"step-forward",click:function(){return e.current.set(e.current.get()+1)},tip:"Next Slide"}]]}},{key:"initToolbar",value:function(){var e=new _toolbar.Toolbar;e.btnGroupClass("btn-group-vertical").btnClass("btn-invert btn-lg").tipOptions({container:"body",placement:"bottom"}),this.$toolbar=this.$ui.append("div").classed({presenter_toolbar:1}).datum(this.toolbarIcons()).call(e.update)}},{key:"present",value:function(){this.current.set(null),this.current.set(0)}},{key:"getCells",value:function(){return this.cellManager.getCells()}},{key:"update",value:function(){var e=this,t=this.presenting.get();if(this.$ui.style({display:t?"block":"none"}).transition().style({opacity:+t}),!t)return this.clean(!0);var n=document.documentElement,r=n.clientWidth,s=n.clientHeight;this.x.range([0,r]),this.y.range([0,s]);var l=this.tree.get("sortedSlides")[this.current.get()];if(!l)return this.current.set(0);var i=this.getCells();_nbpresentDeps.d3.selectAll(this.allPartSelect()).classed({nbpresent_unpresent:1,nbpresent_present:0}),_nbpresentDeps.d3.entries(l.value.regions).filter(function(e){var t=e.value;return t.content}).map(function(t){var n=t.value,r=n.content,s=n.x,l=n.y,a=n.width,c=n.height,u=i[r.cell];if(u){var o=_nbpresentDeps.d3.select(u.element[0]),p=o.select(_parts.PART_SELECT[r.part]);p.classed({nbpresent_unpresent:0,nbpresent_present:1}).style({transform:"translate("+e.x(s)+"px, "+e.y(l)+"px) translateZ(0)",left:"0",top:"0",width:e.x(a)+"px",height:e.y(c)+"px"})}}),this.clean()}},{key:"allPartSelect",value:function(){return _nbpresentDeps.d3.entries(_parts.PART_SELECT).map(function(e){var t=e.value;return".cell "+t}).join(", ")}},{key:"clean",value:function(e){e&&_nbpresentDeps.d3.selectAll(this.allPartSelect()).classed({nbpresent_unpresent:1,nbpresent_present:0}),_nbpresentDeps.d3.selectAll(".nbpresent_unpresent").style({transform:null,left:null,top:null,width:null,height:null}).classed({nbpresent_unpresent:0,nbpresent_present:0})}}]),e}();exports.Presenter=Presenter;

},{"../parts":4,"../toolbar":7,"nbpresent-deps":"nbpresent-deps"}],6:[function(require,module,exports){
"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),_get=function(e,t,r){for(var n=!0;n;){var o=e,a=t,l=r;i=c=u=void 0,n=!1,null===o&&(o=Function.prototype);var i=Object.getOwnPropertyDescriptor(o,a);if(void 0!==i){if("value"in i)return i.value;var u=i.get;return void 0===u?void 0:u.call(l)}var c=Object.getPrototypeOf(o);if(null===c)return void 0;e=c,t=a,r=l,n=!0}},_cellsStandalone=require("../cells/standalone"),_base=require("./base"),StandalonePresenter=function(e){function t(){_classCallCheck(this,t),_get(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,arguments)}return _inherits(t,e),_createClass(t,[{key:"makeCellManager",value:function(){return new _cellsStandalone.CellManager}}]),t}(_base.Presenter);exports.StandalonePresenter=StandalonePresenter;

},{"../cells/standalone":1,"./base":5}],7:[function(require,module,exports){
"use strict";function _classCallCheck(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function t(t,n){for(var e=0;e<n.length;e++){var r=n[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(n,e,r){return e&&t(n.prototype,e),r&&t(n,r),n}}(),_nbpresentDeps=require("nbpresent-deps"),fn=_nbpresentDeps.d3.functor,Toolbar=function(){function t(){_classCallCheck(this,t),this._btnClass=fn("btn-default"),this._btnGroupClass=fn("btn-group"),this._tipOptions=fn({container:"body"}),this.update=this.update.bind(this)}return _createClass(t,[{key:"btnClass",value:function(t){return arguments.length?[this._btnClass=fn(t),this][1]:this._btnClass}},{key:"tipOptions",value:function(t){return arguments.length?[this._tipOptions=fn(t),this][1]:this._tipOptions}},{key:"btnGroupClass",value:function(t){return arguments.length?[this._btnGroupClass=fn(t),this][1]:this._btnGroupClass}},{key:"update",value:function(t){var n=this,e=this;t.classed({"btn-toolbar":1});var r=t.selectAll(".btn-toolbar-group").data(function(t){return t});r.enter().append("div").classed({"btn-toolbar-group":1}).classed(this._btnGroupClass(),1);var s=r.selectAll(".btn").data(function(t){return t},function(t){return t.tip});s.enter().append("a").attr("class",function(t){return"btn "+n._btnClass(t)}).attr({title:function(t){return t.tip}}).each(function(t){$.fn.tooltip&&$(this).tooltip(e._tipOptions(t))}).append("i"),s.on("click",function(t){return t.click()}).select("i").attr({"class":function(t){return"fa fa-fw fa-"+t.icon}});var i=function(){$(this).tooltip("destroy")};s.filter(function(t){return t.visible&&!t.visible()}).each(i).remove(),s.exit().each(i).remove(),r.exit().remove()}}]),t}();exports.Toolbar=Toolbar;

},{"nbpresent-deps":"nbpresent-deps"}],8:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{"default":e}}function _classCallCheck(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function e(e,r){for(var n=0;n<r.length;n++){var t=r[n];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(e,t.key,t)}}return function(r,n,t){return n&&e(r.prototype,n),t&&e(r,t),r}}(),_jquery=require("jquery"),_jquery2=_interopRequireDefault(_jquery),_nbpresentDeps=require("nbpresent-deps"),Tree=function(){function e(r){_classCallCheck(this,e),this.tree=new _nbpresentDeps.Baobab(_jquery2["default"].extend({slides:{},presenter:{presenting:!1},sorter:{},editor:{},sortedSlides:_nbpresentDeps.Baobab.monkey(["slides"],this.sortedSlides)},r))}return _createClass(e,[{key:"sortedSlides",value:function(e){var r=_nbpresentDeps.d3.entries(e);return r.sort(function(e,r){return null===e.value.prev||e.key===r.value.prev?-1:1}),r}}]),e}();exports.Tree=Tree;

},{"jquery":"jquery","nbpresent-deps":"nbpresent-deps"}]},{},[3])(3)
});