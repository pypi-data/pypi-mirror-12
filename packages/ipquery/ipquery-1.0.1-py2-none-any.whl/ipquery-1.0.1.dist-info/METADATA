Metadata-Version: 2.0
Name: ipquery
Version: 1.0.1
Summary: Web application to allow SAML authenticated users to searchmultiple AWS accounts for instances by IP
Home-page: https://github.com/gene1wood/ipquery
Author: Gene Wood
Author-email: gene_wood@cementhorizon.com
License: MPL 2.0
Keywords: aws ec2 saml okta
Platform: UNKNOWN
Classifier: Development Status :: 3 - Alpha
Classifier: Intended Audience :: Developers
Classifier: Topic :: System :: Systems Administration
Classifier: License :: OSI Approved :: Mozilla Public License 2.0 (MPL 2.0)
Classifier: Programming Language :: Python :: 2.7
Requires-Dist: ip2instance (>=1.2.0)
Requires-Dist: PyYAML (>=3.11)
Requires-Dist: Flask (>=0.10.1)
Requires-Dist: Flask-Bootstrap (>=3.3.2.1)
Requires-Dist: Flask-Cache (>=0.13.1)
Requires-Dist: Flask-Login (>=0.2.11)
Requires-Dist: Flask-WTF (>=0.11)
Requires-Dist: pysaml2 (>=2.4.0)

Overview
========

Web application to allow SAML authenticated users to search multiple AWS accounts for instances by IP

Configuration
=============

The ipquery configuration file is located at `/etc/ipquery.yaml`. To configure
ipquery create this file and populate it with your configuration settings.

secret_key
----------

A unique secret key to secure Flask sessions

metadata_url_for
----------------

A dictionary of all SAML identity providers with the name of the identity
provider as the key and the identity providers SAML metadata URL as the
value.

idp_name
--------

The name of the preferred SAML identity provider.

acs_url_scheme
--------------

Set this to `http` or `https` depending on how you're serving up the web UI.

PREFERRED_URL_SCHEME
--------------------

Set this to `http` or `https` depending on how you're serving up the web UI.

loglevel
--------

The `level <https://docs.python.org/2/library/logging.html#levels>`_ to set for logging.

ip2instance_role_session_name
-----------------------------

A session name to identify the IAM role assumption

ip2instance_roles
-----------------

A list of all AWS IAM Role ARNs to assume and use to scan for instances.

ip2instance_policy
------------------

The IAM Policy to constrain the access that ipquery will use when assuming
roles to scan for instances.

Example Configuration
---------------------

Here is an example configuration for two foreign AWS accounts

::

    --- 
      secret_key: "11111111-1111-1111-1111-111111111111"
      idp_name: oktadev
      metadata_url_for: 
        oktadev: "http://idp.oktadev.com/metadata"
      PREFERRED_URL_SCHEME: https
      acs_url_scheme: https
      ip2instance_roles: 
        - "arn:aws:iam::012345678901:role/MyIPQueryRole"
        - "arn:aws:iam::123456789012:role/MyIPQueryRole"

Usage
=====

::

    ipquery


