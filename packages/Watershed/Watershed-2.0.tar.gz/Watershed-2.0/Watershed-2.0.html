<!doctype html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head>
<title>
Watershed-2.0.html
</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
</head>
<body bgcolor="#f0f0f8">
<table width="100%" cellspacing="0" cellpadding="2" border="0" summary="heading">
<tr bgcolor="#7799ee">
<td valign=bottom>&nbsp;<br>
<font color="#ffffff" face="helvetica, arial">&nbsp;<br><big><big><strong>Watershed</strong></big></big> (version 2.0, 2015-May-22)</font></td
><td align=right valign=bottom
><font color="#ffffff" face="helvetica, arial">
</font></td></tr></table>
<p><a href="#Watershed"><tt>Watershed</tt></a>.py<br>
<tt>
&nbsp;<br>
Version:&nbsp;2.0<br>
&nbsp;&nbsp;&nbsp;<br>
Author:&nbsp;Avinash&nbsp;Kak&nbsp;(kak@purdue.edu)<br>
&nbsp;<br>
Date:&nbsp;2015-May-22<br>
&nbsp;<br>
&nbsp;<br>
</tt>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="2"> 
<TR>
<TH ALIGN=left>
<tt>
<b>Download Version 2.0:</b>&nbsp;  
<a HREF="https://engineering.purdue.edu/kak/distWatershed/Watershed-2.0.tar.gz?download">gztar</a> 
&nbsp;             
<a HREF="https://engineering.purdue.edu/kak/distWatershed/Watershed-2.0.tar.bz2?download">bztar</a> 
<br>
<br>
&nbsp;
</tt>
</TH>
<TD>
<tt>
&nbsp;&nbsp;&nbsp;&nbsp;
Total number of downloads (all versions): 
<?php   
    $file = fopen("HowManyCounts.txt", "r") or exit("Unable to open file!");
    echo fgets($file);
    fclose($file);
?>
</tt>
<br>
<center>
<tt>
<font color="red" size="-2">
&nbsp;&nbsp;&nbsp;&nbsp;
This count is automatically updated at every rotation of
<br> 
&nbsp;&nbsp;&nbsp;&nbsp;
the weblogs (normally once every two to four days)
<br>
&nbsp;&nbsp;&nbsp;&nbsp;
Last updated:
<?php   
    $file = fopen("LastUpdated.txt", "r") or exit("Unable to open file!");
    echo fgets($file);
    fclose($file);
?>
</font>
</tt>
</center>
</TD>
</TR>
</TABLE>
<tt>
<a HREF="Watershed-2.0_CodeOnly.html">View version 2.0 code in browser</a> 
&nbsp;<br>
&nbsp;<br>
&nbsp;<br>
&nbsp;<br>
<font size="+2" color="red">CHANGES:<br>
</font>&nbsp;<br>
&nbsp;&nbsp;Version&nbsp;2.0<br>
&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;This&nbsp;is&nbsp;a&nbsp;Python&nbsp;3.x&nbsp;compliant&nbsp;version&nbsp;of&nbsp;the&nbsp;<a href="#Watershed">Watershed</a>&nbsp;module.&nbsp;&nbsp;This<br>
&nbsp;&nbsp;&nbsp;&nbsp;version&nbsp;should&nbsp;work&nbsp;with&nbsp;both&nbsp;Python&nbsp;2.7&nbsp;and&nbsp;Python&nbsp;3.x.<br>
&nbsp;<br>
&nbsp;&nbsp;Version&nbsp;1.1.2<br>
&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;This&nbsp;version&nbsp;fixes&nbsp;the&nbsp;module&nbsp;packaging&nbsp;errors&nbsp;that&nbsp;had&nbsp;crept&nbsp;into&nbsp;the<br>
&nbsp;&nbsp;&nbsp;&nbsp;previous&nbsp;version.<br>
&nbsp;<br>
&nbsp;&nbsp;Version&nbsp;1.1.1<br>
&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;This&nbsp;version&nbsp;presents&nbsp;cleaned-up&nbsp;documentation.&nbsp;&nbsp;The&nbsp;implementation<br>
&nbsp;&nbsp;&nbsp;&nbsp;code&nbsp;remains&nbsp;unchanged.<br>
&nbsp;<br>
&nbsp;&nbsp;Version&nbsp;1.1<br>
&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;This&nbsp;version&nbsp;fixes&nbsp;a&nbsp;bug&nbsp;in&nbsp;the&nbsp;dilate()&nbsp;and&nbsp;erode()&nbsp;methods&nbsp;of&nbsp;the<br>
&nbsp;&nbsp;&nbsp;&nbsp;module&nbsp;that&nbsp;caused&nbsp;these&nbsp;methods&nbsp;to&nbsp;misbehave&nbsp;for&nbsp;non-square&nbsp;images.<br>
&nbsp;&nbsp;&nbsp;&nbsp;Version&nbsp;1.1&nbsp;also&nbsp;includes&nbsp;improvements&nbsp;in&nbsp;the&nbsp;explanatory&nbsp;comments<br>
&nbsp;&nbsp;&nbsp;&nbsp;included&nbsp;in&nbsp;the&nbsp;scripts&nbsp;in&nbsp;the&nbsp;Examples&nbsp;directory.<br>
&nbsp;<br>
&nbsp;<br>
<font size="+2" color="red">INTRODUCTION:<br>
</font>&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;Over&nbsp;the&nbsp;years,&nbsp;the&nbsp;watershed&nbsp;algorithm&nbsp;has&nbsp;emerged&nbsp;as&nbsp;a&nbsp;powerful<br>
&nbsp;&nbsp;&nbsp;&nbsp;approach&nbsp;to&nbsp;image&nbsp;segmentation.&nbsp;&nbsp;Image&nbsp;segmentation&nbsp;means&nbsp;to&nbsp;separate<br>
&nbsp;&nbsp;&nbsp;&nbsp;the&nbsp;foreground&nbsp;---&nbsp;meaning&nbsp;the&nbsp;objects&nbsp;of&nbsp;interest&nbsp;---&nbsp;from&nbsp;the<br>
&nbsp;&nbsp;&nbsp;&nbsp;background.&nbsp;&nbsp;This&nbsp;approach&nbsp;becomes&nbsp;even&nbsp;more&nbsp;powerful&nbsp;when&nbsp;you&nbsp;allow&nbsp;a<br>
&nbsp;&nbsp;&nbsp;&nbsp;user&nbsp;to&nbsp;modify&nbsp;the&nbsp;image&nbsp;gradients&nbsp;prior&nbsp;to&nbsp;the&nbsp;application&nbsp;of&nbsp;the<br>
&nbsp;&nbsp;&nbsp;&nbsp;watershed&nbsp;algorithm.<br>
&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;In&nbsp;the&nbsp;watershed&nbsp;algorithm,&nbsp;we&nbsp;think&nbsp;of&nbsp;the&nbsp;gradient&nbsp;image&nbsp;as&nbsp;a&nbsp;3D<br>
&nbsp;&nbsp;&nbsp;&nbsp;topographic&nbsp;relief&nbsp;map&nbsp;that&nbsp;consists&nbsp;of&nbsp;mountains&nbsp;where&nbsp;the&nbsp;gradient<br>
&nbsp;&nbsp;&nbsp;&nbsp;values&nbsp;are&nbsp;high&nbsp;and&nbsp;valleys&nbsp;where&nbsp;they&nbsp;are&nbsp;low.&nbsp;&nbsp;The&nbsp;watersheds&nbsp;are&nbsp;the<br>
&nbsp;&nbsp;&nbsp;&nbsp;ridge&nbsp;lines&nbsp;in&nbsp;this&nbsp;3D&nbsp;map&nbsp;that&nbsp;delineate&nbsp;common&nbsp;basins&nbsp;for&nbsp;water<br>
&nbsp;&nbsp;&nbsp;&nbsp;drainage.&nbsp;&nbsp;Note&nbsp;that&nbsp;the&nbsp;term&nbsp;watershed&nbsp;is&nbsp;also&nbsp;used&nbsp;to&nbsp;denote&nbsp;all&nbsp;of<br>
&nbsp;&nbsp;&nbsp;&nbsp;the&nbsp;surface&nbsp;area&nbsp;where&nbsp;the&nbsp;water&nbsp;drains&nbsp;toward&nbsp;a&nbsp;common&nbsp;basin&nbsp;(or<br>
&nbsp;&nbsp;&nbsp;&nbsp;valley).&nbsp;&nbsp;When&nbsp;thought&nbsp;of&nbsp;as&nbsp;in&nbsp;the&nbsp;latter&nbsp;definition,&nbsp;watershed&nbsp;area<br>
&nbsp;&nbsp;&nbsp;&nbsp;would&nbsp;be&nbsp;delineated&nbsp;by&nbsp;the&nbsp;aforementioned&nbsp;ridge&nbsp;lines.&nbsp;&nbsp;<br>
&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;In&nbsp;computer&nbsp;vision&nbsp;algorithms,&nbsp;a&nbsp;watershed&nbsp;consists&nbsp;of&nbsp;the&nbsp;highest<br>
&nbsp;&nbsp;&nbsp;&nbsp;points&nbsp;that&nbsp;delineate&nbsp;a&nbsp;surface&nbsp;area&nbsp;in&nbsp;which&nbsp;the&nbsp;water&nbsp;would&nbsp;drain&nbsp;to<br>
&nbsp;&nbsp;&nbsp;&nbsp;a&nbsp;common&nbsp;valley.&nbsp;&nbsp;It&nbsp;is&nbsp;important&nbsp;to&nbsp;realize&nbsp;that&nbsp;the&nbsp;points&nbsp;on&nbsp;a<br>
&nbsp;&nbsp;&nbsp;&nbsp;watershed&nbsp;can&nbsp;be&nbsp;at&nbsp;very&nbsp;different&nbsp;elevations.&nbsp;That&nbsp;is,&nbsp;the&nbsp;height<br>
&nbsp;&nbsp;&nbsp;&nbsp;above&nbsp;the&nbsp;ground&nbsp;plane&nbsp;along&nbsp;a&nbsp;watershed&nbsp;can&nbsp;vary&nbsp;significantly.&nbsp;Think<br>
&nbsp;&nbsp;&nbsp;&nbsp;of&nbsp;the&nbsp;Great&nbsp;Continental&nbsp;Divide&nbsp;as&nbsp;a&nbsp;watershed&nbsp;that&nbsp;divides&nbsp;the&nbsp;two<br>
&nbsp;&nbsp;&nbsp;&nbsp;American&nbsp;continents,&nbsp;the&nbsp;North&nbsp;and&nbsp;the&nbsp;South,&nbsp;into&nbsp;two&nbsp;regions,&nbsp;one<br>
&nbsp;&nbsp;&nbsp;&nbsp;that&nbsp;drains&nbsp;into&nbsp;the&nbsp;Pacific&nbsp;and&nbsp;the&nbsp;other&nbsp;that&nbsp;drains&nbsp;into&nbsp;the<br>
&nbsp;&nbsp;&nbsp;&nbsp;Atlantic.&nbsp;&nbsp;If&nbsp;you&nbsp;were&nbsp;to&nbsp;walk&nbsp;along&nbsp;this&nbsp;Great&nbsp;Divide&nbsp;all&nbsp;the&nbsp;way&nbsp;from<br>
&nbsp;&nbsp;&nbsp;&nbsp;where&nbsp;it&nbsp;begins&nbsp;in&nbsp;Alaska&nbsp;to&nbsp;its&nbsp;final&nbsp;point&nbsp;in&nbsp;Patagonia&nbsp;at&nbsp;the<br>
&nbsp;&nbsp;&nbsp;&nbsp;southern&nbsp;tip&nbsp;of&nbsp;Chile,&nbsp;you&nbsp;will&nbsp;be&nbsp;at&nbsp;vastly&nbsp;different&nbsp;elevations&nbsp;above<br>
&nbsp;&nbsp;&nbsp;&nbsp;the&nbsp;sea&nbsp;level.&nbsp;&nbsp;If&nbsp;you&nbsp;are&nbsp;on&nbsp;the&nbsp;Divide&nbsp;in&nbsp;Colorado,&nbsp;you&nbsp;are&nbsp;likely&nbsp;to<br>
&nbsp;&nbsp;&nbsp;&nbsp;find&nbsp;snow&nbsp;at&nbsp;several&nbsp;places&nbsp;even&nbsp;in&nbsp;summer&nbsp;months.&nbsp;&nbsp;But&nbsp;if&nbsp;you&nbsp;follow<br>
&nbsp;&nbsp;&nbsp;&nbsp;the&nbsp;divide&nbsp;into&nbsp;Arizona,&nbsp;at&nbsp;several&nbsp;places&nbsp;you'll&nbsp;be&nbsp;in&nbsp;the&nbsp;middle&nbsp;of<br>
&nbsp;&nbsp;&nbsp;&nbsp;what&nbsp;to&nbsp;the&nbsp;naked&nbsp;eye&nbsp;would&nbsp;like&nbsp;a&nbsp;flat&nbsp;desert.<br>
&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;These&nbsp;properties&nbsp;of&nbsp;the&nbsp;natural&nbsp;watersheds&nbsp;make&nbsp;the&nbsp;<a href="#Watershed">Watershed</a>&nbsp;a<br>
&nbsp;&nbsp;&nbsp;&nbsp;powerful&nbsp;paradigm&nbsp;for&nbsp;image&nbsp;segmentation.&nbsp;&nbsp;When&nbsp;you&nbsp;closely&nbsp;examine&nbsp;the<br>
&nbsp;&nbsp;&nbsp;&nbsp;semantically&nbsp;meaningful&nbsp;regions&nbsp;in&nbsp;typical&nbsp;images,&nbsp;you&nbsp;are&nbsp;likely&nbsp;to<br>
&nbsp;&nbsp;&nbsp;&nbsp;see&nbsp;a&nbsp;large&nbsp;variation&nbsp;in&nbsp;the&nbsp;gradient&nbsp;levels&nbsp;that&nbsp;separate&nbsp;the<br>
&nbsp;&nbsp;&nbsp;&nbsp;foreground&nbsp;regions&nbsp;from&nbsp;the&nbsp;background&nbsp;regions.&nbsp;&nbsp;Obviously,&nbsp;the<br>
&nbsp;&nbsp;&nbsp;&nbsp;strength&nbsp;of&nbsp;the&nbsp;gradient&nbsp;that&nbsp;separates&nbsp;the&nbsp;foreground&nbsp;and&nbsp;the<br>
&nbsp;&nbsp;&nbsp;&nbsp;background&nbsp;is&nbsp;a&nbsp;function&nbsp;of&nbsp;the&nbsp;local&nbsp;gray&nbsp;levels&nbsp;in&nbsp;both&nbsp;the<br>
&nbsp;&nbsp;&nbsp;&nbsp;foreground&nbsp;and&nbsp;the&nbsp;background&nbsp;in&nbsp;the&nbsp;vicinity&nbsp;of&nbsp;the&nbsp;border&nbsp;between<br>
&nbsp;&nbsp;&nbsp;&nbsp;them.&nbsp;&nbsp;So,&nbsp;while&nbsp;you&nbsp;cannot&nbsp;attribute&nbsp;specific&nbsp;values&nbsp;to&nbsp;such<br>
&nbsp;&nbsp;&nbsp;&nbsp;separating&nbsp;gradients,&nbsp;the&nbsp;gradient&nbsp;highlights&nbsp;are&nbsp;nonetheless&nbsp;real&nbsp;for<br>
&nbsp;&nbsp;&nbsp;&nbsp;the&nbsp;most&nbsp;part&nbsp;since&nbsp;that's&nbsp;how&nbsp;the&nbsp;human&nbsp;eye&nbsp;sees&nbsp;the&nbsp;different&nbsp;regions<br>
&nbsp;&nbsp;&nbsp;&nbsp;in&nbsp;an&nbsp;image.<br>
&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;That&nbsp;brings&nbsp;us&nbsp;to&nbsp;the&nbsp;question&nbsp;of&nbsp;how&nbsp;to&nbsp;actually&nbsp;implement&nbsp;the<br>
&nbsp;&nbsp;&nbsp;&nbsp;watershed&nbsp;paradigm&nbsp;for&nbsp;image&nbsp;segmentation.&nbsp;&nbsp;This&nbsp;module&nbsp;is&nbsp;based&nbsp;on<br>
&nbsp;&nbsp;&nbsp;&nbsp;what&nbsp;is&nbsp;known&nbsp;as&nbsp;the&nbsp;"flooding&nbsp;model"&nbsp;of&nbsp;computations&nbsp;for&nbsp;extracting<br>
&nbsp;&nbsp;&nbsp;&nbsp;the&nbsp;watershed&nbsp;from&nbsp;a&nbsp;gradient&nbsp;image&nbsp;when&nbsp;it&nbsp;is&nbsp;thought&nbsp;of&nbsp;as&nbsp;a&nbsp;3D<br>
&nbsp;&nbsp;&nbsp;&nbsp;relief.&nbsp;&nbsp;The&nbsp;flooding&nbsp;model&nbsp;is&nbsp;based&nbsp;on&nbsp;the&nbsp;idea&nbsp;that&nbsp;if&nbsp;we&nbsp;prick&nbsp;holes<br>
&nbsp;&nbsp;&nbsp;&nbsp;at&nbsp;the&nbsp;lowest&nbsp;points&nbsp;in&nbsp;all&nbsp;of&nbsp;the&nbsp;valleys&nbsp;of&nbsp;a&nbsp;topographic&nbsp;relief<br>
&nbsp;&nbsp;&nbsp;&nbsp;representation&nbsp;of&nbsp;a&nbsp;gradient&nbsp;image&nbsp;and&nbsp;gradually&nbsp;submerge&nbsp;the&nbsp;holed&nbsp;3D<br>
&nbsp;&nbsp;&nbsp;&nbsp;structure&nbsp;in&nbsp;a&nbsp;pool&nbsp;of&nbsp;water,&nbsp;the&nbsp;rising&nbsp;flood&nbsp;in&nbsp;one&nbsp;valley&nbsp;will&nbsp;meet<br>
&nbsp;&nbsp;&nbsp;&nbsp;the&nbsp;flood&nbsp;in&nbsp;another&nbsp;valley&nbsp;at&nbsp;the&nbsp;watershed&nbsp;ridge&nbsp;points&nbsp;between&nbsp;the<br>
&nbsp;&nbsp;&nbsp;&nbsp;two&nbsp;valleys.&nbsp;&nbsp;Since&nbsp;the&nbsp;watershed&nbsp;ridges&nbsp;can&nbsp;be&nbsp;at&nbsp;varying&nbsp;heights,&nbsp;in<br>
&nbsp;&nbsp;&nbsp;&nbsp;order&nbsp;to&nbsp;identify&nbsp;the&nbsp;watershed&nbsp;points&nbsp;beyond&nbsp;the&nbsp;first&nbsp;such&nbsp;point,&nbsp;we<br>
&nbsp;&nbsp;&nbsp;&nbsp;immediately&nbsp;put&nbsp;up&nbsp;a&nbsp;dam&nbsp;at&nbsp;the&nbsp;discovered&nbsp;watershed&nbsp;points&nbsp;so&nbsp;that&nbsp;the<br>
&nbsp;&nbsp;&nbsp;&nbsp;logic&nbsp;of&nbsp;watershed&nbsp;identification&nbsp;can&nbsp;be&nbsp;maintained&nbsp;at&nbsp;all&nbsp;heights.<br>
&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;The&nbsp;flooding&nbsp;model&nbsp;that&nbsp;is&nbsp;implemented&nbsp;in&nbsp;this&nbsp;module&nbsp;is&nbsp;based&nbsp;on&nbsp;the<br>
&nbsp;&nbsp;&nbsp;&nbsp;work&nbsp;of&nbsp;Beucher,&nbsp;Lantuejoul,&nbsp;and&nbsp;Meyer.&nbsp;&nbsp;A&nbsp;description&nbsp;of&nbsp;the&nbsp;algorithm<br>
&nbsp;&nbsp;&nbsp;&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;following&nbsp;Google&nbsp;accessible&nbsp;report&nbsp;by&nbsp;S.&nbsp;Beucher:<br>
&nbsp;&nbsp;&nbsp;&nbsp;"The&nbsp;<a href="#Watershed">Watershed</a>&nbsp;Transformation&nbsp;Applied&nbsp;to&nbsp;Image&nbsp;Segmentation."&nbsp;&nbsp;We&nbsp;will<br>
&nbsp;&nbsp;&nbsp;&nbsp;refer&nbsp;to&nbsp;this&nbsp;algorithm&nbsp;as&nbsp;the&nbsp;BLM&nbsp;algorithm&nbsp;in&nbsp;the&nbsp;rest&nbsp;of&nbsp;this<br>
&nbsp;&nbsp;&nbsp;&nbsp;document.<br>
&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;The&nbsp;BLM&nbsp;algorithm&nbsp;uses&nbsp;morphological&nbsp;operators&nbsp;for&nbsp;simulating&nbsp;the<br>
&nbsp;&nbsp;&nbsp;&nbsp;rising&nbsp;flood&nbsp;in&nbsp;the&nbsp;topographic&nbsp;relief&nbsp;map&nbsp;of&nbsp;the&nbsp;gradient&nbsp;image.&nbsp;The<br>
&nbsp;&nbsp;&nbsp;&nbsp;most&nbsp;important&nbsp;morphological&nbsp;operations&nbsp;in&nbsp;this&nbsp;context&nbsp;are&nbsp;those&nbsp;of<br>
&nbsp;&nbsp;&nbsp;&nbsp;dilations,&nbsp;distance&nbsp;mapping,&nbsp;calculation&nbsp;of&nbsp;the&nbsp;influence&nbsp;zones&nbsp;in&nbsp;a<br>
&nbsp;&nbsp;&nbsp;&nbsp;binary&nbsp;blob&nbsp;with&nbsp;respect&nbsp;to&nbsp;marker&nbsp;sets,&nbsp;and&nbsp;the&nbsp;determination&nbsp;of<br>
&nbsp;&nbsp;&nbsp;&nbsp;geodesic&nbsp;skeletons.&nbsp;&nbsp;These&nbsp;operators&nbsp;are&nbsp;applied&nbsp;to&nbsp;the&nbsp;Z&nbsp;level&nbsp;sets<br>
&nbsp;&nbsp;&nbsp;&nbsp;derived&nbsp;from&nbsp;the&nbsp;gradient&nbsp;map.&nbsp;&nbsp;For&nbsp;a&nbsp;given&nbsp;level,&nbsp;the&nbsp;pixels&nbsp;that<br>
&nbsp;&nbsp;&nbsp;&nbsp;belong&nbsp;to&nbsp;the&nbsp;Z&nbsp;set&nbsp;at&nbsp;that&nbsp;level&nbsp;are&nbsp;those&nbsp;whose&nbsp;gradient&nbsp;values&nbsp;are<br>
&nbsp;&nbsp;&nbsp;&nbsp;less&nbsp;than&nbsp;or&nbsp;equal&nbsp;to&nbsp;the&nbsp;level.&nbsp;&nbsp;Flooding&nbsp;in&nbsp;the&nbsp;BLM&nbsp;algorithm&nbsp;is<br>
&nbsp;&nbsp;&nbsp;&nbsp;simulated&nbsp;by&nbsp;computing&nbsp;the&nbsp;influence&nbsp;zones&nbsp;of&nbsp;the&nbsp;flooded&nbsp;pixels&nbsp;at&nbsp;one<br>
&nbsp;&nbsp;&nbsp;&nbsp;Z&nbsp;level&nbsp;in&nbsp;all&nbsp;the&nbsp;pixels&nbsp;that&nbsp;belong&nbsp;to&nbsp;the&nbsp;next&nbsp;higher&nbsp;Z&nbsp;level.<br>
&nbsp;<br>
&nbsp;<br>
<font size="+2" color="red">COMPARISON&nbsp;WITH&nbsp;THE&nbsp;OpenCV&nbsp;WATERSHED&nbsp;IMPLEMENTATION:<br>
</font>&nbsp;<br>
&nbsp;&nbsp;&nbsp;If&nbsp;your&nbsp;main&nbsp;interest&nbsp;is&nbsp;in&nbsp;just&nbsp;the&nbsp;final&nbsp;output&nbsp;---&nbsp;good-quality<br>
&nbsp;&nbsp;&nbsp;watershed&nbsp;segmentations&nbsp;based&nbsp;on&nbsp;user-supplied&nbsp;seeds&nbsp;---&nbsp;then&nbsp;this<br>
&nbsp;&nbsp;&nbsp;Python&nbsp;module&nbsp;is&nbsp;not&nbsp;for&nbsp;you&nbsp;and&nbsp;you&nbsp;should&nbsp;use&nbsp;the&nbsp;OpenCV<br>
&nbsp;&nbsp;&nbsp;implementation.&nbsp;With&nbsp;regard&nbsp;to&nbsp;the&nbsp;speed&nbsp;of&nbsp;execution,&nbsp;a&nbsp;pure&nbsp;Python<br>
&nbsp;&nbsp;&nbsp;module&nbsp;such&nbsp;as&nbsp;this&nbsp;cannot&nbsp;hope&nbsp;to&nbsp;compete&nbsp;with&nbsp;the&nbsp;C-based<br>
&nbsp;&nbsp;&nbsp;implementation&nbsp;in&nbsp;the&nbsp;OpenCV&nbsp;library.<br>
&nbsp;<br>
&nbsp;&nbsp;&nbsp;But&nbsp;do&nbsp;bear&nbsp;in&nbsp;mind&nbsp;that&nbsp;the&nbsp;segmentation&nbsp;produced&nbsp;by&nbsp;the&nbsp;OpenCV<br>
&nbsp;&nbsp;&nbsp;implementation&nbsp;is&nbsp;driven&nbsp;entirely&nbsp;by&nbsp;the&nbsp;user-supplied&nbsp;seeds.&nbsp;&nbsp;In&nbsp;fact,<br>
&nbsp;&nbsp;&nbsp;the&nbsp;number&nbsp;of&nbsp;image&nbsp;segments&nbsp;produced&nbsp;by&nbsp;the&nbsp;OpenCV&nbsp;algorithm&nbsp;equals&nbsp;the<br>
&nbsp;&nbsp;&nbsp;number&nbsp;of&nbsp;seeds&nbsp;supplied&nbsp;by&nbsp;the&nbsp;user&nbsp;---&nbsp;even&nbsp;when&nbsp;two&nbsp;different&nbsp;seeds<br>
&nbsp;&nbsp;&nbsp;are&nbsp;placed&nbsp;in&nbsp;the&nbsp;same&nbsp;homogeneous&nbsp;region&nbsp;of&nbsp;the&nbsp;image.<br>
&nbsp;<br>
&nbsp;&nbsp;&nbsp;On&nbsp;the&nbsp;other&nbsp;hand,&nbsp;this&nbsp;Python&nbsp;module&nbsp;will&nbsp;give&nbsp;you&nbsp;a&nbsp;watershed<br>
&nbsp;&nbsp;&nbsp;segmentation&nbsp;even&nbsp;when&nbsp;you&nbsp;do&nbsp;not&nbsp;supply&nbsp;any&nbsp;seeds&nbsp;(or,&nbsp;marks,&nbsp;as&nbsp;I<br>
&nbsp;&nbsp;&nbsp;refer&nbsp;to&nbsp;them&nbsp;in&nbsp;the&nbsp;implementation&nbsp;here).&nbsp;&nbsp;So&nbsp;you&nbsp;could&nbsp;say&nbsp;that&nbsp;the<br>
&nbsp;&nbsp;&nbsp;user&nbsp;supplied&nbsp;marks&nbsp;(seeds)&nbsp;for&nbsp;this&nbsp;Python&nbsp;module&nbsp;are&nbsp;more&nbsp;for&nbsp;the<br>
&nbsp;&nbsp;&nbsp;purpose&nbsp;of&nbsp;creating&nbsp;new&nbsp;valleys&nbsp;in&nbsp;the&nbsp;topographic&nbsp;relief&nbsp;representation<br>
&nbsp;&nbsp;&nbsp;of&nbsp;the&nbsp;gradient&nbsp;map&nbsp;than&nbsp;for&nbsp;nucleating&nbsp;the&nbsp;formation&nbsp;of&nbsp;valleys&nbsp;for&nbsp;the<br>
&nbsp;&nbsp;&nbsp;discovery&nbsp;of&nbsp;watersheds&nbsp;that&nbsp;must&nbsp;partition&nbsp;the&nbsp;image&nbsp;into&nbsp;a&nbsp;specific<br>
&nbsp;&nbsp;&nbsp;number&nbsp;of&nbsp;segments.<br>
&nbsp;&nbsp;&nbsp;<br>
&nbsp;<br>
<font size="+2" color="red">INSTALLATION:<br>
</font>&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;The&nbsp;<a href="#Watershed">Watershed</a>&nbsp;class&nbsp;was&nbsp;packaged&nbsp;using&nbsp;setuptools.&nbsp;&nbsp;For&nbsp;installation,<br>
&nbsp;&nbsp;&nbsp;&nbsp;execute&nbsp;the&nbsp;following&nbsp;command-line&nbsp;in&nbsp;the&nbsp;source&nbsp;directory&nbsp;(this&nbsp;is&nbsp;the<br>
&nbsp;&nbsp;&nbsp;&nbsp;directory&nbsp;that&nbsp;contains&nbsp;the&nbsp;setup.py&nbsp;file&nbsp;after&nbsp;you&nbsp;have&nbsp;downloaded&nbsp;and<br>
&nbsp;&nbsp;&nbsp;&nbsp;uncompressed&nbsp;the&nbsp;package):<br>
&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sudo&nbsp;python&nbsp;setup.py&nbsp;install<br>
&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;and/or,&nbsp;for&nbsp;the&nbsp;case&nbsp;of&nbsp;Python3,&nbsp;<br>
&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sudo&nbsp;python3&nbsp;setup.py&nbsp;install<br>
&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;On&nbsp;Linux&nbsp;distributions,&nbsp;this&nbsp;will&nbsp;install&nbsp;the&nbsp;module&nbsp;file&nbsp;at&nbsp;a&nbsp;location<br>
&nbsp;&nbsp;&nbsp;&nbsp;that&nbsp;looks&nbsp;like<br>
&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/usr/local/lib/python2.7/dist-packages/<br>
&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;and,&nbsp;for&nbsp;the&nbsp;case&nbsp;of&nbsp;Python3,&nbsp;at&nbsp;a&nbsp;location&nbsp;that&nbsp;looks&nbsp;like<br>
&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/usr/local/lib/python3.4/dist-packages/<br>
&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;If&nbsp;you&nbsp;do&nbsp;not&nbsp;have&nbsp;root&nbsp;access,&nbsp;you&nbsp;have&nbsp;the&nbsp;option&nbsp;of&nbsp;working&nbsp;directly<br>
&nbsp;&nbsp;&nbsp;&nbsp;off&nbsp;the&nbsp;directory&nbsp;in&nbsp;which&nbsp;you&nbsp;downloaded&nbsp;the&nbsp;software&nbsp;by&nbsp;simply<br>
&nbsp;&nbsp;&nbsp;&nbsp;placing&nbsp;the&nbsp;following&nbsp;statements&nbsp;at&nbsp;the&nbsp;top&nbsp;of&nbsp;your&nbsp;scripts&nbsp;that&nbsp;use<br>
&nbsp;&nbsp;&nbsp;&nbsp;the&nbsp;<a href="#Watershed">Watershed</a>&nbsp;class:<br>
&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;import&nbsp;sys<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sys.path.append(&nbsp;"pathname_to_Watershed_directory"&nbsp;)<br>
&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;To&nbsp;uninstall&nbsp;the&nbsp;module,&nbsp;simply&nbsp;delete&nbsp;the&nbsp;source&nbsp;directory,&nbsp;locate<br>
&nbsp;&nbsp;&nbsp;&nbsp;where&nbsp;the&nbsp;<a href="#Watershed">Watershed</a>&nbsp;module&nbsp;was&nbsp;installed&nbsp;with&nbsp;"locate&nbsp;<a href="#Watershed">Watershed</a>"&nbsp;and<br>
&nbsp;&nbsp;&nbsp;&nbsp;delete&nbsp;those&nbsp;files.&nbsp;&nbsp;As&nbsp;mentioned&nbsp;above,&nbsp;the&nbsp;full&nbsp;pathname&nbsp;to&nbsp;the<br>
&nbsp;&nbsp;&nbsp;&nbsp;installed&nbsp;version&nbsp;is&nbsp;likely&nbsp;to&nbsp;look&nbsp;like<br>
&nbsp;&nbsp;&nbsp;&nbsp;/usr/local/lib/python2.7/dist-packages/<a href="#Watershed">Watershed</a>*<br>
&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;If&nbsp;you&nbsp;want&nbsp;to&nbsp;carry&nbsp;out&nbsp;a&nbsp;non-standard&nbsp;install&nbsp;of&nbsp;the&nbsp;<a href="#Watershed">Watershed</a><br>
&nbsp;&nbsp;&nbsp;&nbsp;module,&nbsp;look&nbsp;up&nbsp;the&nbsp;on-line&nbsp;information&nbsp;on&nbsp;Disutils&nbsp;by&nbsp;pointing&nbsp;your<br>
&nbsp;&nbsp;&nbsp;&nbsp;browser&nbsp;to<br>
&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="http://docs.python.org/dist/dist.html">http://docs.python.org/dist/dist.html</a><br>
&nbsp;<br>
&nbsp;<br>
<font size="+2" color="red">USAGE:<br>
</font>&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;To&nbsp;segment&nbsp;an&nbsp;image,&nbsp;you&nbsp;would&nbsp;first&nbsp;construct&nbsp;an&nbsp;instance&nbsp;of&nbsp;the<br>
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#Watershed">Watershed</a>&nbsp;class&nbsp;and&nbsp;invoke&nbsp;the&nbsp;methods&nbsp;shown&nbsp;below&nbsp;on&nbsp;this&nbsp;instance:<br>
&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;from&nbsp;<a href="#Watershed">Watershed</a>&nbsp;import&nbsp;*<br>
&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;shed&nbsp;=&nbsp;<a href="#Watershed">Watershed</a>(<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;data_image&nbsp;=&nbsp;"orchid0001.jpg",<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;binary_or_gray_or_color&nbsp;=&nbsp;"color",<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;size_for_calculations&nbsp;=&nbsp;128,<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sigma&nbsp;=&nbsp;1,<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;gradient_threshold_as_fraction&nbsp;=&nbsp;0.1,<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;level_decimation_factor&nbsp;=&nbsp;16,<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;)<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;shed.extract_data_pixels()<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;shed.display_data_image()<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;shed.mark_image_regions_for_gradient_mods()&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#(A)<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;shed.compute_gradient_image()<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;shed.modify_gradients_with_marker_minima()&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#(B)<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;shed.compute_Z_level_sets_for_gradient_image()<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;shed.propagate_influence_zones_from_bottom_to_top_of_Z_levels()<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;shed.display_watershed()<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;shed.display_watershed_in_color()<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;shed.extract_watershed_contours()<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;shed.display_watershed_contours_in_color()<br>
&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;The&nbsp;statements&nbsp;in&nbsp;lines&nbsp;(A)&nbsp;and&nbsp;(B)&nbsp;are&nbsp;needed&nbsp;only&nbsp;for&nbsp;marker-assisted<br>
&nbsp;&nbsp;&nbsp;&nbsp;segmentation&nbsp;with&nbsp;the&nbsp;module.&nbsp;&nbsp;For&nbsp;a&nbsp;fully&nbsp;automated&nbsp;implementation&nbsp;of<br>
&nbsp;&nbsp;&nbsp;&nbsp;the&nbsp;BLM&nbsp;algorithm,&nbsp;you&nbsp;would&nbsp;need&nbsp;to&nbsp;delete&nbsp;those&nbsp;two&nbsp;statements.<br>
&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;If&nbsp;you&nbsp;just&nbsp;want&nbsp;to&nbsp;use&nbsp;this&nbsp;module&nbsp;just&nbsp;for&nbsp;demonstrating&nbsp;basic<br>
&nbsp;&nbsp;&nbsp;&nbsp;morphological&nbsp;operations&nbsp;of&nbsp;dilations&nbsp;and&nbsp;erosions,&nbsp;your&nbsp;script&nbsp;would<br>
&nbsp;&nbsp;&nbsp;&nbsp;look&nbsp;like:<br>
&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;shed&nbsp;=&nbsp;<a href="#Watershed">Watershed</a>(<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;data_image&nbsp;=&nbsp;"triangle1.jpg",&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;binary_or_gray_or_color&nbsp;=&nbsp;"binary",<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;)<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;shed.extract_data_pixels()&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;shed.display_data_image()<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;dilated_image&nbsp;=&nbsp;shed.dilate(5)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;shed.erode(dilated_image,&nbsp;5)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br>
&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;On&nbsp;the&nbsp;other&nbsp;hand,&nbsp;if&nbsp;you&nbsp;want&nbsp;to&nbsp;use&nbsp;this&nbsp;module&nbsp;to&nbsp;demonstrate<br>
&nbsp;&nbsp;&nbsp;&nbsp;distance&nbsp;mapping&nbsp;of&nbsp;a&nbsp;binary&nbsp;blob&nbsp;with&nbsp;respect&nbsp;to&nbsp;one&nbsp;or&nbsp;more&nbsp;marker<br>
&nbsp;&nbsp;&nbsp;&nbsp;blobs,&nbsp;your&nbsp;code&nbsp;is&nbsp;likely&nbsp;to&nbsp;look&nbsp;like:<br>
&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;shed&nbsp;=&nbsp;<a href="#Watershed">Watershed</a>(<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;data_image&nbsp;=&nbsp;"artpic3.jpg",<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;binary_or_gray_or_color&nbsp;=&nbsp;"binary",<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;debug&nbsp;=&nbsp;0,<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;)<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;shed.extract_data_pixels()&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;shed.display_data_image()<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;shed.connected_components("data")<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;shed.mark_blobs()<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;shed.connected_components("marks")<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;shed.dilate_mark_in_its_blob(1)<br>
&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;Note&nbsp;that&nbsp;now&nbsp;you&nbsp;must&nbsp;make&nbsp;calls&nbsp;to&nbsp;"connected_components()"&nbsp;to<br>
&nbsp;&nbsp;&nbsp;&nbsp;separate&nbsp;out&nbsp;the&nbsp;blobs&nbsp;in&nbsp;your&nbsp;input&nbsp;binary&nbsp;image,&nbsp;and&nbsp;to<br>
&nbsp;&nbsp;&nbsp;&nbsp;"mark_blobs()"&nbsp;to&nbsp;let&nbsp;a&nbsp;user&nbsp;mark&nbsp;up&nbsp;a&nbsp;blob&nbsp;for&nbsp;distance&nbsp;mapping.&nbsp;&nbsp;It<br>
&nbsp;&nbsp;&nbsp;&nbsp;is&nbsp;the&nbsp;last&nbsp;call&nbsp;shown&nbsp;above,&nbsp;to&nbsp;"dilate_mark_in_its_blob()"&nbsp;that<br>
&nbsp;&nbsp;&nbsp;&nbsp;carries&nbsp;out&nbsp;distance&nbsp;mapping&nbsp;of&nbsp;the&nbsp;chosen&nbsp;blob&nbsp;with&nbsp;respect&nbsp;to&nbsp;the<br>
&nbsp;&nbsp;&nbsp;&nbsp;mark.&nbsp;Note&nbsp;that&nbsp;this&nbsp;takes&nbsp;an&nbsp;integer&nbsp;argument&nbsp;that&nbsp;is&nbsp;supposed&nbsp;to&nbsp;be<br>
&nbsp;&nbsp;&nbsp;&nbsp;integer&nbsp;index&nbsp;of&nbsp;the&nbsp;mark.&nbsp;&nbsp;If&nbsp;you&nbsp;placed&nbsp;only&nbsp;one&nbsp;mark&nbsp;in&nbsp;the&nbsp;blob,<br>
&nbsp;&nbsp;&nbsp;&nbsp;this&nbsp;arg&nbsp;must&nbsp;be&nbsp;set&nbsp;to&nbsp;1.&nbsp;&nbsp;On&nbsp;the&nbsp;other&nbsp;hand,&nbsp;if&nbsp;you&nbsp;placed,&nbsp;say,&nbsp;two<br>
&nbsp;&nbsp;&nbsp;&nbsp;marks&nbsp;in&nbsp;a&nbsp;blob,&nbsp;then&nbsp;by&nbsp;supplying&nbsp;2&nbsp;for&nbsp;the&nbsp;argument&nbsp;you&nbsp;will&nbsp;see<br>
&nbsp;&nbsp;&nbsp;&nbsp;distance&nbsp;mapping&nbsp;with&nbsp;respect&nbsp;to&nbsp;the&nbsp;other&nbsp;mark.&nbsp;So,&nbsp;what&nbsp;you&nbsp;supply<br>
&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;the&nbsp;argument&nbsp;is&nbsp;an&nbsp;integer&nbsp;value&nbsp;between&nbsp;1&nbsp;and&nbsp;the&nbsp;number&nbsp;of&nbsp;marks<br>
&nbsp;&nbsp;&nbsp;&nbsp;you&nbsp;created.<br>
&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;If&nbsp;you&nbsp;want&nbsp;to&nbsp;demonstrate&nbsp;the&nbsp;calculation&nbsp;of&nbsp;influence&nbsp;zones&nbsp;with&nbsp;this<br>
&nbsp;&nbsp;&nbsp;&nbsp;module,&nbsp;replace&nbsp;the&nbsp;last&nbsp;statement&nbsp;in&nbsp;the&nbsp;example&nbsp;shown&nbsp;above&nbsp;with&nbsp;the<br>
&nbsp;&nbsp;&nbsp;&nbsp;statement:<br>
&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;shed.compute_influence_zones_for_marks()<br>
&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;The&nbsp;module&nbsp;also&nbsp;includes&nbsp;two&nbsp;static&nbsp;methods&nbsp;that&nbsp;allow&nbsp;you&nbsp;to&nbsp;create<br>
&nbsp;&nbsp;&nbsp;&nbsp;your&nbsp;own&nbsp;binary&nbsp;images&nbsp;for&nbsp;demonstrating&nbsp;the&nbsp;basic&nbsp;operations&nbsp;built<br>
&nbsp;&nbsp;&nbsp;&nbsp;into&nbsp;the&nbsp;module.&nbsp;&nbsp;The&nbsp;syntax&nbsp;for&nbsp;calling&nbsp;these&nbsp;method&nbsp;looks&nbsp;like:<br>
&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#Watershed">Watershed</a>.gendata("triangle",&nbsp;(100,100),&nbsp;(10,10),&nbsp;30,&nbsp;"new_triangle.jpg"&nbsp;<br>
&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#Watershed">Watershed</a>.make_binary_pic_art_nouveau("new_art_from_me")<br>
&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;The&nbsp;second&nbsp;call&nbsp;in&nbsp;particular&nbsp;allows&nbsp;you&nbsp;to&nbsp;create&nbsp;artsy&nbsp;looking&nbsp;binary<br>
&nbsp;&nbsp;&nbsp;&nbsp;blobs&nbsp;just&nbsp;by&nbsp;rapidly&nbsp;moving&nbsp;your&nbsp;mouse&nbsp;over&nbsp;the&nbsp;window&nbsp;that&nbsp;is&nbsp;shown<br>
&nbsp;&nbsp;&nbsp;&nbsp;as&nbsp;you&nbsp;keep&nbsp;your&nbsp;left&nbsp;mouse&nbsp;button&nbsp;pressed.&nbsp;&nbsp;Alternating&nbsp;clicks&nbsp;of&nbsp;the<br>
&nbsp;&nbsp;&nbsp;&nbsp;left&nbsp;mouse&nbsp;button&nbsp;start&nbsp;and&nbsp;stop&nbsp;this&nbsp;process.<br>
&nbsp;<br>
&nbsp;<br>
<font size="+2" color="red">CONSTRUCTOR&nbsp;PARAMETERS:&nbsp;<br>
</font>&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;data_image:&nbsp;The&nbsp;image&nbsp;you&nbsp;wish&nbsp;to&nbsp;segment&nbsp;as,&nbsp;say,&nbsp;a&nbsp;'.jpg'&nbsp;file<br>
&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;binary_or_gray_or_color:&nbsp;Must&nbsp;be&nbsp;set&nbsp;to&nbsp;either&nbsp;'binary',&nbsp;or&nbsp;'gray',&nbsp;or<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'color',&nbsp;as&nbsp;the&nbsp;case&nbsp;may&nbsp;be.&nbsp;&nbsp;A&nbsp;binary&nbsp;image&nbsp;is<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;thresholded&nbsp;after&nbsp;it&nbsp;is&nbsp;loaded&nbsp;in&nbsp;to&nbsp;produce&nbsp;binary<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pixels.&nbsp;&nbsp;And&nbsp;a&nbsp;color&nbsp;image&nbsp;is&nbsp;converted&nbsp;into&nbsp;a&nbsp;grayscale<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;image&nbsp;before&nbsp;the&nbsp;application&nbsp;of&nbsp;the&nbsp;watershed&nbsp;algorithm.<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Ordinarily,&nbsp;you&nbsp;would&nbsp;want&nbsp;to&nbsp;use&nbsp;binary&nbsp;images&nbsp;just&nbsp;for<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;demonstrating&nbsp;the&nbsp;dilation,&nbsp;erosion,&nbsp;distance&nbsp;mapping,<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;IZ&nbsp;calculation,&nbsp;and&nbsp;geodesic&nbsp;skeleton&nbsp;calculation<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;capabilities&nbsp;of&nbsp;this&nbsp;module.<br>
&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;size_for_calculations:&nbsp;If&nbsp;the&nbsp;larger&nbsp;of&nbsp;the&nbsp;two&nbsp;image&nbsp;dimensions&nbsp;is<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;greater&nbsp;than&nbsp;this&nbsp;number,&nbsp;the&nbsp;image&nbsp;is&nbsp;reduced&nbsp;in&nbsp;size<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;so&nbsp;that&nbsp;its&nbsp;larger&nbsp;dimension&nbsp;corresponds&nbsp;to&nbsp;the&nbsp;number<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;supplied&nbsp;through&nbsp;this&nbsp;parameter.&nbsp;As&nbsp;you&nbsp;would&nbsp;expect,<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;the&nbsp;smaller&nbsp;this&nbsp;parameter,&nbsp;the&nbsp;faster&nbsp;your&nbsp;results.<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;The&nbsp;default&nbsp;for&nbsp;this&nbsp;parameter&nbsp;is&nbsp;128.<br>
&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;sigma:&nbsp;Controls&nbsp;the&nbsp;size&nbsp;of&nbsp;the&nbsp;Gaussian&nbsp;kernel&nbsp;used&nbsp;for&nbsp;smoothing&nbsp;the<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;image&nbsp;before&nbsp;its&nbsp;gradient&nbsp;is&nbsp;calculated.&nbsp;&nbsp;Assuming&nbsp;the<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pixel&nbsp;sampling&nbsp;interval&nbsp;to&nbsp;be&nbsp;unity,&nbsp;a&nbsp;sigma&nbsp;of&nbsp;1&nbsp;gives<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;you&nbsp;a&nbsp;7x7&nbsp;smoothing&nbsp;operator&nbsp;with&nbsp;Gaussian&nbsp;weighting.<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;The&nbsp;default&nbsp;for&nbsp;this&nbsp;parameter&nbsp;is&nbsp;1.<br>
&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;gradient_threshold_as_fraction:&nbsp;This&nbsp;parameter&nbsp;when&nbsp;set&nbsp;allows&nbsp;the<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;system&nbsp;to&nbsp;ignore&nbsp;small&nbsp;gradients&nbsp;in&nbsp;the&nbsp;image.&nbsp;&nbsp;Note<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;that&nbsp;the&nbsp;gradient&nbsp;values&nbsp;are&nbsp;normalized&nbsp;to&nbsp;be&nbsp;between&nbsp;0<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;and&nbsp;255,&nbsp;both&nbsp;ends&nbsp;inclusive.&nbsp;&nbsp;The&nbsp;default&nbsp;for&nbsp;this<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;parameter&nbsp;is&nbsp;0.1.<br>
&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;level_decimation_factor:&nbsp;This&nbsp;factor&nbsp;controls&nbsp;the&nbsp;number&nbsp;of&nbsp;levels&nbsp;of<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;the&nbsp;gradient&nbsp;that&nbsp;are&nbsp;subject&nbsp;to&nbsp;watershed&nbsp;calculations.<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Recall&nbsp;that&nbsp;the&nbsp;image&nbsp;gradient&nbsp;is&nbsp;normalized&nbsp;to&nbsp;values<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;between&nbsp;0&nbsp;and&nbsp;255.&nbsp;&nbsp;If&nbsp;you&nbsp;set&nbsp;level_decimation_factor<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;to&nbsp;8,&nbsp;only&nbsp;every&nbsp;8th&nbsp;gradient&nbsp;level&nbsp;will&nbsp;be&nbsp;considered<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;the&nbsp;flooding&nbsp;calculations.&nbsp;&nbsp;That&nbsp;is,&nbsp;with<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;level_decimation_factor&nbsp;set&nbsp;to&nbsp;8,&nbsp;you&nbsp;will&nbsp;have&nbsp;a&nbsp;total<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;of&nbsp;32&nbsp;levels&nbsp;of&nbsp;the&nbsp;gradient&nbsp;for&nbsp;the&nbsp;discovery&nbsp;of&nbsp;the<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;watersheds.<br>
&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;max_gradient_to_be_reached_as_fraction:&nbsp;This&nbsp;parameter&nbsp;is&nbsp;useful&nbsp;for<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;debugging&nbsp;purposes.&nbsp;&nbsp;When&nbsp;set&nbsp;to,&nbsp;say,&nbsp;0.5,&nbsp;it&nbsp;will&nbsp;stop<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;the&nbsp;rising&nbsp;flood&nbsp;at&nbsp;half&nbsp;of&nbsp;the&nbsp;maximum&nbsp;value&nbsp;for&nbsp;image<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;gradient.&nbsp;&nbsp;So&nbsp;by&nbsp;setting&nbsp;this&nbsp;parameter&nbsp;to&nbsp;a&nbsp;small<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;value,&nbsp;you&nbsp;can&nbsp;carry&nbsp;out&nbsp;a&nbsp;more&nbsp;detailed&nbsp;examination&nbsp;of<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;the&nbsp;propagation&nbsp;of&nbsp;the&nbsp;influence&nbsp;zones&nbsp;from&nbsp;one&nbsp;level&nbsp;to<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;the&nbsp;next.<br>
&nbsp;<br>
&nbsp;<br>
<font size="+2" color="red">PUBLIC&nbsp;METHODS:<br>
</font>&nbsp;<br>
&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;(1)&nbsp;&nbsp;compute_LoG_image()<br>
&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;This&nbsp;method&nbsp;computes&nbsp;the&nbsp;Laplacian-of-Gaussian&nbsp;(LoG)&nbsp;of&nbsp;an&nbsp;image.<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;The&nbsp;LoG&nbsp;image&nbsp;is&nbsp;calculated&nbsp;as&nbsp;the&nbsp;difference&nbsp;of&nbsp;two<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Gaussian-smoothed&nbsp;versions&nbsp;of&nbsp;the&nbsp;input&nbsp;image&nbsp;at&nbsp;two&nbsp;slightly<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;difference&nbsp;scales.&nbsp;&nbsp;The&nbsp;LoG&nbsp;itself&nbsp;is&nbsp;NOT&nbsp;used&nbsp;in&nbsp;watershed<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;calculations.<br>
&nbsp;<br>
&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;(2)&nbsp;&nbsp;compute_Z_level_sets_for_gradient_image()<br>
&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;This&nbsp;method&nbsp;computes&nbsp;the&nbsp;Z&nbsp;levels&nbsp;for&nbsp;the&nbsp;BLM&nbsp;watershed&nbsp;algorithm.<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;A&nbsp;pixel&nbsp;belongs&nbsp;to&nbsp;a&nbsp;specified&nbsp;Z&nbsp;level&nbsp;if&nbsp;the&nbsp;value&nbsp;of&nbsp;the&nbsp;image<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;gradient&nbsp;at&nbsp;the&nbsp;pixel&nbsp;is&nbsp;less&nbsp;than&nbsp;or&nbsp;equal&nbsp;to&nbsp;that&nbsp;level.<br>
&nbsp;<br>
&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;(3)&nbsp;&nbsp;connected_components(arg)<br>
&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;where&nbsp;'arg'&nbsp;is&nbsp;the&nbsp;string&nbsp;"data"&nbsp;if&nbsp;you&nbsp;want&nbsp;to&nbsp;carry&nbsp;out<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;connected-components&nbsp;labeling&nbsp;of&nbsp;binary&nbsp;blobs.&nbsp;&nbsp;When&nbsp;the&nbsp;same<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;method&nbsp;is&nbsp;called&nbsp;for&nbsp;the&nbsp;binary&nbsp;marks&nbsp;created&nbsp;by&nbsp;mouse&nbsp;clicks,&nbsp;we<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;change&nbsp;the&nbsp;value&nbsp;of&nbsp;'arg'&nbsp;to&nbsp;"marks".&nbsp;&nbsp;Obviously,&nbsp;the&nbsp;components<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;labeling&nbsp;logic&nbsp;works&nbsp;exactly&nbsp;the&nbsp;same&nbsp;in&nbsp;both&nbsp;cases.&nbsp;&nbsp;The&nbsp;only<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;differences&nbsp;are&nbsp;in&nbsp;how&nbsp;the&nbsp;labels&nbsp;are&nbsp;saved&nbsp;for&nbsp;bookkeeping<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;purposes.<br>
&nbsp;<br>
&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;(4)&nbsp;&nbsp;dilate(radius,&nbsp;shape)<br>
&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;where&nbsp;'radius'&nbsp;would&nbsp;generally&nbsp;be&nbsp;a&nbsp;small&nbsp;integer&nbsp;denoting&nbsp;the<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;radius&nbsp;of&nbsp;a&nbsp;disk&nbsp;structuring&nbsp;element&nbsp;to&nbsp;be&nbsp;used&nbsp;for&nbsp;the&nbsp;purpose&nbsp;of<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;dilating&nbsp;the&nbsp;input&nbsp;pattern.&nbsp;&nbsp;The&nbsp;parameter&nbsp;'shape'&nbsp;must&nbsp;be&nbsp;set&nbsp;to<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;either&nbsp;"square"&nbsp;or&nbsp;"circular"&nbsp;to&nbsp;specify&nbsp;the&nbsp;shape&nbsp;of&nbsp;the<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;structuring&nbsp;element.&nbsp;&nbsp;NOTE:&nbsp;This&nbsp;method&nbsp;only&nbsp;makes&nbsp;sense&nbsp;for<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;binary&nbsp;input&nbsp;images,&nbsp;since&nbsp;it&nbsp;only&nbsp;carries&nbsp;out&nbsp;binary&nbsp;dilations.<br>
&nbsp;<br>
&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;(5)&nbsp;&nbsp;dilate_mark_in_its_blob(1)<br>
&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;This&nbsp;is&nbsp;the&nbsp;method&nbsp;that&nbsp;demonstrations&nbsp;the&nbsp;distance&nbsp;mapping<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;notions&nbsp;used&nbsp;in&nbsp;this&nbsp;module.&nbsp;&nbsp;The&nbsp;module&nbsp;carries&nbsp;out&nbsp;a&nbsp;distance<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;transformation&nbsp;of&nbsp;the&nbsp;blob&nbsp;that&nbsp;the&nbsp;user&nbsp;clicked&nbsp;on&nbsp;and&nbsp;does&nbsp;so<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;with&nbsp;respect&nbsp;to&nbsp;the&nbsp;mark&nbsp;placed&nbsp;in&nbsp;the&nbsp;chosen&nbsp;blob&nbsp;when&nbsp;the&nbsp;left<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;button&nbsp;of&nbsp;the&nbsp;mouse&nbsp;was&nbsp;clicked&nbsp;in&nbsp;it.<br>
&nbsp;<br>
&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;(6)&nbsp;&nbsp;display_data_image():<br>
&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;It&nbsp;is&nbsp;always&nbsp;good&nbsp;to&nbsp;call&nbsp;this&nbsp;method&nbsp;after&nbsp;you&nbsp;have&nbsp;invoked<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"extract_data_pixels()"&nbsp;just&nbsp;to&nbsp;confirm&nbsp;the&nbsp;output&nbsp;of&nbsp;the&nbsp;data<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;extraction&nbsp;step.<br>
&nbsp;<br>
&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;(7)&nbsp;&nbsp;display_watershed()<br>
&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;This&nbsp;method&nbsp;displays&nbsp;the&nbsp;watershed&nbsp;pixels&nbsp;against&nbsp;the&nbsp;image&nbsp;that<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;was&nbsp;actually&nbsp;used&nbsp;for&nbsp;the&nbsp;application&nbsp;of&nbsp;the&nbsp;watershed&nbsp;algorithm.<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Even&nbsp;when&nbsp;the&nbsp;input&nbsp;image&nbsp;is&nbsp;in&nbsp;color,&nbsp;the&nbsp;image&nbsp;used&nbsp;for<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;calculations&nbsp;is&nbsp;a&nbsp;grayscale&nbsp;version&nbsp;of&nbsp;the&nbsp;input<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;image.&nbsp;Additionally,&nbsp;depending&nbsp;on&nbsp;the&nbsp;constructor&nbsp;parameter<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'size_for_calculations',&nbsp;the&nbsp;image&nbsp;used&nbsp;for&nbsp;calculations&nbsp;may&nbsp;also<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;be&nbsp;of&nbsp;reduced&nbsp;size.<br>
&nbsp;<br>
&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;(8)&nbsp;&nbsp;display_watershed_contours_in_color()<br>
&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;The&nbsp;boundary&nbsp;contours&nbsp;for&nbsp;the&nbsp;segmented&nbsp;regions&nbsp;of&nbsp;the&nbsp;image&nbsp;are<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;displayed&nbsp;against&nbsp;the&nbsp;original&nbsp;image&nbsp;by&nbsp;this&nbsp;method.<br>
&nbsp;<br>
&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;(9)&nbsp;&nbsp;display_watershed_in_color()<br>
&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;This&nbsp;display&nbsp;method&nbsp;shows&nbsp;the&nbsp;watershed&nbsp;pixels&nbsp;in&nbsp;color&nbsp;against<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;the&nbsp;original&nbsp;image&nbsp;supplied&nbsp;to&nbsp;the&nbsp;module&nbsp;for&nbsp;segmentation.<br>
&nbsp;<br>
&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;(10)&nbsp;erode(radius,&nbsp;shape)<br>
&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;where&nbsp;'radius'&nbsp;would&nbsp;generally&nbsp;be&nbsp;a&nbsp;small&nbsp;integer&nbsp;denoting&nbsp;the<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;radius&nbsp;of&nbsp;a&nbsp;disk&nbsp;structuring&nbsp;element&nbsp;to&nbsp;be&nbsp;used&nbsp;for&nbsp;the&nbsp;purpose&nbsp;of<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;dilating&nbsp;the&nbsp;input&nbsp;pattern.&nbsp;&nbsp;The&nbsp;parameter&nbsp;'shape'&nbsp;must&nbsp;be&nbsp;set&nbsp;to<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;either&nbsp;"square"&nbsp;or&nbsp;"circular"&nbsp;to&nbsp;specify&nbsp;the&nbsp;shape&nbsp;of&nbsp;the<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;structuring&nbsp;element.&nbsp;&nbsp;NOTE:&nbsp;This&nbsp;method&nbsp;only&nbsp;makes&nbsp;sense&nbsp;for<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;binary&nbsp;input&nbsp;images,&nbsp;since&nbsp;it&nbsp;only&nbsp;carries&nbsp;out&nbsp;binary&nbsp;dilations.<br>
&nbsp;<br>
&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;(11)&nbsp;extract_data_pixels():<br>
&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;This&nbsp;is&nbsp;the&nbsp;very&nbsp;first&nbsp;method&nbsp;you&nbsp;should&nbsp;call&nbsp;in&nbsp;all&nbsp;cases.&nbsp;&nbsp;This<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;loads&nbsp;your&nbsp;image&nbsp;into&nbsp;the&nbsp;module.&nbsp;If&nbsp;you&nbsp;declared&nbsp;your&nbsp;input&nbsp;image<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;to&nbsp;be&nbsp;binary&nbsp;(when&nbsp;your&nbsp;image&nbsp;is&nbsp;in,&nbsp;say,&nbsp;the&nbsp;Jpeg&nbsp;format,&nbsp;the<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;actual&nbsp;pixel&nbsp;values&nbsp;will&nbsp;in&nbsp;general&nbsp;not&nbsp;be&nbsp;binary),&nbsp;the&nbsp;loaded<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;image&nbsp;is&nbsp;binarized&nbsp;by&nbsp;thresholding&nbsp;it&nbsp;in&nbsp;the&nbsp;middle&nbsp;of&nbsp;the&nbsp;gray<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;scale&nbsp;range.&nbsp;&nbsp;If&nbsp;you&nbsp;declared&nbsp;your&nbsp;input&nbsp;image&nbsp;to&nbsp;be&nbsp;color,&nbsp;it&nbsp;is<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;first&nbsp;converted&nbsp;into&nbsp;grayscale&nbsp;for&nbsp;the&nbsp;calculation&nbsp;of&nbsp;the<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;watersheds.&nbsp;&nbsp;The&nbsp;image&nbsp;may&nbsp;also&nbsp;be&nbsp;reduced&nbsp;in&nbsp;size&nbsp;if&nbsp;that&nbsp;step&nbsp;is<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;dictated&nbsp;by&nbsp;the&nbsp;value&nbsp;you&nbsp;supplied&nbsp;for&nbsp;the&nbsp;constructor&nbsp;parameter<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'size_for_calculations'.&nbsp;&nbsp;Depending&nbsp;on&nbsp;this&nbsp;parameter,&nbsp;an&nbsp;input<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;image&nbsp;declared&nbsp;to&nbsp;be&nbsp;gray&nbsp;will&nbsp;also&nbsp;be&nbsp;downsized.<br>
&nbsp;<br>
&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;(12)&nbsp;extract_watershed_contours()<br>
&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;This&nbsp;method&nbsp;extracts&nbsp;the&nbsp;watershed&nbsp;pixels&nbsp;as&nbsp;boundary&nbsp;contours<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;using&nbsp;an&nbsp;8-connected&nbsp;boundary&nbsp;following&nbsp;algorithm.<br>
&nbsp;<br>
&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;(13)&nbsp;gendata(feature,&nbsp;size_tuple,&nbsp;location_tuple,&nbsp;rotation_angle,&nbsp;filename)<br>
&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;This&nbsp;is&nbsp;a&nbsp;static&nbsp;method&nbsp;of&nbsp;the&nbsp;<a href="#Watershed">Watershed</a>&nbsp;class&nbsp;for&nbsp;the&nbsp;purpose&nbsp;of<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;generating&nbsp;binary&nbsp;images&nbsp;that&nbsp;can&nbsp;subsequently&nbsp;be&nbsp;used&nbsp;to<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;demonstrate&nbsp;basic&nbsp;morphological&nbsp;operations&nbsp;like&nbsp;dilation,&nbsp;erosion,<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;distance&nbsp;mapping,&nbsp;calculation&nbsp;of&nbsp;influence&nbsp;zones,&nbsp;calculation&nbsp;of<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;the&nbsp;geodesic&nbsp;skeletons,&nbsp;etc.&nbsp;&nbsp;The&nbsp;first&nbsp;argument,&nbsp;'feature',&nbsp;must<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;be&nbsp;set&nbsp;to&nbsp;one&nbsp;of&nbsp;the&nbsp;following:&nbsp;'line',&nbsp;'triangle',&nbsp;'rectangle',<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;and&nbsp;'broken_rectangle'.&nbsp;&nbsp;The&nbsp;parameter&nbsp;'size_tuple'&nbsp;is&nbsp;supposed&nbsp;to<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;be&nbsp;a&nbsp;tuple&nbsp;(m,n)&nbsp;for&nbsp;the&nbsp;size&nbsp;of&nbsp;the&nbsp;output&nbsp;image&nbsp;desired.&nbsp;&nbsp;The<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;parameter&nbsp;'location_tuple'&nbsp;is&nbsp;supposed&nbsp;to&nbsp;be&nbsp;a&nbsp;tuple&nbsp;(x,y)&nbsp;of<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pixel&nbsp;coordinates&nbsp;for&nbsp;specifying&nbsp;the&nbsp;position&nbsp;of&nbsp;the&nbsp;binary<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pattern&nbsp;in&nbsp;your&nbsp;image&nbsp;with&nbsp;respect&nbsp;to&nbsp;the&nbsp;center&nbsp;of&nbsp;the&nbsp;image.<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;The&nbsp;parameter&nbsp;'rotation_angle'&nbsp;is&nbsp;an&nbsp;integer&nbsp;value&nbsp;specifying&nbsp;the<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;number&nbsp;of&nbsp;degrees&nbsp;of&nbsp;clockwise&nbsp;rotation&nbsp;that&nbsp;should&nbsp;be&nbsp;applied&nbsp;to<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;the&nbsp;pattern&nbsp;with&nbsp;respect&nbsp;to&nbsp;the&nbsp;image&nbsp;coordinate&nbsp;frame.&nbsp;&nbsp;Finally,<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;the&nbsp;parameter&nbsp;'filename'&nbsp;names&nbsp;the&nbsp;file&nbsp;in&nbsp;which&nbsp;the&nbsp;binary&nbsp;image<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;will&nbsp;be&nbsp;deposited.<br>
&nbsp;<br>
&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;(14)&nbsp;make_binary_pic_art_nouveau(&nbsp;filename&nbsp;)<br>
&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;This&nbsp;static&nbsp;method&nbsp;can&nbsp;be&nbsp;used&nbsp;to&nbsp;make&nbsp;"fun"&nbsp;binary&nbsp;images&nbsp;for<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;demonstrating&nbsp;distance&nbsp;mapping&nbsp;of&nbsp;binary&nbsp;blobs,&nbsp;calculation&nbsp;of<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;influence&nbsp;zones,&nbsp;etc.&nbsp;&nbsp;This&nbsp;method&nbsp;is&nbsp;taken&nbsp;from&nbsp;Chapter&nbsp;13&nbsp;of&nbsp;my<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;book&nbsp;"Scripting&nbsp;with&nbsp;Objects".<br>
&nbsp;<br>
&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;(15)&nbsp;mark_image_regions_for_gradient_mods()<br>
&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;For&nbsp;mark-based&nbsp;segmentation&nbsp;with&nbsp;the&nbsp;BLM&nbsp;watershed&nbsp;algorithm,&nbsp;this<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;method&nbsp;elicits&nbsp;mouse&nbsp;clicks&nbsp;from&nbsp;the&nbsp;user&nbsp;that&nbsp;demarcate&nbsp;polygonal<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;regions&nbsp;in&nbsp;the&nbsp;image&nbsp;where&nbsp;the&nbsp;gradient&nbsp;should&nbsp;be&nbsp;modified&nbsp;prior<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;to&nbsp;the&nbsp;flooding&nbsp;process.&nbsp;&nbsp;The&nbsp;mouse&nbsp;clicks&nbsp;must&nbsp;be&nbsp;supplied&nbsp;in&nbsp;a<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;clockwise&nbsp;fashion&nbsp;to&nbsp;demarcate&nbsp;the&nbsp;polygonal&nbsp;regions.<br>
&nbsp;<br>
&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;(16)&nbsp;modify_gradients_with_marker_minima()<br>
&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;For&nbsp;mark-based&nbsp;application&nbsp;of&nbsp;the&nbsp;<a href="#Watershed">Watershed</a>&nbsp;algorithm,&nbsp;it&nbsp;is&nbsp;this<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;method&nbsp;that&nbsp;actually&nbsp;modifies&nbsp;the&nbsp;gradient&nbsp;image&nbsp;after&nbsp;a&nbsp;user&nbsp;has<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;defined&nbsp;the&nbsp;regions&nbsp;for&nbsp;that&nbsp;purpose&nbsp;through&nbsp;the&nbsp;mouse&nbsp;clicks<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;elicited&nbsp;by&nbsp;the&nbsp;mark_image_regions_for_gradient_mods()&nbsp;method.&nbsp;&nbsp;In<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;the&nbsp;current&nbsp;module,&nbsp;this&nbsp;modification&nbsp;simply&nbsp;consists&nbsp;of&nbsp;setting<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;the&nbsp;gradient&nbsp;values&nbsp;to&nbsp;zero&nbsp;in&nbsp;such&nbsp;regions.<br>
&nbsp;<br>
&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;(17)&nbsp;propagate_influence_zones_from_bottom_to_top_of_Z_levels()<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;This&nbsp;is&nbsp;the&nbsp;workhorse&nbsp;of&nbsp;the&nbsp;module&nbsp;for&nbsp;watershed&nbsp;based<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;segmentation&nbsp;of&nbsp;an&nbsp;image.&nbsp;&nbsp;As&nbsp;explained&nbsp;elsewhere&nbsp;in&nbsp;this<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;documentation,&nbsp;this&nbsp;method&nbsp;starts&nbsp;at&nbsp;the&nbsp;lowest&nbsp;Z&nbsp;level&nbsp;to<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;discover&nbsp;the&nbsp;lowest&nbsp;valleys&nbsp;in&nbsp;the&nbsp;topographic&nbsp;relief<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;representation&nbsp;of&nbsp;the&nbsp;image&nbsp;gradients.&nbsp;&nbsp;Subsequently,&nbsp;the&nbsp;notion<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;of&nbsp;a&nbsp;rising&nbsp;flood&nbsp;is&nbsp;simulated&nbsp;by&nbsp;calculating&nbsp;the&nbsp;influence&nbsp;zones<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(IZ)&nbsp;of&nbsp;the&nbsp;flooded&nbsp;pixels&nbsp;for&nbsp;one&nbsp;Z&nbsp;level&nbsp;in&nbsp;all&nbsp;of&nbsp;the&nbsp;pixels<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;that&nbsp;belong&nbsp;to&nbsp;the&nbsp;next&nbsp;Z&nbsp;level.&nbsp;&nbsp;The&nbsp;geodesic&nbsp;skeletons&nbsp;formed&nbsp;by<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;the&nbsp;IZs&nbsp;lead&nbsp;to&nbsp;the&nbsp;discovery&nbsp;of&nbsp;the&nbsp;watershed&nbsp;pixels&nbsp;in&nbsp;a<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;gradient&nbsp;image.<br>
&nbsp;<br>
&nbsp;<br>
<font size="+2" color="red">THE&nbsp;EXAMPLES&nbsp;DIRECTORY:<br>
</font>&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;See&nbsp;the&nbsp;Examples&nbsp;directory&nbsp;in&nbsp;the&nbsp;distribution&nbsp;for&nbsp;the&nbsp;different&nbsp;ways<br>
&nbsp;&nbsp;&nbsp;&nbsp;in&nbsp;which&nbsp;you&nbsp;can&nbsp;use&nbsp;this&nbsp;module.&nbsp;&nbsp;If&nbsp;you&nbsp;just&nbsp;want&nbsp;to&nbsp;play&nbsp;with<br>
&nbsp;&nbsp;&nbsp;&nbsp;dilate-erode&nbsp;methods&nbsp;of&nbsp;the&nbsp;module,&nbsp;execute&nbsp;the&nbsp;script<br>
&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;DilateErode.py<br>
&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;This&nbsp;script&nbsp;assumes&nbsp;a&nbsp;disk&nbsp;structuring&nbsp;element&nbsp;whose&nbsp;radius&nbsp;and&nbsp;shape<br>
&nbsp;&nbsp;&nbsp;&nbsp;are&nbsp;supplied&nbsp;as&nbsp;the&nbsp;arguments&nbsp;to&nbsp;the&nbsp;methods&nbsp;`dilate(radius,shape)'&nbsp;and<br>
&nbsp;&nbsp;&nbsp;&nbsp;`erode(radius,shape)'.&nbsp;&nbsp;To&nbsp;demonstrate&nbsp;the&nbsp;usefulness&nbsp;of&nbsp;these<br>
&nbsp;&nbsp;&nbsp;&nbsp;operations&nbsp;for&nbsp;"repairing"&nbsp;breaks&nbsp;in&nbsp;edges,&nbsp;execute&nbsp;the&nbsp;script<br>
&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;EdgeRepair.py<br>
&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;If&nbsp;you&nbsp;want&nbsp;to&nbsp;play&nbsp;with&nbsp;the&nbsp;distance&nbsp;mapping&nbsp;code&nbsp;in&nbsp;the&nbsp;module,<br>
&nbsp;&nbsp;&nbsp;&nbsp;execute&nbsp;the&nbsp;script:<br>
&nbsp;&nbsp;&nbsp;&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;DistanceMapping.py<br>
&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;This&nbsp;script&nbsp;will&nbsp;ask&nbsp;you&nbsp;to&nbsp;place&nbsp;a&nbsp;mark&nbsp;with&nbsp;a&nbsp;mouse&nbsp;click&nbsp;in&nbsp;one&nbsp;of<br>
&nbsp;&nbsp;&nbsp;&nbsp;the&nbsp;blobs&nbsp;in&nbsp;your&nbsp;binary&nbsp;image.&nbsp;&nbsp;Subsequently,&nbsp;it&nbsp;will&nbsp;display&nbsp;a<br>
&nbsp;&nbsp;&nbsp;&nbsp;distance&nbsp;map&nbsp;of&nbsp;the&nbsp;blob&nbsp;with&nbsp;respect&nbsp;to&nbsp;that&nbsp;mark.&nbsp;&nbsp;For&nbsp;a<br>
&nbsp;&nbsp;&nbsp;&nbsp;demonstration&nbsp;that&nbsp;involves&nbsp;more&nbsp;complex&nbsp;blobs&nbsp;---&nbsp;these&nbsp;being&nbsp;blobs<br>
&nbsp;&nbsp;&nbsp;&nbsp;with&nbsp;holes&nbsp;in&nbsp;them&nbsp;---&nbsp;execute&nbsp;the&nbsp;script<br>
&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;DistanceMapping2.py<br>
&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;For&nbsp;a&nbsp;demonstration&nbsp;of&nbsp;the&nbsp;calculation&nbsp;of&nbsp;the&nbsp;influence&nbsp;zones&nbsp;(IZ)&nbsp;in&nbsp;a<br>
&nbsp;&nbsp;&nbsp;&nbsp;binary&nbsp;blob,&nbsp;execute&nbsp;the&nbsp;script<br>
&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;InfluenceZones.py<br>
&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;For&nbsp;a&nbsp;visually&nbsp;interesting&nbsp;demonstration&nbsp;of&nbsp;IZ&nbsp;calculation,&nbsp;you&nbsp;must<br>
&nbsp;&nbsp;&nbsp;&nbsp;place&nbsp;at&nbsp;least&nbsp;two&nbsp;marks&nbsp;inside&nbsp;a&nbsp;blob.&nbsp;&nbsp;Each&nbsp;mark&nbsp;is&nbsp;dilated&nbsp;into&nbsp;its<br>
&nbsp;&nbsp;&nbsp;&nbsp;IZ&nbsp;and&nbsp;the&nbsp;boundaries&nbsp;between&nbsp;the&nbsp;IZs&nbsp;constitute&nbsp;the&nbsp;geodesic&nbsp;skeleton<br>
&nbsp;&nbsp;&nbsp;&nbsp;of&nbsp;the&nbsp;binary&nbsp;blob&nbsp;with&nbsp;respect&nbsp;to&nbsp;the&nbsp;marks&nbsp;placed&nbsp;in&nbsp;the&nbsp;blob.<br>
&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;All&nbsp;of&nbsp;the&nbsp;scripts&nbsp;mentioned&nbsp;above&nbsp;run&nbsp;on&nbsp;binary&nbsp;image&nbsp;files.&nbsp;&nbsp;As&nbsp;a<br>
&nbsp;&nbsp;&nbsp;&nbsp;first&nbsp;demonstration&nbsp;involving&nbsp;grayscale&nbsp;or&nbsp;color&nbsp;images,&nbsp;execute&nbsp;the<br>
&nbsp;&nbsp;&nbsp;&nbsp;script<br>
&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;LoG.py<br>
&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;that&nbsp;calculates&nbsp;the&nbsp;Laplacian-of-Gaussian&nbsp;of&nbsp;an&nbsp;image.&nbsp;&nbsp;The&nbsp;LoG&nbsp;is<br>
&nbsp;&nbsp;&nbsp;&nbsp;calculated&nbsp;by&nbsp;taking&nbsp;a&nbsp;difference&nbsp;of&nbsp;two&nbsp;Gaussian-smoothed&nbsp;images&nbsp;with<br>
&nbsp;&nbsp;&nbsp;&nbsp;two&nbsp;different&nbsp;values&nbsp;of&nbsp;sigma.&nbsp;&nbsp;The&nbsp;first&nbsp;Gaussian&nbsp;smoothed&nbsp;image&nbsp;is<br>
&nbsp;&nbsp;&nbsp;&nbsp;calculated&nbsp;with&nbsp;the&nbsp;sigma&nbsp;as&nbsp;set&nbsp;in&nbsp;the&nbsp;constructor&nbsp;and&nbsp;the&nbsp;second&nbsp;with<br>
&nbsp;&nbsp;&nbsp;&nbsp;a&nbsp;sigma&nbsp;that&nbsp;is&nbsp;20%&nbsp;larger.<br>
&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;To&nbsp;see&nbsp;the&nbsp;watershed&nbsp;segmentation&nbsp;of&nbsp;an&nbsp;image&nbsp;that&nbsp;does&nbsp;NOT&nbsp;involve&nbsp;any<br>
&nbsp;&nbsp;&nbsp;&nbsp;user&nbsp;interaction,&nbsp;execute&nbsp;the&nbsp;script:<br>
&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;WatershedSegmentationWith_no_Marks.py<br>
&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;As&nbsp;you&nbsp;will&nbsp;notice,&nbsp;when&nbsp;there&nbsp;is&nbsp;no&nbsp;help&nbsp;from&nbsp;the&nbsp;user,&nbsp;the&nbsp;watershed<br>
&nbsp;&nbsp;&nbsp;&nbsp;algorithm&nbsp;over-segments&nbsp;the&nbsp;image.&nbsp;&nbsp;For&nbsp;an&nbsp;example&nbsp;of&nbsp;the&nbsp;segmentation<br>
&nbsp;&nbsp;&nbsp;&nbsp;produced&nbsp;by&nbsp;this&nbsp;script,&nbsp;for&nbsp;the&nbsp;following&nbsp;image<br>
&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;orchid0001.jpg<br>
&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;of&nbsp;an&nbsp;orchid,&nbsp;the&nbsp;script&nbsp;produced&nbsp;the&nbsp;segmentation&nbsp;shown&nbsp;in<br>
&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;_output_segmentation_for_orchid_with_no_marks.jpg<br>
&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;Now&nbsp;execute&nbsp;the&nbsp;following&nbsp;script<br>
&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;WatershedSegmentationWithMarks.py<br>
&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;that&nbsp;first&nbsp;elicits&nbsp;from&nbsp;the&nbsp;user&nbsp;a&nbsp;delineation&nbsp;of&nbsp;polygonal&nbsp;regions&nbsp;in<br>
&nbsp;&nbsp;&nbsp;&nbsp;the&nbsp;image&nbsp;that&nbsp;should&nbsp;be&nbsp;subject&nbsp;to&nbsp;gradient&nbsp;modification.&nbsp;&nbsp;For&nbsp;the<br>
&nbsp;&nbsp;&nbsp;&nbsp;same&nbsp;orchid&nbsp;image,&nbsp;the&nbsp;segmentation&nbsp;produced&nbsp;is&nbsp;shown&nbsp;in&nbsp;the&nbsp;following<br>
&nbsp;&nbsp;&nbsp;&nbsp;image<br>
&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;_output_segmentation_for_orchid_with_marks.jpg<br>
&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;The&nbsp;marks&nbsp;that&nbsp;were&nbsp;used&nbsp;for&nbsp;this&nbsp;segmentation&nbsp;are&nbsp;shown&nbsp;in<br>
&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;_composite_image_with_all_marks_orchid0001.jpg<br>
&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;The&nbsp;following&nbsp;three&nbsp;images&nbsp;show&nbsp;another&nbsp;example&nbsp;of&nbsp;watershed<br>
&nbsp;&nbsp;&nbsp;&nbsp;segmentation&nbsp;without&nbsp;and&nbsp;with&nbsp;marks:<br>
&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;_output_segmentation_for_stacey_with_no_marks.jpg<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;_output_segmentation_for_stacey_with_marks.jpg<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;_composite_image_with_all_marks_stacey_in_peru.jpg<br>
&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;Finally,&nbsp;if&nbsp;you&nbsp;want&nbsp;to&nbsp;create&nbsp;your&nbsp;own&nbsp;binary&nbsp;images&nbsp;for&nbsp;some&nbsp;of&nbsp;the<br>
&nbsp;&nbsp;&nbsp;&nbsp;scripts&nbsp;mentioned&nbsp;above,&nbsp;execute&nbsp;the&nbsp;script<br>
&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;DataGen.py<br>
&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;Do&nbsp;not&nbsp;forget&nbsp;to&nbsp;execute&nbsp;the&nbsp;script<br>
&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cleanup.py<br>
&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;in&nbsp;the&nbsp;Examples&nbsp;directory&nbsp;after&nbsp;running&nbsp;the&nbsp;scripts&nbsp;mentioned&nbsp;above&nbsp;to<br>
&nbsp;&nbsp;&nbsp;&nbsp;cleanup&nbsp;the&nbsp;intermediate&nbsp;images&nbsp;created&nbsp;by&nbsp;the&nbsp;scripts.&nbsp;&nbsp;Ordinarily,<br>
&nbsp;&nbsp;&nbsp;&nbsp;the&nbsp;destructor&nbsp;of&nbsp;the&nbsp;class&nbsp;would&nbsp;take&nbsp;care&nbsp;of&nbsp;such&nbsp;cleanup.&nbsp;&nbsp;But<br>
&nbsp;&nbsp;&nbsp;&nbsp;depending&nbsp;on&nbsp;how&nbsp;you&nbsp;exit&nbsp;the&nbsp;module,&nbsp;that&nbsp;may&nbsp;not&nbsp;always&nbsp;happen.<br>
&nbsp;<br>
&nbsp;<br>
<font size="+2" color="red">CAVEATS:<br>
</font>&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;As&nbsp;mentioned&nbsp;earlier,&nbsp;this&nbsp;module&nbsp;is&nbsp;NOT&nbsp;meant&nbsp;for&nbsp;production&nbsp;work&nbsp;---<br>
&nbsp;&nbsp;&nbsp;&nbsp;meaning&nbsp;situations&nbsp;where&nbsp;the&nbsp;primary&nbsp;goal&nbsp;is&nbsp;just&nbsp;to&nbsp;get&nbsp;good-quality<br>
&nbsp;&nbsp;&nbsp;&nbsp;segmentations&nbsp;quickly&nbsp;based&nbsp;solely&nbsp;on&nbsp;user-supplied&nbsp;seeds.&nbsp;&nbsp;For&nbsp;that<br>
&nbsp;&nbsp;&nbsp;&nbsp;type&nbsp;of&nbsp;work,&nbsp;you&nbsp;should&nbsp;use&nbsp;the&nbsp;OpenCV&nbsp;implementation.&nbsp;&nbsp;Being&nbsp;pure<br>
&nbsp;&nbsp;&nbsp;&nbsp;Python,&nbsp;this&nbsp;module&nbsp;is&nbsp;slow&nbsp;compared&nbsp;to&nbsp;the&nbsp;OpenCV&nbsp;implementation.<br>
&nbsp;&nbsp;&nbsp;&nbsp;However,&nbsp;in&nbsp;my&nbsp;opinion,&nbsp;this&nbsp;module&nbsp;makes&nbsp;it&nbsp;easier&nbsp;to&nbsp;experiment&nbsp;with<br>
&nbsp;&nbsp;&nbsp;&nbsp;different&nbsp;approaches&nbsp;for&nbsp;implementing&nbsp;the&nbsp;various&nbsp;steps&nbsp;that&nbsp;go&nbsp;into<br>
&nbsp;&nbsp;&nbsp;&nbsp;the&nbsp;BLM&nbsp;algorithm&nbsp;for&nbsp;a&nbsp;watershed&nbsp;based&nbsp;segmentation&nbsp;of&nbsp;images.<br>
&nbsp;<br>
&nbsp;<br>
<font size="+2" color="red">BUGS:<br>
</font>&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;Please&nbsp;notify&nbsp;the&nbsp;author&nbsp;if&nbsp;you&nbsp;encounter&nbsp;any&nbsp;bugs.&nbsp;&nbsp;When&nbsp;sending<br>
&nbsp;&nbsp;&nbsp;&nbsp;email,&nbsp;please&nbsp;place&nbsp;the&nbsp;string&nbsp;'<a href="#Watershed">Watershed</a>'&nbsp;in&nbsp;the&nbsp;subject&nbsp;line&nbsp;to&nbsp;get<br>
&nbsp;&nbsp;&nbsp;&nbsp;past&nbsp;the&nbsp;author's&nbsp;spam&nbsp;filter.<br>
&nbsp;<br>
&nbsp;<br>
<font size="+2" color="red">AUTHOR:<br>
</font>&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;Avinash&nbsp;Kak,&nbsp;kak@purdue.edu<br>
&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;If&nbsp;you&nbsp;send&nbsp;email,&nbsp;please&nbsp;place&nbsp;the&nbsp;string&nbsp;"<a href="#Watershed">Watershed</a>"&nbsp;in&nbsp;your&nbsp;subject<br>
&nbsp;&nbsp;&nbsp;&nbsp;line&nbsp;to&nbsp;get&nbsp;past&nbsp;my&nbsp;spam&nbsp;filter.<br>
&nbsp;<br>
&nbsp;<br>
<font size="+2" color="red">COPYRIGHT:<br>
</font>&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;Python&nbsp;Software&nbsp;Foundation&nbsp;License<br>
&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;Copyright&nbsp;2015&nbsp;Avinash&nbsp;Kak</tt>
<p>
<table width="100%" cellspacing=0 cellpadding=2 border=0 summary="section">
<tr bgcolor="#aa55cc">
<td colspan=3 valign=bottom>&nbsp;<br>
<font color="#ffffff" face="helvetica, arial"><big><strong>Imported Modules</strong></big></font></td></tr>
    
<tr><td bgcolor="#aa55cc"><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</tt></td><td>&nbsp;</td>
<td width="100%"><table width="100%" summary="list"><tr><td width="25%" valign=top><a href="PIL.Image.html">PIL.Image</a><br>
<a href="PIL.ImageDraw.html">PIL.ImageDraw</a><br>
<a href="PIL.ImageTk.html">PIL.ImageTk</a><br>
</td><td width="25%" valign=top><a href="Tkinter.html">Tkinter</a><br>
<a href="functools.html">functools</a><br>
<a href="glob.html">glob</a><br>
</td><td width="25%" valign=top><a href="math.html">math</a><br>
<a href="numpy.html">numpy</a><br>
<a href="os.html">os</a><br>
</td><td width="25%" valign=top><a href="sys.html">sys</a><br>
</td></tr></table></td></tr></table><p>
<table width="100%" cellspacing=0 cellpadding=2 border=0 summary="section">
<tr bgcolor="#ee77aa">
<td colspan=3 valign=bottom>&nbsp;<br>
<font color="#ffffff" face="helvetica, arial"><big><strong>Classes</strong></big></font></td></tr>
    
<tr><td bgcolor="#ee77aa"><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</tt></td><td>&nbsp;</td>
<td width="100%"><dl>
<dt><font face="helvetica, arial"><a href="__builtin__.html#object">__builtin__.object</a>
</font></dt><dd>
<dl>
<dt><font face="helvetica, arial"><a href="Watershed.html#Watershed">Watershed</a>
</font></dt></dl>
</dd>
</dl>
 <p>
<table width="100%" cellspacing=0 cellpadding=2 border=0 summary="section">
<tr bgcolor="#ffc8d8">
<td colspan=3 valign=bottom>&nbsp;<br>
<font color="#000000" face="helvetica, arial"><a name="Watershed">class <strong>Watershed</strong></a>(<a href="__builtin__.html#object">__builtin__.object</a>)</font></td></tr>
    
<tr><td bgcolor="#ffc8d8"><tt>&nbsp;&nbsp;&nbsp;</tt></td><td>&nbsp;</td>
<td width="100%">Methods defined here:<br>
<dl><dt><a name="Watershed-__del__"><strong>__del__</strong></a>(self)</dt></dl>

<dl><dt><a name="Watershed-__init__"><strong>__init__</strong></a>(self, *args, **kwargs)</dt></dl>

<dl><dt><a name="Watershed-compute_LoG_image"><strong>compute_LoG_image</strong></a>(self)</dt><dd><tt>This&nbsp;method&nbsp;computes&nbsp;the&nbsp;Laplacian-of-Gaussian&nbsp;(LoG)&nbsp;of&nbsp;an&nbsp;image.&nbsp;The&nbsp;LoG&nbsp;is&nbsp;<br>
calculated&nbsp;as&nbsp;the&nbsp;difference&nbsp;of&nbsp;two&nbsp;Gaussian-smoothed&nbsp;versions&nbsp;of&nbsp;the&nbsp;input&nbsp;<br>
image&nbsp;at&nbsp;two&nbsp;slightly&nbsp;difference&nbsp;scales.&nbsp;&nbsp;The&nbsp;LoG&nbsp;itself&nbsp;is&nbsp;NOT&nbsp;used&nbsp;in&nbsp;<br>
watershed&nbsp;calculations.</tt></dd></dl>

<dl><dt><a name="Watershed-compute_Z_level_sets_for_gradient_image"><strong>compute_Z_level_sets_for_gradient_image</strong></a>(self)</dt><dd><tt>For&nbsp;any&nbsp;value&nbsp;of&nbsp;n&nbsp;between&nbsp;0&nbsp;and&nbsp;255,&nbsp;both&nbsp;ends&nbsp;inclusive,&nbsp;a&nbsp;pixel&nbsp;is&nbsp;in&nbsp;the<br>
set&nbsp;Z_n&nbsp;if&nbsp;the&nbsp;gradient&nbsp;value&nbsp;at&nbsp;that&nbsp;pixel&nbsp;is&nbsp;less&nbsp;than&nbsp;or&nbsp;equal&nbsp;to&nbsp;n.&nbsp;&nbsp;Note<br>
that&nbsp;the&nbsp;gradient&nbsp;values&nbsp;are&nbsp;normalized&nbsp;to&nbsp;be&nbsp;between&nbsp;0&nbsp;and&nbsp;255.</tt></dd></dl>

<dl><dt><a name="Watershed-compute_gradient_image"><strong>compute_gradient_image</strong></a>(self)</dt><dd><tt>The&nbsp;<a href="#Watershed">Watershed</a>&nbsp;algorithm&nbsp;is&nbsp;applied&nbsp;to&nbsp;the&nbsp;gradient&nbsp;of&nbsp;the&nbsp;input&nbsp;image.&nbsp;&nbsp;This<br>
method&nbsp;computes&nbsp;the&nbsp;gradient&nbsp;image.&nbsp;&nbsp;The&nbsp;gradient&nbsp;calculation&nbsp;is&nbsp;carried&nbsp;out<br>
after&nbsp;the&nbsp;image&nbsp;is&nbsp;smoothed&nbsp;with&nbsp;a&nbsp;Gaussian&nbsp;kernel&nbsp;whose&nbsp;sigma&nbsp;is&nbsp;set&nbsp;in&nbsp;the<br>
constructor.</tt></dd></dl>

<dl><dt><a name="Watershed-compute_influence_zones_for_marks"><strong>compute_influence_zones_for_marks</strong></a>(self)</dt><dd><tt>Calculates&nbsp;the&nbsp;influence&nbsp;zones&nbsp;in&nbsp;a&nbsp;binary&nbsp;blob&nbsp;with&nbsp;respect&nbsp;to&nbsp;the&nbsp;marks<br>
placed&nbsp;inside&nbsp;the&nbsp;blob.&nbsp;&nbsp;The&nbsp;method&nbsp;also&nbsp;identifies&nbsp;the&nbsp;pixels&nbsp;at&nbsp;the<br>
geodesic&nbsp;skeleton&nbsp;formed&nbsp;by&nbsp;the&nbsp;influence&nbsp;zones.</tt></dd></dl>

<dl><dt><a name="Watershed-connected_components"><strong>connected_components</strong></a>(self, data_or_marks)</dt><dd><tt>This&nbsp;method&nbsp;is&nbsp;the&nbsp;basic&nbsp;connected&nbsp;components&nbsp;algorithm&nbsp;in&nbsp;the&nbsp;<a href="#Watershed">Watershed</a><br>
module.&nbsp;&nbsp;Just&nbsp;for&nbsp;programming&nbsp;convenience&nbsp;related&nbsp;to&nbsp;the&nbsp;I/O&nbsp;from&nbsp;this<br>
method,&nbsp;I&nbsp;have&nbsp;made&nbsp;a&nbsp;distinction&nbsp;between&nbsp;carrying&nbsp;out&nbsp;a&nbsp;connected-components<br>
labeling&nbsp;of&nbsp;a&nbsp;binary&nbsp;image&nbsp;and&nbsp;doing&nbsp;the&nbsp;same&nbsp;for&nbsp;a&nbsp;binary&nbsp;pattern&nbsp;that<br>
contains&nbsp;all&nbsp;of&nbsp;the&nbsp;marks&nbsp;made&nbsp;by&nbsp;the&nbsp;user.</tt></dd></dl>

<dl><dt><a name="Watershed-dilate"><strong>dilate</strong></a>(self, structuring_element_rad, structuring_ele_shape)</dt><dd><tt>This&nbsp;is&nbsp;to&nbsp;just&nbsp;demonstrate&nbsp;the&nbsp;basic&nbsp;idea&nbsp;of&nbsp;dilation&nbsp;of&nbsp;a&nbsp;binary&nbsp;pattern&nbsp;by<br>
a&nbsp;disk&nbsp;structuring&nbsp;element&nbsp;whose&nbsp;radius&nbsp;is&nbsp;supplied&nbsp;as&nbsp;the&nbsp;first<br>
argument.&nbsp;The&nbsp;precise&nbsp;shape&nbsp;of&nbsp;the&nbsp;structuring&nbsp;element,&nbsp;which&nbsp;can&nbsp;be&nbsp;either<br>
"square"&nbsp;or&nbsp;"circular",&nbsp;is&nbsp;supplied&nbsp;through&nbsp;the&nbsp;second&nbsp;argument.&nbsp;This&nbsp;method<br>
itself&nbsp;is&nbsp;NOT&nbsp;used&nbsp;in&nbsp;the&nbsp;watershed&nbsp;calculations.&nbsp;&nbsp;For&nbsp;large&nbsp;binary&nbsp;patterns,<br>
it&nbsp;would&nbsp;be&nbsp;more&nbsp;efficient&nbsp;to&nbsp;carry&nbsp;out&nbsp;the&nbsp;dilations&nbsp;only&nbsp;at&nbsp;the&nbsp;border<br>
pixels.</tt></dd></dl>

<dl><dt><a name="Watershed-dilate_mark_in_its_blob"><strong>dilate_mark_in_its_blob</strong></a>(self, mark_index)</dt><dd><tt>This&nbsp;method&nbsp;illustrates&nbsp;distance&nbsp;mapping&nbsp;of&nbsp;a&nbsp;blob&nbsp;in&nbsp;a&nbsp;binary&nbsp;image&nbsp;with<br>
respect&nbsp;to&nbsp;a&nbsp;mark&nbsp;created&nbsp;by&nbsp;clicking&nbsp;at&nbsp;a&nbsp;point&nbsp;within&nbsp;the&nbsp;blob.</tt></dd></dl>

<dl><dt><a name="Watershed-displayImage"><strong>displayImage</strong></a>(self, argimage, title<font color="#909090">=''</font>)</dt><dd><tt>Displays&nbsp;the&nbsp;argument&nbsp;image.&nbsp;&nbsp;The&nbsp;display&nbsp;stays&nbsp;on&nbsp;for&nbsp;the&nbsp;number&nbsp;of&nbsp;seconds<br>
that&nbsp;is&nbsp;the&nbsp;first&nbsp;argument&nbsp;in&nbsp;the&nbsp;call&nbsp;to&nbsp;tk.after()&nbsp;divided&nbsp;by&nbsp;1000.</tt></dd></dl>

<dl><dt><a name="Watershed-displayImage2"><strong>displayImage2</strong></a>(self, argimage, title<font color="#909090">=''</font>)</dt><dd><tt>Displays&nbsp;the&nbsp;argument&nbsp;image.&nbsp;&nbsp;The&nbsp;display&nbsp;stays&nbsp;on&nbsp;until&nbsp;the&nbsp;user&nbsp;closes&nbsp;the<br>
window.&nbsp;&nbsp;If&nbsp;you&nbsp;want&nbsp;a&nbsp;display&nbsp;that&nbsp;automatically&nbsp;shuts&nbsp;off&nbsp;after&nbsp;a&nbsp;certain<br>
number&nbsp;of&nbsp;seconds,&nbsp;use&nbsp;the&nbsp;previous&nbsp;method&nbsp;<a href="#Watershed-displayImage">displayImage</a>().</tt></dd></dl>

<dl><dt><a name="Watershed-displayImage3"><strong>displayImage3</strong></a>(self, argimage, title<font color="#909090">=''</font>)</dt><dd><tt>Displays&nbsp;the&nbsp;argument&nbsp;image.&nbsp;&nbsp;The&nbsp;display&nbsp;stays&nbsp;on&nbsp;until&nbsp;the&nbsp;user&nbsp;closes&nbsp;the<br>
window.&nbsp;&nbsp;If&nbsp;you&nbsp;want&nbsp;a&nbsp;display&nbsp;that&nbsp;automatically&nbsp;shuts&nbsp;off&nbsp;after&nbsp;a&nbsp;certain<br>
number&nbsp;of&nbsp;seconds,&nbsp;use&nbsp;the&nbsp;previous&nbsp;method&nbsp;<a href="#Watershed-displayImage">displayImage</a>().</tt></dd></dl>

<dl><dt><a name="Watershed-display_data_image"><strong>display_data_image</strong></a>(self)</dt><dd><tt>This&nbsp;is&nbsp;just&nbsp;a&nbsp;convenience&nbsp;method&nbsp;for&nbsp;displaying&nbsp;the&nbsp;image&nbsp;that&nbsp;you&nbsp;want&nbsp;to<br>
subject&nbsp;to&nbsp;watershed&nbsp;segmentation.</tt></dd></dl>

<dl><dt><a name="Watershed-display_watershed"><strong>display_watershed</strong></a>(self)</dt><dd><tt>Displays&nbsp;the&nbsp;watershed&nbsp;segmentation&nbsp;of&nbsp;the&nbsp;image&nbsp;in&nbsp;the&nbsp;grayscale&nbsp;mode.&nbsp;&nbsp;That<br>
is,&nbsp;the&nbsp;image&nbsp;shown&nbsp;is&nbsp;what&nbsp;the&nbsp;computations&nbsp;are&nbsp;carried&nbsp;out&nbsp;on&nbsp;---&nbsp;a<br>
grayscale&nbsp;version&nbsp;of&nbsp;the&nbsp;input&nbsp;image&nbsp;(assuming&nbsp;it&nbsp;was&nbsp;a&nbsp;color&nbsp;image).</tt></dd></dl>

<dl><dt><a name="Watershed-display_watershed_contours_in_color"><strong>display_watershed_contours_in_color</strong></a>(self)</dt><dd><tt>Shows&nbsp;the&nbsp;watershed&nbsp;contours&nbsp;as&nbsp;extracted&nbsp;by&nbsp;the&nbsp;<a href="#Watershed-extract_watershed_contours">extract_watershed_contours</a>()<br>
method.</tt></dd></dl>

<dl><dt><a name="Watershed-display_watershed_in_color"><strong>display_watershed_in_color</strong></a>(self)</dt><dd><tt>Displays&nbsp;the&nbsp;watershed&nbsp;segmentation&nbsp;on&nbsp;top&nbsp;of&nbsp;the&nbsp;original&nbsp;color&nbsp;image<br>
(assuming&nbsp;that&nbsp;the&nbsp;input&nbsp;image&nbsp;was&nbsp;a&nbsp;color&nbsp;image&nbsp;to&nbsp;begin&nbsp;with.)</tt></dd></dl>

<dl><dt><a name="Watershed-erode"><strong>erode</strong></a>(self, argimage, structuring_element_rad, structuring_ele_shape)</dt><dd><tt>This&nbsp;is&nbsp;to&nbsp;just&nbsp;demonstrate&nbsp;the&nbsp;basic&nbsp;idea&nbsp;of&nbsp;erosion&nbsp;of&nbsp;a&nbsp;binary&nbsp;pattern&nbsp;by<br>
a&nbsp;disk&nbsp;structuring&nbsp;element&nbsp;whose&nbsp;radius&nbsp;is&nbsp;supplied&nbsp;as&nbsp;the&nbsp;first&nbsp;argument.<br>
The&nbsp;precise&nbsp;shape&nbsp;of&nbsp;the&nbsp;structuring&nbsp;element,&nbsp;which&nbsp;can&nbsp;be&nbsp;either&nbsp;"square"&nbsp;or<br>
"circular",&nbsp;is&nbsp;supplied&nbsp;through&nbsp;the&nbsp;second&nbsp;argument.&nbsp;This&nbsp;method&nbsp;itself&nbsp;is<br>
NOT&nbsp;used&nbsp;in&nbsp;the&nbsp;watershed&nbsp;calculations.</tt></dd></dl>

<dl><dt><a name="Watershed-extract_data_pixels"><strong>extract_data_pixels</strong></a>(self)</dt><dd><tt>Gets&nbsp;the&nbsp;binary,&nbsp;grayscale,&nbsp;and&nbsp;color&nbsp;images&nbsp;ready&nbsp;for&nbsp;watershed&nbsp;processing.<br>
If&nbsp;the&nbsp;images&nbsp;are&nbsp;too&nbsp;large,&nbsp;they&nbsp;are&nbsp;reduced&nbsp;to&nbsp;the&nbsp;size&nbsp;set&nbsp;by&nbsp;the<br>
constructor.&nbsp;&nbsp;Color&nbsp;images&nbsp;are&nbsp;converted&nbsp;into&nbsp;grayscale&nbsp;images.</tt></dd></dl>

<dl><dt><a name="Watershed-extract_watershed_contours"><strong>extract_watershed_contours</strong></a>(self)</dt><dd><tt>This&nbsp;method&nbsp;uses&nbsp;the&nbsp;border&nbsp;following&nbsp;algorithm&nbsp;to&nbsp;extract&nbsp;the&nbsp;watershed<br>
contours&nbsp;from&nbsp;the&nbsp;final&nbsp;propagation&nbsp;of&nbsp;influences&nbsp;by&nbsp;the&nbsp;propagate_influences<br>
method.</tt></dd></dl>

<dl><dt><a name="Watershed-mark_blobs"><strong>mark_blobs</strong></a>(self, purpose)</dt><dd><tt>For&nbsp;demonstrations&nbsp;of&nbsp;distance&nbsp;mapping&nbsp;of&nbsp;a&nbsp;binary&nbsp;blob&nbsp;with&nbsp;respect&nbsp;to&nbsp;a<br>
marker&nbsp;blob,&nbsp;this&nbsp;method&nbsp;allows&nbsp;a&nbsp;user&nbsp;to&nbsp;both&nbsp;select&nbsp;one&nbsp;or&nbsp;more&nbsp;blobs&nbsp;in&nbsp;a<br>
binary&nbsp;image&nbsp;for&nbsp;the&nbsp;purpose&nbsp;of&nbsp;distance&nbsp;mapping&nbsp;and&nbsp;to&nbsp;also&nbsp;place&nbsp;marks&nbsp;on<br>
the&nbsp;blobs.</tt></dd></dl>

<dl><dt><a name="Watershed-mark_blobs2"><strong>mark_blobs2</strong></a>(self)</dt><dd><tt>For&nbsp;demonstrations&nbsp;of&nbsp;distance&nbsp;mapping&nbsp;of&nbsp;a&nbsp;binary&nbsp;blob&nbsp;with&nbsp;respect&nbsp;to&nbsp;a<br>
marker&nbsp;blob,&nbsp;this&nbsp;method&nbsp;allows&nbsp;a&nbsp;user&nbsp;to&nbsp;both&nbsp;select&nbsp;one&nbsp;or&nbsp;more&nbsp;blobs&nbsp;in&nbsp;a<br>
binary&nbsp;image&nbsp;for&nbsp;the&nbsp;purpose&nbsp;of&nbsp;distance&nbsp;mapping&nbsp;and&nbsp;to&nbsp;also&nbsp;place&nbsp;marks&nbsp;on<br>
the&nbsp;blobs.</tt></dd></dl>

<dl><dt><a name="Watershed-mark_blobs_no_image_scale_change"><strong>mark_blobs_no_image_scale_change</strong></a>(self)</dt><dd><tt>For&nbsp;demonstrations&nbsp;of&nbsp;distance&nbsp;mapping&nbsp;of&nbsp;a&nbsp;binary&nbsp;blob&nbsp;with&nbsp;respect&nbsp;to&nbsp;a<br>
marker&nbsp;blob,&nbsp;this&nbsp;method&nbsp;allows&nbsp;a&nbsp;user&nbsp;to&nbsp;both&nbsp;select&nbsp;one&nbsp;or&nbsp;more&nbsp;blobs&nbsp;in&nbsp;a<br>
binary&nbsp;image&nbsp;for&nbsp;the&nbsp;purpose&nbsp;of&nbsp;distance&nbsp;mapping&nbsp;and&nbsp;to&nbsp;also&nbsp;place&nbsp;marks&nbsp;on<br>
the&nbsp;blobs.</tt></dd></dl>

<dl><dt><a name="Watershed-mark_image_regions_for_gradient_mods"><strong>mark_image_regions_for_gradient_mods</strong></a>(self)</dt><dd><tt>For&nbsp;watershed&nbsp;segmentation&nbsp;that&nbsp;incorporates&nbsp;user-supplied&nbsp;modifications&nbsp;to<br>
the&nbsp;image&nbsp;gradients,&nbsp;this&nbsp;method&nbsp;allows&nbsp;a&nbsp;user&nbsp;to&nbsp;demarcate&nbsp;through&nbsp;mouse<br>
clicks&nbsp;polygonal&nbsp;regions&nbsp;where&nbsp;the&nbsp;gradient&nbsp;can&nbsp;be&nbsp;explicitly&nbsp;set&nbsp;to&nbsp;0.&nbsp;&nbsp;For<br>
each&nbsp;region&nbsp;thus&nbsp;demarcated,&nbsp;the&nbsp;mouse&nbsp;clicks&nbsp;must&nbsp;be&nbsp;supplied&nbsp;in&nbsp;a&nbsp;clockwise<br>
fashion.</tt></dd></dl>

<dl><dt><a name="Watershed-modify_gradients_with_marker_minima"><strong>modify_gradients_with_marker_minima</strong></a>(self)</dt><dd><tt>After&nbsp;a&nbsp;user&nbsp;has&nbsp;demarcated&nbsp;the&nbsp;regions&nbsp;in&nbsp;which&nbsp;the&nbsp;image&nbsp;gradients&nbsp;can&nbsp;be<br>
modified,&nbsp;this&nbsp;method&nbsp;carries&nbsp;out&nbsp;the&nbsp;gradient&nbsp;modifications.</tt></dd></dl>

<dl><dt><a name="Watershed-propagate_influence_zones_from_bottom_to_top_of_Z_levels"><strong>propagate_influence_zones_from_bottom_to_top_of_Z_levels</strong></a>(self)</dt><dd><tt>Basic&nbsp;to&nbsp;watershed&nbsp;computation&nbsp;is&nbsp;the&nbsp;calculation&nbsp;of&nbsp;influence&nbsp;zones&nbsp;of&nbsp;the<br>
connected&nbsp;components&nbsp;for&nbsp;one&nbsp;Z&nbsp;level&nbsp;in&nbsp;the&nbsp;connected&nbsp;components&nbsp;in&nbsp;the&nbsp;next<br>
Z&nbsp;level.&nbsp;&nbsp;Note&nbsp;that&nbsp;we&nbsp;stop&nbsp;at&nbsp;one&nbsp;level&nbsp;below&nbsp;the&nbsp;max&nbsp;level&nbsp;at&nbsp;which&nbsp;Z&nbsp;sets<br>
are&nbsp;known.&nbsp;&nbsp;That&nbsp;is&nbsp;because&nbsp;the&nbsp;last&nbsp;IZ&nbsp;calculation&nbsp;consists&nbsp;of&nbsp;finding&nbsp;the<br>
influence&nbsp;zones&nbsp;of&nbsp;the&nbsp;Z&nbsp;sets&nbsp;at&nbsp;the&nbsp;'self.<strong>max_grad_level</strong>-1'&nbsp;level&nbsp;in&nbsp;the&nbsp;Z<br>
sets&nbsp;at&nbsp;the&nbsp;'self.<strong>max_grad_level</strong>'&nbsp;level.</tt></dd></dl>

<hr>
Static methods defined here:<br>
<dl><dt><a name="Watershed-gendata"><strong>gendata</strong></a>(feature, imagesize, position, orientation, output_image_name)</dt><dd><tt>This&nbsp;method&nbsp;is&nbsp;useful&nbsp;for&nbsp;generating&nbsp;simple&nbsp;binary&nbsp;patterns&nbsp;for&nbsp;checking&nbsp;the<br>
validity&nbsp;of&nbsp;the&nbsp;logic&nbsp;used&nbsp;for&nbsp;dilation,&nbsp;erosion,&nbsp;IZ&nbsp;calculation,&nbsp;geodesic<br>
skeleton&nbsp;calculation,&nbsp;etc.&nbsp;&nbsp;Note&nbsp;that&nbsp;the&nbsp;permissible&nbsp;values&nbsp;for&nbsp;the<br>
'feature'&nbsp;parameter&nbsp;are:&nbsp;'line',&nbsp;'triangle',&nbsp;'rectangle',&nbsp;and<br>
'broken_rectangle'.&nbsp;&nbsp;The&nbsp;parameter&nbsp;'imagesize'&nbsp;is&nbsp;supposed&nbsp;to&nbsp;be&nbsp;a&nbsp;tuple<br>
(m,n)&nbsp;for&nbsp;the&nbsp;size&nbsp;of&nbsp;the&nbsp;output&nbsp;image&nbsp;desired.&nbsp;&nbsp;The&nbsp;parameter&nbsp;'position'&nbsp;is<br>
supposed&nbsp;to&nbsp;be&nbsp;a&nbsp;tuple&nbsp;(x,y)&nbsp;of&nbsp;pixel&nbsp;coordinates&nbsp;for&nbsp;specifying&nbsp;the&nbsp;position<br>
of&nbsp;the&nbsp;binary&nbsp;pattern&nbsp;in&nbsp;your&nbsp;image.&nbsp;&nbsp;The&nbsp;parameter&nbsp;'orientation'&nbsp;is&nbsp;an<br>
integer&nbsp;value&nbsp;specifying&nbsp;the&nbsp;number&nbsp;of&nbsp;degrees&nbsp;of&nbsp;rotation&nbsp;that&nbsp;should&nbsp;be<br>
applied&nbsp;to&nbsp;the&nbsp;pattern&nbsp;for&nbsp;a&nbsp;given&nbsp;'feature'.&nbsp;&nbsp;Note&nbsp;x&nbsp;is&nbsp;along&nbsp;the&nbsp;horizontal<br>
direction&nbsp;pointing&nbsp;to&nbsp;the&nbsp;right&nbsp;and&nbsp;y&nbsp;is&nbsp;along&nbsp;vertical&nbsp;direction&nbsp;pointing<br>
downwards.</tt></dd></dl>

<dl><dt><a name="Watershed-make_binary_pic_art_nouveau"><strong>make_binary_pic_art_nouveau</strong></a>(under_what_name)</dt><dd><tt>Can&nbsp;be&nbsp;used&nbsp;to&nbsp;make&nbsp;"fun"&nbsp;binary&nbsp;images&nbsp;for&nbsp;demonstrating&nbsp;distance&nbsp;mapping&nbsp;of<br>
binary&nbsp;blobs,&nbsp;calculation&nbsp;of&nbsp;influence&nbsp;zones,&nbsp;etc.&nbsp;&nbsp;This&nbsp;method&nbsp;is&nbsp;taken&nbsp;from<br>
Chapter&nbsp;13&nbsp;of&nbsp;my&nbsp;book&nbsp;"Scripting&nbsp;with&nbsp;Objects".</tt></dd></dl>

<hr>
Data descriptors defined here:<br>
<dl><dt><strong>__dict__</strong></dt>
<dd><tt>dictionary&nbsp;for&nbsp;instance&nbsp;variables&nbsp;(if&nbsp;defined)</tt></dd>
</dl>
<dl><dt><strong>__weakref__</strong></dt>
<dd><tt>list&nbsp;of&nbsp;weak&nbsp;references&nbsp;to&nbsp;the&nbsp;object&nbsp;(if&nbsp;defined)</tt></dd>
</dl>
<hr>
Data and other attributes defined here:<br>
<dl><dt><strong>canvas</strong> = None</dl>

<dl><dt><strong>drawEnable</strong> = 0</dl>

<dl><dt><strong>region_mark_coords</strong> = {}</dl>

<dl><dt><strong>startX</strong> = 0</dl>

<dl><dt><strong>startY</strong> = 0</dl>

</td></tr></table></td></tr></table><p>
<table width="100%" cellspacing=0 cellpadding=2 border=0 summary="section">
<tr bgcolor="#55aa55">
<td colspan=3 valign=bottom>&nbsp;<br>

  <tr><td bgcolor="#55aa55"><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</tt></td><td>&nbsp;</td>
<td width="100%"><strong>__author__</strong> = 'Avinash Kak (kak@purdue.edu)'<br>
<strong>__copyright__</strong> = '(C) 2015 Avinash Kak. Python Software Foundation.'<br>
<strong>__date__</strong> = '2015-May-22'<br>
<strong>__url__</strong> = 'https://engineering.purdue.edu/kak/distWatershed/Watershed-2.0.html'<br>
<strong>__version__</strong> = '2.0'</td></tr></table>
<table width="100%" cellspacing=0 cellpadding=2 border=0 summary="section">
<tr bgcolor="#7799ee">
<td colspan=3 valign=bottom>&nbsp;<br>
<font color="#ffffff" face="helvetica, arial"><big><strong>Author</strong></big></font></td></tr>
<tr><td bgcolor="#7799ee"><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</tt></td><td>&nbsp;</td>
<td width="100%">Avinash&nbsp;Kak&nbsp;(kak@purdue.edu)</td></tr></table>
</body></html>
