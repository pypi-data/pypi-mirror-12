<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>API &mdash; Momoko 2.2.2 documentation</title>
    
    <link rel="stylesheet" href="_static/nature.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '2.2.2',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="top" title="Momoko 2.2.2 documentation" href="index.html" />
    <link rel="prev" title="Tutorial" href="tutorial.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="tutorial.html" title="Tutorial"
             accesskey="P">previous</a> |</li>
        <li><a href="index.html">Momoko 2.2.2 documentation</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <span class="target" id="module-momoko"><span id="api"></span></span><div class="section" id="id1">
<h1>API<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h1>
<p>Classes, methods and stuff.</p>
<div class="section" id="connections">
<h2>Connections<a class="headerlink" href="#connections" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="momoko.Pool">
<em class="property">class </em><tt class="descclassname">momoko.</tt><tt class="descname">Pool</tt><big>(</big><em>dsn</em>, <em>connection_factory=None</em>, <em>cursor_factory=None</em>, <em>size=1</em>, <em>max_size=None</em>, <em>ioloop=None</em>, <em>raise_connect_errors=True</em>, <em>reconnect_interval=500</em>, <em>setsession=()</em>, <em>auto_shrink=False</em>, <em>shrink_delay=datetime.timedelta(0</em>, <em>120)</em>, <em>shrink_period=datetime.timedelta(0</em>, <em>120)</em><big>)</big><a class="headerlink" href="#momoko.Pool" title="Permalink to this definition">¶</a></dt>
<dd><p>Asynchronous conntion pool object. All its methods are
asynchronous unless stated otherwide in method description.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>dsn</strong> (<em>string</em>) &#8211; <p>A <a class="reference external" href="http://en.wikipedia.org/wiki/Data_Source_Name">Data Source Name</a> string containing one of the following values:</p>
<ul>
<li><strong>dbname</strong> - the database name</li>
<li><strong>user</strong> - user name used to authenticate</li>
<li><strong>password</strong> - password used to authenticate</li>
<li><strong>host</strong> - database host address (defaults to UNIX socket if not provided)</li>
<li><strong>port</strong> - connection port number (defaults to 5432 if not provided)</li>
</ul>
<p>Or any other parameter supported by PostgreSQL. See the PostgreSQL
documentation for a complete list of supported <a class="reference external" href="http://www.postgresql.org/docs/current/static/libpq-connect.html#LIBPQ-PQCONNECTDBPARAMS">parameters</a>.</p>
</li>
<li><strong>connection_factory</strong> &#8211; The <tt class="docutils literal"><span class="pre">connection_factory</span></tt> argument can be used to create non-standard
connections. The class returned should be a subclass of <a class="reference external" href="http://initd.org/psycopg/docs/connection.html#connection">psycopg2.extensions.connection</a>.
See <a class="reference external" href="http://initd.org/psycopg/docs/advanced.html#subclassing-cursor">Connection and cursor factories</a> for details. Defaults to <tt class="docutils literal"><span class="pre">None</span></tt>.</li>
<li><strong>cursor_factory</strong> &#8211; The <tt class="docutils literal"><span class="pre">cursor_factory</span></tt> argument can be used to return non-standart cursor class
The class returned should be a subclass of <a class="reference external" href="http://initd.org/psycopg/docs/extensions.html#psycopg2.extensions.cursor">psycopg2.extensions.cursor</a>.
See <a class="reference external" href="http://initd.org/psycopg/docs/advanced.html#subclassing-cursor">Connection and cursor factories</a> for details. Defaults to <tt class="docutils literal"><span class="pre">None</span></tt>.</li>
<li><strong>size</strong> (<em>int</em>) &#8211; Minimal number of connections to maintain. <tt class="docutils literal"><span class="pre">size</span></tt> connections will be opened
and maintained after calling <a class="reference internal" href="#momoko.Pool.connect" title="momoko.Pool.connect"><tt class="xref py py-meth docutils literal"><span class="pre">momoko.Pool.connect()</span></tt></a>.</li>
<li><strong>max_size</strong> (<em>int or None</em>) &#8211; if not <tt class="docutils literal"><span class="pre">None</span></tt>, the pool size will dynamically grow on demand up to <tt class="docutils literal"><span class="pre">max_size</span></tt>
open connections. By default the connections will still be maintained even if
when the pool load decreases. See also <tt class="docutils literal"><span class="pre">auto_shrink</span></tt> parameter.</li>
<li><strong>ioloop</strong> &#8211; Tornado IOloop instance to use. Defaults to Tornado&#8217;s <tt class="docutils literal"><span class="pre">IOLoop.instance()</span></tt>.</li>
<li><strong>raise_connect_errors</strong> (<em>bool</em>) &#8211; Whether to raise <a class="reference internal" href="#momoko.PartiallyConnectedError" title="momoko.PartiallyConnectedError"><tt class="xref py py-meth docutils literal"><span class="pre">momoko.PartiallyConnectedError()</span></tt></a> when failing to
connect to database during <a class="reference internal" href="#momoko.Pool.connect" title="momoko.Pool.connect"><tt class="xref py py-meth docutils literal"><span class="pre">momoko.Pool.connect()</span></tt></a>.</li>
<li><strong>reconnect_interval</strong> (<em>int</em>) &#8211; If database server becomes unavailable, the pool will try to reestablish
the connection. The attempt frequency is <tt class="docutils literal"><span class="pre">reconnect_interval</span></tt>
milliseconds.</li>
<li><strong>setsession</strong> (<em>list</em>) &#8211; List of intial sql commands to be executed once connection is established.
If any of the commands fails, the connection will be closed.
<strong>NOTE:</strong> The commands will be executed as one transaction block.</li>
<li><strong>auto_shrink</strong> (<em>bool</em>) &#8211; Garbage-collect idle connections. Only applicable if <tt class="docutils literal"><span class="pre">max_size</span></tt> was specified.
Nevertheless, the pool will mainatain at least <tt class="docutils literal"><span class="pre">size</span></tt> connections.</li>
<li><strong>shrink_delay</strong> (<tt class="xref py py-meth docutils literal"><span class="pre">datetime.timedelta()</span></tt>) &#8211; A connection is declared idle if it was not used for <tt class="docutils literal"><span class="pre">shrink_delay</span></tt> time period.
Idle connections will be garbage-collected if <tt class="docutils literal"><span class="pre">auto_shrink</span></tt> is set to <tt class="docutils literal"><span class="pre">True</span></tt>.</li>
<li><strong>shrink_period</strong> (<tt class="xref py py-meth docutils literal"><span class="pre">datetime.timedelta()</span></tt>) &#8211; If <tt class="docutils literal"><span class="pre">auto_shink</span></tt> is enabled, this parameter defines how the pool will check for
idle connections.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<dl class="exception">
<dt id="momoko.Pool.DatabaseNotAvailable">
<em class="property">exception </em><tt class="descname">DatabaseNotAvailable</tt><a class="headerlink" href="#momoko.Pool.DatabaseNotAvailable" title="Permalink to this definition">¶</a></dt>
<dd><p>Raised when Pool can not connect to database server</p>
</dd></dl>

<dl class="method">
<dt id="momoko.Pool.callproc">
<tt class="descclassname">Pool.</tt><tt class="descname">callproc</tt><big>(</big><em>*args</em>, <em>**kwargs</em><big>)</big><a class="headerlink" href="#momoko.Pool.callproc" title="Permalink to this definition">¶</a></dt>
<dd><p>Call a stored database procedure with the given name.</p>
<p>See <a class="reference internal" href="#momoko.Connection.callproc" title="momoko.Connection.callproc"><tt class="xref py py-meth docutils literal"><span class="pre">momoko.Connection.callproc()</span></tt></a> for documentation about the
parameters.</p>
</dd></dl>

<dl class="method">
<dt id="momoko.Pool.close">
<tt class="descclassname">Pool.</tt><tt class="descname">close</tt><big>(</big><big>)</big><a class="headerlink" href="#momoko.Pool.close" title="Permalink to this definition">¶</a></dt>
<dd><p>Close the connection pool.</p>
<p><strong>NOTE:</strong> This is a synchronous method.</p>
</dd></dl>

<dl class="method">
<dt id="momoko.Pool.connect">
<tt class="descclassname">Pool.</tt><tt class="descname">connect</tt><big>(</big><big>)</big><a class="headerlink" href="#momoko.Pool.connect" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns future that resolves to this Pool object.</p>
<p>If some connection failed to connect <em>and</em> self.raise_connect_errors
is true, raises <a class="reference internal" href="#momoko.PartiallyConnectedError" title="momoko.PartiallyConnectedError"><tt class="xref py py-meth docutils literal"><span class="pre">momoko.PartiallyConnectedError()</span></tt></a>.</p>
</dd></dl>

<dl class="method">
<dt id="momoko.Pool.execute">
<tt class="descclassname">Pool.</tt><tt class="descname">execute</tt><big>(</big><em>*args</em>, <em>**kwargs</em><big>)</big><a class="headerlink" href="#momoko.Pool.execute" title="Permalink to this definition">¶</a></dt>
<dd><p>Prepare and execute a database operation (query or command).</p>
<p>See <a class="reference internal" href="#momoko.Connection.execute" title="momoko.Connection.execute"><tt class="xref py py-meth docutils literal"><span class="pre">momoko.Connection.execute()</span></tt></a> for documentation about the
parameters.</p>
</dd></dl>

<dl class="method">
<dt id="momoko.Pool.getconn">
<tt class="descclassname">Pool.</tt><tt class="descname">getconn</tt><big>(</big><em>ping=True</em><big>)</big><a class="headerlink" href="#momoko.Pool.getconn" title="Permalink to this definition">¶</a></dt>
<dd><p>Acquire connection from the pool.</p>
<p>You can then use this connection for subsequent queries.
Just use <tt class="docutils literal"><span class="pre">connection.execute</span></tt> instead of <tt class="docutils literal"><span class="pre">Pool.execute</span></tt>.</p>
<p>Make sure to return connection to the pool by calling <a class="reference internal" href="#momoko.Pool.putconn" title="momoko.Pool.putconn"><tt class="xref py py-meth docutils literal"><span class="pre">momoko.Pool.putconn()</span></tt></a>,
otherwise the connection will remain forever busy and you&#8217;ll starve your pool.</p>
<p>Returns a future that resolves to the acquired connection object.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>ping</strong> (<em>boolean</em>) &#8211; Whether to ping the connection before returning it by executing <a class="reference internal" href="#momoko.Connection.ping" title="momoko.Connection.ping"><tt class="xref py py-meth docutils literal"><span class="pre">momoko.Connection.ping()</span></tt></a>.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="momoko.Pool.manage">
<tt class="descclassname">Pool.</tt><tt class="descname">manage</tt><big>(</big><em>*args</em>, <em>**kwds</em><big>)</big><a class="headerlink" href="#momoko.Pool.manage" title="Permalink to this definition">¶</a></dt>
<dd><p>Context manager that automatically returns connection to the pool.
You can use it instead of <a class="reference internal" href="#momoko.Pool.putconn" title="momoko.Pool.putconn"><tt class="xref py py-meth docutils literal"><span class="pre">momoko.Pool.putconn()</span></tt></a>:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">connection</span> <span class="o">=</span> <span class="k">yield</span> <span class="bp">self</span><span class="o">.</span><span class="n">db</span><span class="o">.</span><span class="n">getconn</span><span class="p">()</span>
<span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">db</span><span class="o">.</span><span class="n">manage</span><span class="p">(</span><span class="n">connection</span><span class="p">):</span>
    <span class="n">cursor</span> <span class="o">=</span> <span class="k">yield</span> <span class="n">connection</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s">&quot;BEGIN&quot;</span><span class="p">)</span>
    <span class="o">...</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="momoko.Pool.mogrify">
<tt class="descclassname">Pool.</tt><tt class="descname">mogrify</tt><big>(</big><em>*args</em>, <em>**kwargs</em><big>)</big><a class="headerlink" href="#momoko.Pool.mogrify" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a query string after arguments binding.</p>
<p><strong>NOTE:</strong> This is NOT a synchronous method (contary to <cite>momoko.Connection.mogrify</cite>)
- it asynchronously waits for available connection. For performance
reasons, its better to create dedicated <a class="reference internal" href="#momoko.Connection" title="momoko.Connection"><tt class="xref py py-meth docutils literal"><span class="pre">momoko.Connection()</span></tt></a>
object and use it directly for mogrification, this operation does not
imply any real operation on the database server.</p>
<p>See <a class="reference internal" href="#momoko.Connection.mogrify" title="momoko.Connection.mogrify"><tt class="xref py py-meth docutils literal"><span class="pre">momoko.Connection.mogrify()</span></tt></a> for documentation about the
parameters.</p>
</dd></dl>

<dl class="method">
<dt id="momoko.Pool.ping">
<tt class="descclassname">Pool.</tt><tt class="descname">ping</tt><big>(</big><big>)</big><a class="headerlink" href="#momoko.Pool.ping" title="Permalink to this definition">¶</a></dt>
<dd><p>Make sure this connection is alive by executing SELECT 1 statement -
i.e. roundtrip to the database.</p>
<p>See <a class="reference internal" href="#momoko.Connection.ping" title="momoko.Connection.ping"><tt class="xref py py-meth docutils literal"><span class="pre">momoko.Connection.ping()</span></tt></a> for documentation about the
parameters.</p>
</dd></dl>

<dl class="method">
<dt id="momoko.Pool.putconn">
<tt class="descclassname">Pool.</tt><tt class="descname">putconn</tt><big>(</big><em>connection</em><big>)</big><a class="headerlink" href="#momoko.Pool.putconn" title="Permalink to this definition">¶</a></dt>
<dd><p>Return busy connection back to the pool.</p>
<p><strong>NOTE:</strong> This is a synchronous method.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>connection</strong> (<em>Connection</em>) &#8211; Connection object previously returned by <a class="reference internal" href="#momoko.Pool.getconn" title="momoko.Pool.getconn"><tt class="xref py py-meth docutils literal"><span class="pre">momoko.Pool.getconn()</span></tt></a>.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="momoko.Pool.register_hstore">
<tt class="descclassname">Pool.</tt><tt class="descname">register_hstore</tt><big>(</big><em>*args</em>, <em>**kwargs</em><big>)</big><a class="headerlink" href="#momoko.Pool.register_hstore" title="Permalink to this definition">¶</a></dt>
<dd><p>Register adapter and typecaster for <tt class="docutils literal"><span class="pre">dict-hstore</span></tt> conversions.</p>
<p>See <a class="reference internal" href="#momoko.Connection.register_hstore" title="momoko.Connection.register_hstore"><tt class="xref py py-meth docutils literal"><span class="pre">momoko.Connection.register_hstore()</span></tt></a> for documentation about
the parameters. This method has no <tt class="docutils literal"><span class="pre">globally</span></tt> parameter, because it
already registers hstore to all the connections in the pool.</p>
</dd></dl>

<dl class="method">
<dt id="momoko.Pool.register_json">
<tt class="descclassname">Pool.</tt><tt class="descname">register_json</tt><big>(</big><em>*args</em>, <em>**kwargs</em><big>)</big><a class="headerlink" href="#momoko.Pool.register_json" title="Permalink to this definition">¶</a></dt>
<dd><p>Create and register typecasters converting <tt class="docutils literal"><span class="pre">json</span></tt> type to Python objects.</p>
<p>See <a class="reference internal" href="#momoko.Connection.register_json" title="momoko.Connection.register_json"><tt class="xref py py-meth docutils literal"><span class="pre">momoko.Connection.register_json()</span></tt></a> for documentation about
the parameters. This method has no <tt class="docutils literal"><span class="pre">globally</span></tt> parameter, because it
already registers json to all the connections in the pool.</p>
</dd></dl>

<dl class="method">
<dt id="momoko.Pool.transaction">
<tt class="descclassname">Pool.</tt><tt class="descname">transaction</tt><big>(</big><em>*args</em>, <em>**kwargs</em><big>)</big><a class="headerlink" href="#momoko.Pool.transaction" title="Permalink to this definition">¶</a></dt>
<dd><p>Run a sequence of SQL queries in a database transaction.</p>
<p>See <a class="reference internal" href="#momoko.Connection.transaction" title="momoko.Connection.transaction"><tt class="xref py py-meth docutils literal"><span class="pre">momoko.Connection.transaction()</span></tt></a> for documentation about the
parameters.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="momoko.Connection">
<em class="property">class </em><tt class="descclassname">momoko.</tt><tt class="descname">Connection</tt><big>(</big><em>dsn</em>, <em>connection_factory=None</em>, <em>cursor_factory=None</em>, <em>ioloop=None</em>, <em>setsession=()</em><big>)</big><a class="headerlink" href="#momoko.Connection" title="Permalink to this definition">¶</a></dt>
<dd><p>Asynchronous connection object. All its methods are
asynchronous unless stated otherwide in method description.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>dsn</strong> (<em>string</em>) &#8211; <p>A <a class="reference external" href="http://en.wikipedia.org/wiki/Data_Source_Name">Data Source Name</a> string containing one of the following values:</p>
<ul>
<li><strong>dbname</strong> - the database name</li>
<li><strong>user</strong> - user name used to authenticate</li>
<li><strong>password</strong> - password used to authenticate</li>
<li><strong>host</strong> - database host address (defaults to UNIX socket if not provided)</li>
<li><strong>port</strong> - connection port number (defaults to 5432 if not provided)</li>
</ul>
<p>Or any other parameter supported by PostgreSQL. See the PostgreSQL
documentation for a complete list of supported <a class="reference external" href="http://www.postgresql.org/docs/current/static/libpq-connect.html#LIBPQ-PQCONNECTDBPARAMS">parameters</a>.</p>
</li>
<li><strong>connection_factory</strong> &#8211; The <tt class="docutils literal"><span class="pre">connection_factory</span></tt> argument can be used to create non-standard
connections. The class returned should be a subclass of <a class="reference external" href="http://initd.org/psycopg/docs/connection.html#connection">psycopg2.extensions.connection</a>.
See <a class="reference external" href="http://initd.org/psycopg/docs/advanced.html#subclassing-cursor">Connection and cursor factories</a> for details. Defaults to <tt class="docutils literal"><span class="pre">None</span></tt>.</li>
<li><strong>cursor_factory</strong> &#8211; The <tt class="docutils literal"><span class="pre">cursor_factory</span></tt> argument can be used to return non-standart cursor class
The class returned should be a subclass of <a class="reference external" href="http://initd.org/psycopg/docs/extensions.html#psycopg2.extensions.cursor">psycopg2.extensions.cursor</a>.
See <a class="reference external" href="http://initd.org/psycopg/docs/advanced.html#subclassing-cursor">Connection and cursor factories</a> for details. Defaults to <tt class="docutils literal"><span class="pre">None</span></tt>.</li>
<li><strong>setsession</strong> (<em>list</em>) &#8211; List of intial sql commands to be executed once connection is established.
If any of the commands fails, the connection will be closed.
<strong>NOTE:</strong> The commands will be executed as one transaction block.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="momoko.Connection.callproc">
<tt class="descname">callproc</tt><big>(</big><em>procname</em>, <em>parameters=()</em>, <em>cursor_factory=None</em><big>)</big><a class="headerlink" href="#momoko.Connection.callproc" title="Permalink to this definition">¶</a></dt>
<dd><p>Call a stored database procedure with the given name.</p>
<p>The sequence of parameters must contain one entry for each argument that
the procedure expects. The result of the call is returned as modified copy
of the input sequence. Input parameters are left untouched, output and
input/output parameters replaced with possibly new values.</p>
<p>The procedure may also provide a result set as output. This must then be
made available through the standard <a class="reference external" href="http://initd.org/psycopg/docs/cursor.html#fetch">fetch*()</a> methods.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>procname</strong> (<em>string</em>) &#8211; The name of the database procedure.</li>
<li><strong>parameters</strong> (<em>tuple/list</em>) &#8211; A list or tuple with query parameters. See <a class="reference external" href="http://initd.org/psycopg/docs/usage.html#query-parameters">Passing parameters to SQL queries</a>
for more information. Defaults to an empty tuple.</li>
<li><strong>cursor_factory</strong> &#8211; The <tt class="docutils literal"><span class="pre">cursor_factory</span></tt> argument can be used to create non-standard cursors.
The class returned must be a subclass of <a class="reference external" href="http://initd.org/psycopg/docs/extensions.html#psycopg2.extensions.cursor">psycopg2.extensions.cursor</a>.
See <a class="reference external" href="http://initd.org/psycopg/docs/advanced.html#subclassing-cursor">Connection and cursor factories</a> for details. Defaults to <tt class="docutils literal"><span class="pre">None</span></tt>.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p>Returns future that resolves to cursor object containing result.</p>
</dd></dl>

<dl class="method">
<dt id="momoko.Connection.close">
<tt class="descname">close</tt><big>(</big><big>)</big><a class="headerlink" href="#momoko.Connection.close" title="Permalink to this definition">¶</a></dt>
<dd><p>Closes the connection.</p>
<p><strong>NOTE:</strong> This is a synchronous method.</p>
</dd></dl>

<dl class="attribute">
<dt id="momoko.Connection.closed">
<tt class="descname">closed</tt><a class="headerlink" href="#momoko.Connection.closed" title="Permalink to this definition">¶</a></dt>
<dd><p>Indicates whether the connection is closed or not.</p>
</dd></dl>

<dl class="method">
<dt id="momoko.Connection.connect">
<tt class="descname">connect</tt><big>(</big><big>)</big><a class="headerlink" href="#momoko.Connection.connect" title="Permalink to this definition">¶</a></dt>
<dd><p>Initiate asynchronous connect.
Returns future that resolves to this connection object.</p>
</dd></dl>

<dl class="method">
<dt id="momoko.Connection.execute">
<tt class="descname">execute</tt><big>(</big><em>operation</em>, <em>parameters=()</em>, <em>cursor_factory=None</em><big>)</big><a class="headerlink" href="#momoko.Connection.execute" title="Permalink to this definition">¶</a></dt>
<dd><p>Prepare and execute a database operation (query or command).</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>operation</strong> (<em>string</em>) &#8211; An SQL query.</li>
<li><strong>parameters</strong> (<em>tuple/list</em>) &#8211; A list or tuple with query parameters. See <a class="reference external" href="http://initd.org/psycopg/docs/usage.html#query-parameters">Passing parameters to SQL queries</a>
for more information. Defaults to an empty tuple.</li>
<li><strong>cursor_factory</strong> &#8211; The <tt class="docutils literal"><span class="pre">cursor_factory</span></tt> argument can be used to create non-standard cursors.
The class returned must be a subclass of <a class="reference external" href="http://initd.org/psycopg/docs/extensions.html#psycopg2.extensions.cursor">psycopg2.extensions.cursor</a>.
See <a class="reference external" href="http://initd.org/psycopg/docs/advanced.html#subclassing-cursor">Connection and cursor factories</a> for details. Defaults to <tt class="docutils literal"><span class="pre">None</span></tt>.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p>Returns future that resolves to cursor object containing result.</p>
</dd></dl>

<dl class="method">
<dt id="momoko.Connection.mogrify">
<tt class="descname">mogrify</tt><big>(</big><em>operation</em>, <em>parameters=()</em><big>)</big><a class="headerlink" href="#momoko.Connection.mogrify" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a query string after arguments binding.</p>
<p>The string returned is exactly the one that would be sent to the database
running the execute() method or similar.</p>
<p><strong>NOTE:</strong> This is a synchronous method.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>operation</strong> (<em>string</em>) &#8211; An SQL query.</li>
<li><strong>parameters</strong> (<em>tuple/list</em>) &#8211; A list or tuple with query parameters. See <a class="reference external" href="http://initd.org/psycopg/docs/usage.html#query-parameters">Passing parameters to SQL queries</a>
for more information. Defaults to an empty tuple.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="momoko.Connection.ping">
<tt class="descname">ping</tt><big>(</big><big>)</big><a class="headerlink" href="#momoko.Connection.ping" title="Permalink to this definition">¶</a></dt>
<dd><p>Make sure this connection is alive by executing SELECT 1 statement -
i.e. roundtrip to the database.</p>
<p>Returns future. If it resolves sucessfully - the connection is alive (or dead otherwise).</p>
</dd></dl>

<dl class="method">
<dt id="momoko.Connection.register_hstore">
<tt class="descname">register_hstore</tt><big>(</big><em>globally=False</em>, <em>unicode=False</em><big>)</big><a class="headerlink" href="#momoko.Connection.register_hstore" title="Permalink to this definition">¶</a></dt>
<dd><p>Register adapter and typecaster for <tt class="docutils literal"><span class="pre">dict-hstore</span></tt> conversions.</p>
<p>More information on the hstore datatype can be found on the
Psycopg2 <a class="reference external" href="http://initd.org/psycopg/docs/extras.html#hstore-data-type">documentation</a>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>globally</strong> (<em>boolean</em>) &#8211; Register the adapter globally, not only on this connection.</li>
<li><strong>unicode</strong> (<em>boolean</em>) &#8211; If <tt class="docutils literal"><span class="pre">True</span></tt>, keys and values returned from the database will be <tt class="docutils literal"><span class="pre">unicode</span></tt>
instead of <tt class="docutils literal"><span class="pre">str</span></tt>. The option is not available on Python 3.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p>Returns future that resolves to <tt class="docutils literal"><span class="pre">None</span></tt>.</p>
</dd></dl>

<dl class="method">
<dt id="momoko.Connection.register_json">
<tt class="descname">register_json</tt><big>(</big><em>globally=False</em>, <em>loads=None</em><big>)</big><a class="headerlink" href="#momoko.Connection.register_json" title="Permalink to this definition">¶</a></dt>
<dd><p>Create and register typecasters converting <tt class="docutils literal"><span class="pre">json</span></tt> type to Python objects.</p>
<p>More information on the json datatype can be found on the Psycopg2 <a class="reference external" href="http://initd.org/psycopg/docs/extras.html#json-adaptation">documentation</a>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>globally</strong> (<em>boolean</em>) &#8211; Register the adapter globally, not only on this connection.</li>
<li><strong>loads</strong> (<em>function</em>) &#8211; The function used to parse the data into a Python object.  If <tt class="docutils literal"><span class="pre">None</span></tt>
use <tt class="docutils literal"><span class="pre">json.loads()</span></tt>, where <tt class="docutils literal"><span class="pre">json</span></tt> is the module chosen according to
the Python version.  See psycopg2.extra docs.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p>Returns future that resolves to <tt class="docutils literal"><span class="pre">None</span></tt>.</p>
</dd></dl>

<dl class="method">
<dt id="momoko.Connection.transaction">
<tt class="descname">transaction</tt><big>(</big><em>statements</em>, <em>cursor_factory=None</em>, <em>auto_rollback=True</em><big>)</big><a class="headerlink" href="#momoko.Connection.transaction" title="Permalink to this definition">¶</a></dt>
<dd><p>Run a sequence of SQL queries in a database transaction.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>statements</strong> (<em>tuple/list</em>) &#8211; <p>List or tuple containing SQL queries with or without parameters. An item
can be a string (SQL query without parameters) or a tuple/list with two items,
an SQL query and a tuple/list wuth parameters.</p>
<p>See <a class="reference external" href="http://initd.org/psycopg/docs/usage.html#query-parameters">Passing parameters to SQL queries</a> for more information.</p>
</li>
<li><strong>cursor_factory</strong> &#8211; The <tt class="docutils literal"><span class="pre">cursor_factory</span></tt> argument can be used to create non-standard cursors.
The class returned must be a subclass of <a class="reference external" href="http://initd.org/psycopg/docs/extensions.html#psycopg2.extensions.cursor">psycopg2.extensions.cursor</a>.
See <a class="reference external" href="http://initd.org/psycopg/docs/advanced.html#subclassing-cursor">Connection and cursor factories</a> for details. Defaults to <tt class="docutils literal"><span class="pre">None</span></tt>.</li>
<li><strong>auto_rollback</strong> (<em>bool</em>) &#8211; If one of the transaction statements fails, try to automatically
execute ROLLBACK to abort the transaction. If ROLLBACK fails, it would
not be raised, but only logged.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p>Returns future that resolves to <tt class="docutils literal"><span class="pre">list</span></tt> of cursors. Each cursor contains the result
of the corresponding transaction statement.</p>
</dd></dl>

</dd></dl>

<dl class="function">
<dt id="momoko.connect">
<tt class="descclassname">momoko.</tt><tt class="descname">connect</tt><big>(</big><em>*args</em>, <em>**kwargs</em><big>)</big><a class="headerlink" href="#momoko.connect" title="Permalink to this definition">¶</a></dt>
<dd><p>Connection factory.
See <a class="reference internal" href="#momoko.Connection" title="momoko.Connection"><tt class="xref py py-meth docutils literal"><span class="pre">momoko.Connection()</span></tt></a> for documentation about the parameters.</p>
<p>Returns future that resolves to <a class="reference internal" href="#momoko.Connection" title="momoko.Connection"><tt class="xref py py-meth docutils literal"><span class="pre">momoko.Connection()</span></tt></a> object or raises exception.</p>
</dd></dl>

</div>
<div class="section" id="exceptions">
<h2>Exceptions<a class="headerlink" href="#exceptions" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="momoko.PoolError">
<em class="property">class </em><tt class="descclassname">momoko.</tt><tt class="descname">PoolError</tt><a class="headerlink" href="#momoko.PoolError" title="Permalink to this definition">¶</a></dt>
<dd><p>Raised when something goes wrong in the connection pool.</p>
</dd></dl>

<dl class="class">
<dt id="momoko.PartiallyConnectedError">
<em class="property">class </em><tt class="descclassname">momoko.</tt><tt class="descname">PartiallyConnectedError</tt><a class="headerlink" href="#momoko.PartiallyConnectedError" title="Permalink to this definition">¶</a></dt>
<dd><p>Raised  when <a class="reference internal" href="#momoko.Pool" title="momoko.Pool"><tt class="xref py py-meth docutils literal"><span class="pre">momoko.Pool()</span></tt></a> can not initialize all of the requested connections.</p>
</dd></dl>

</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">API</a><ul>
<li><a class="reference internal" href="#connections">Connections</a></li>
<li><a class="reference internal" href="#exceptions">Exceptions</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="tutorial.html"
                        title="previous chapter">Tutorial</a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="_sources/api.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="tutorial.html" title="Tutorial"
             >previous</a> |</li>
        <li><a href="index.html">Momoko 2.2.2 documentation</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2011-2015, Frank Smit &amp; Zaar Hai.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.2.2.
    </div>
  </body>
</html>